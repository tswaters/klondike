!function(e){function t(t){for(var n,o,r=t[0],i=t[1],l=t[2],u=0,p=[];u<r.length;u++)o=r[u],a[o]&&p.push(a[o][0]),a[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(d&&d(t);p.length;)p.shift()();return c.push.apply(c,l||[]),s()}function s(){for(var e,t=0;t<c.length;t++){for(var s=c[t],n=!0,r=1;r<s.length;r++){var i=s[r];0!==a[i]&&(n=!1)}n&&(c.splice(t--,1),e=o(o.s=s[0]))}return e}var n={},a={0:0},c=[];function o(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=n,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(s,n,function(t){return e[t]}.bind(null,n));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var r=window.webpackJsonp=window.webpackJsonp||[],i=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=i;c.push([22,1]),s()}([,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(9),a=s(14),c=s(4),o=s(10),r=s(5),i=s(15),l=s(11),d=s(3),u=s(16);t.INITIALIZE="INITIALIZE",t.SELECT_CARD="SELECT_CARD",t.DESELECT_CARD="DESELECT_CARD",t.MOVE_CARDS="MOVE_CARDS",t.REPLACE_TOP="REPLACE_TOP",t.APPEND_CARDS="APPEND_CARDS";const p=n.createSelector([l.getFoundation,l.getWaste,l.getTableau],({stacks:e},{stacks:t},{stacks:s})=>[...e,...t,...s]);t.initialize=function(){return(e,s)=>{e({type:t.INITIALIZE});const n=l.getTableau(s()),a=e(u.getRandomCards(n.stacks.length));n.stacks.forEach((t,s)=>{e(k(t,[a[s]]))})}};const f=(e,s)=>({type:t.SELECT_CARD,card:s,stack:e}),h=()=>({type:t.DESELECT_CARD}),k=(e,s)=>({type:t.APPEND_CARDS,cards:s,stack:e}),y=(e,s,n=null,a=null,c=!1)=>{if(null==a){if(null==n)throw new Error("from card reqired when index not provided");a=e.cards.findIndex(e=>!!e.card&&e.card===n)}const o=e.cards.slice(a);return c&&o.reverse(),{type:t.MOVE_CARDS,from:e,to:s,cards:o}},C=(e,s)=>({type:t.REPLACE_TOP,stack:e,card:s});t.doubleClick=function(e,t){return(s,n)=>{if(e.type===c.StackType.foundation||e.type===c.StackType.stock)return;if(null==t)return;const{card:a}=t;if(null==a)return;const u=l.getFoundation(n()),p=a.value===o.ValueType.ace?u.stacks.find(e=>0===e.cards.length):u.stacks.find(e=>{if(0===e.cards.length)return!1;const t=e.cards[0].card;return null!=t&&t.suit===a.suit}),f=r.get_top_card(p);r.movable_to_foundation(a,f)&&(s(d.checkpoint()),e.type===c.StackType.waste&&s(i.incrementScore(5)),e.type===c.StackType.tableau&&s(i.incrementScore(10)),s(y(e,p,a)),s(h()))}},t.clickFoundation=function(e,t){return(s,n)=>{const a=p(n()),o=r.get_selection(a);if(!o)return void(t&&t.card&&s(f(e,t)));if(t&&t.selected)return void s(h());const l=r.get_top_card(e),{card:u,stack:k}=o;r.movable_to_foundation(u,l)&&(s(d.checkpoint()),k.type===c.StackType.waste&&s(i.incrementScore(5)),k.type===c.StackType.tableau&&s(i.incrementScore(10)),s(y(k,e,u)),s(h()))}},t.clickWaste=function(e,t){return(s,n)=>{if(!t)return;const a=p(n()),c=r.get_selection(a),o=r.get_top_card(e);t.selected?s(h()):c||o!==t||s(f(e,t))}},t.clickTableau=function(e,t){return(s,n)=>{const a=p(n()),o=r.get_selection(a),l=r.get_top_card(e);if(!o){if(t&&t.card)s(f(e,t));else if(t&&l&&null==l.card){s(d.checkpoint()),s(i.incrementScore(5));const t=s(u.getRandomCards(1));s(C(e,t[0]))}return}if(t&&t.selected)return void s(h());const{card:k,stack:g}=o;t===l&&r.movable_to_tableau(k,l)&&(s(d.checkpoint()),g.type===c.StackType.waste&&s(i.incrementScore(10)),g.type===c.StackType.foundation&&s(i.incrementScore(-10)),s(y(g,e,k)),s(h()))}},t.clickStock=function(){return(e,t)=>{const s=t(),{stacks:[n]}=l.getWaste(s),{stacks:[c],left:o}=l.getStock(s);e(d.checkpoint()),o>0?(e(a.useStock(3)),e(k(n,e(u.getRandomCards(3))))):c.cards.length>0?e(y(c,n,null,-3,!0)):e(y(n,c,null,0,!0))}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(2),a="UNDO";t.undo=(()=>({type:a}));const c="REDO";t.redo=(()=>({type:c}));const o="CHECKPOINT";t.checkpoint=(()=>({type:o})),t.undoable=function(e){const t={past:[],present:e(void 0,{}),future:[]};return function(s=t,r){const{past:i,present:l,future:d}=s;if(r.type===a){const e=i[i.length-1];return e?{past:i.slice(0,i.length-1),present:e,future:[l,...d]}:s}if(r.type===c){const e=d[0];if(!e)return s;const t=d.slice(1);return{past:[...i,l],present:e,future:t}}const u=e(l,r);return r.type===n.INITIALIZE?{past:[],present:u,future:[]}:r.type===o?{past:[...i,l],present:u,future:[]}:l===u?s:{past:i,present:u,future:d}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.horizontal="horizontal",e.vertical="vertical",e.none=""}(t.StackDirection||(t.StackDirection={})),function(e){e.tableau="tableau",e.foundation="foundation",e.stock="stock",e.waste="waste"}(t.StackType||(t.StackType={}))},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(10);function a(e){return e===n.ValueType.ace?1:e===n.ValueType.jack?11:e===n.ValueType.queen?12:e===n.ValueType.king?13:parseInt(e)}t.random=((e,t)=>Math.floor(Math.random()*t)+e),t.get_top_card=function(e){return e.cards[e.cards.length-1]},t.get_selection=function(e){for(let t=0;t<e.length;t++){const s=e[t];if(null!=s.selection)return{card:s.selection,stack:s}}return null},t.select_card=function(e,t){const s=t.card;return null==s?e:e.map(e=>!function(e,t){return e.cards.some(e=>!!e.card&&e.card===t)}(e,s)?e:Object.assign({},e,{cards:e.cards.map(e=>e.card?e.card!==s?e:Object.assign({},e,{selected:!0}):e),selection:s}))},t.deselect_card=function(e){return e.map(e=>e.selection?Object.assign({},e,{selection:void 0,cards:e.cards.map(e=>e.selected?Object.assign({},e,{selected:void 0}):e)}):e)},t.move_cards=function(e,t,s,n){return e.map(e=>e===s?Object.assign({},e,{cards:[...e.cards,...n.map(e=>Object.assign({},e,{selected:!1}))]}):e===t?Object.assign({},e,{cards:e.cards.filter(e=>-1===n.indexOf(e))}):e)},t.append_cards=function(e,t,s){return e.map(e=>e!==t?e:Object.assign({},e,{cards:[...e.cards,...s.map(e=>({card:e}))]}))},t.movable_to_foundation=function(e,t){if(null==t)return e.value===n.ValueType.ace;const{card:s}=t;return!!s&&a(e.value)===a(s.value)+1&&e.suit===s.suit},t.movable_to_tableau=function(e,t){if(null==t)return e.value===n.ValueType.king;const{card:s}=t;return!!s&&(a(e.value)+1===a(s.value)&&e.isRed&&s.isBlack||e.isBlack&&s.isRed)}},,,,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=75,a=97;var c,o;!function(e){e.ace="A",e.two="2",e.three="3",e.four="4",e.five="5",e.six="6",e.seven="7",e.eight="8",e.nine="9",e.ten="10",e.jack="J",e.queen="Q",e.king="K"}(c=t.ValueType||(t.ValueType={})),function(e){e.heart="♥",e.diamond="♦",e.spade="♠",e.club="♣"}(o||(o={})),t.Cards=[];for(const[,e]of Object.entries(c))for(const[,s]of Object.entries(o))t.Cards.push({suit:s,value:e,isRed:[o.diamond,o.heart].indexOf(s)>-1,isBlack:[o.club,o.spade].indexOf(s)>-1,drawing:r(s,e)});function r(e,t){const s=[o.diamond,o.heart].indexOf(e)>-1?"red":"black",r=[c.ace,c.jack,c.queen,c.king].indexOf(t)>-1?"72px":"20px",i=[];[c.ace,c.three,c.five,c.nine,c.jack,c.queen,c.king].indexOf(t)>-1&&i.push({x:1,y:3}),[c.two,c.three].indexOf(t)>-1&&i.push({x:1,y:0},{x:1,y:6}),[c.four,c.five,c.six,c.seven,c.eight,c.nine,c.ten].indexOf(t)>-1&&i.push({x:0,y:0},{x:2,y:0},{x:0,y:6},{x:2,y:6}),[c.six,c.seven,c.eight].indexOf(t)>-1&&i.push({x:0,y:3},{x:2,y:3}),[c.seven,c.ten,c.eight].indexOf(t)>-1&&i.push({x:1,y:1}),[c.nine,c.ten].indexOf(t)>-1&&i.push({x:0,y:2},{x:2,y:2},{x:0,y:4},{x:2,y:4}),[c.ten,c.eight].indexOf(t)>-1&&i.push({x:1,y:5});return{cornerFont:"bold 15px sans-serif",valueXOffset:9,valueYOffset:2,suitXOffset:9,suitYOffset:12,color:s,fontSize:r,positions:i.map(({x:e,y:t})=>({textAlign:(e=>{switch(e){case 0:return"left";case 1:return"center";case 2:return"right"}})(e),rotated:t>3,left:(e=>{switch(e){case 0:return.25*n;case 1:return.5*n;case 2:return.75*n}})(e),top:(e=>{switch(e){case 0:case 6:return.2*a;case 1:case 5:return.3*a;case 2:case 4:return.4*a;case 3:return.5*a}})(t)}))}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(9);t.getFoundation=n.createSelector(e=>e.foundation.present,e=>e),t.getScore=n.createSelector(e=>e.score.present,e=>e),t.getStock=n.createSelector(e=>e.stock.present,e=>e),t.getTableau=n.createSelector(e=>e.tableau.present,e=>e),t.getWaste=n.createSelector(e=>e.waste.present,e=>e),t.getDeck=n.createSelector(e=>e.deck.present,e=>e)},,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(3),a=s(2),c=s(4),o=s(5),r="USE_STOCK";t.useStock=function(e){return{type:r,count:e}};const i={stacks:[{type:c.StackType.stock,cards:[]}],left:24};t.default=n.undoable(function(e=i,t){return t.type===a.INITIALIZE?Object.assign({},i):t.type===r?Object.assign({},e,{left:e.left-t.count}):t.type===a.MOVE_CARDS&&e.stacks.some(e=>[t.from,t.to].indexOf(e)>-1)?Object.assign({},e,{stacks:o.move_cards(e.stacks,t.from,t.to,t.cards)}):t.type===a.APPEND_CARDS&&e.stacks.some(e=>t.stack===e)?Object.assign({},e,{stacks:o.append_cards(e.stacks,t.stack,t.cards)}):e})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(2),a=s(3),c="INCREMENT_SCORE";t.incrementScore=function(e){return{type:c,score:e}};const o={score:0};t.default=a.undoable(function(e=o,t){return t.type===n.INITIALIZE?{score:0}:t.type===c?{score:e.score+t.score}:e})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(10),a=s(2),c=s(3),o=s(5),r=s(11),i="REMOVE_CARD";t.removeCards=(e=>({type:i,cards:e})),t.getRandomCards=(e=>(s,n)=>{const a=[...r.getDeck(n()).cards],c=[];for(let t=0;t<e;t++){const e=o.random(0,a.length-1);c.push(...a.splice(e,1))}return s(t.removeCards(c)),c});const l={cards:[]};t.default=c.undoable(function(e=l,t){if(t.type===a.INITIALIZE){const e=[];for(const t of n.Cards)e.push(Object.assign({},t));return{cards:e}}return t.type===i?{cards:e.cards.filter(e=>-1===t.cards.indexOf(e))}:e})},function(e,t,s){e.exports={container:"_3hBob",top:"_3awzY",play:"_1E68Q",stock:"_2EnhJ",waste:"_3xl1i",foundation:"cOfJ3",tableau:"_2j3jz",version:"_3qfCP","new-game":"_3o9uZ",newGame:"_3o9uZ",score:"_1xo1P"}},,,,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1),a=s(24),c=s(28),o=s(18),r=s(32),i=s(2),l=s(39);c.install({onUpdateReady(){c.applyUpdate()},onUpdated(){window.location.reload()}});const d=r.default();d.dispatch(i.initialize()),a.render(n.createElement(o.Provider,{store:d},n.createElement(l.Container,null)),document.getElementById("root"))},,,,,,,,,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(6),a=s(33),c=(s(34),s(35));t.default=function(e){const t=[];return t.push(a.default),n.createStore(c.default,e,n.applyMiddleware(...t))}},,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(6),a=s(36),c=s(37),o=s(38),r=s(14),i=s(15),l=s(16);t.default=n.combineReducers({deck:l.default,tableau:a.default,foundation:c.default,waste:o.default,stock:r.default,score:i.default})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(2),a=s(4),c=s(5),o=s(3),r={stacks:[]};t.default=o.undoable(function(e=r,t){if(t.type===n.INITIALIZE){const e=[];for(let t=0;t<=6;t++){const s={type:a.StackType.tableau,cards:[]};for(let e=0;e<t;e++)s.cards.push({});e.push(s)}return{stacks:e}}return t.type===n.SELECT_CARD&&e.stacks.some(e=>e===t.stack)?Object.assign({},e,{stacks:c.select_card(e.stacks,t.card)}):t.type===n.DESELECT_CARD&&e.stacks.some(e=>!!e.selection)?Object.assign({},e,{stacks:c.deselect_card(e.stacks)}):t.type===n.MOVE_CARDS&&e.stacks.some(e=>[t.from,t.to].indexOf(e)>-1)?Object.assign({},e,{stacks:c.move_cards(e.stacks,t.from,t.to,t.cards)}):t.type===n.APPEND_CARDS&&e.stacks.some(e=>t.stack===e)?Object.assign({},e,{stacks:c.append_cards(e.stacks,t.stack,t.cards)}):t.type===n.REPLACE_TOP?Object.assign({},e,{stacks:e.stacks.map(e=>e!==t.stack?e:Object.assign({},e,{cards:e.cards.map((s,n)=>n<e.cards.length-1?s:{card:t.card})}))}):e})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(2),a=s(4),c=s(5),o=s(3),r={stacks:[{type:a.StackType.foundation,cards:[]},{type:a.StackType.foundation,cards:[]},{type:a.StackType.foundation,cards:[]},{type:a.StackType.foundation,cards:[]}]};t.default=o.undoable(function(e=r,t){return t.type===n.INITIALIZE?Object.assign({},r):t.type===n.SELECT_CARD&&e.stacks.some(e=>e===t.stack)?Object.assign({},e,{stacks:c.select_card(e.stacks,t.card)}):t.type===n.DESELECT_CARD&&e.stacks.some(e=>!!e.selection)?Object.assign({},e,{stacks:c.deselect_card(e.stacks)}):t.type===n.MOVE_CARDS&&e.stacks.some(e=>[t.from,t.to].indexOf(e)>-1)?Object.assign({},e,{stacks:c.move_cards(e.stacks,t.from,t.to,t.cards)}):e})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(2),a=s(5),c=s(4),o=s(3),r={stacks:[{type:c.StackType.waste,cards:[]}],showing:0};t.default=o.undoable(function(e=r,t){return t.type===n.INITIALIZE?Object.assign({},r):t.type===n.SELECT_CARD&&e.stacks.some(e=>e===t.stack)?Object.assign({},e,{stacks:a.select_card(e.stacks,t.card)}):t.type===n.DESELECT_CARD&&e.stacks.some(e=>!!e.selection)?Object.assign({},e,{stacks:a.deselect_card(e.stacks)}):t.type===n.MOVE_CARDS&&e.stacks.some(e=>[t.from,t.to].indexOf(e)>-1)?Object.assign({},e,{showing:t.to===e.stacks[0]?Math.min(e.stacks[0].cards.length+t.cards.length,3):Math.max(1,e.showing-1),stacks:a.move_cards(e.stacks,t.from,t.to,t.cards)}):t.type===n.APPEND_CARDS&&e.stacks.some(e=>t.stack===e)?Object.assign({},e,{showing:t.stack===e.stacks[0]?Math.min(e.stacks[0].cards.length+t.cards.length,3):Math.max(1,e.showing-1),stacks:a.append_cards(e.stacks,t.stack,t.cards)}):e})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1),a=s(18),c=s(9),o=s(40),r=s(17),i=s(4),l=s(2),d=s(11),u=s(3);const p=c.createSelector([d.getTableau,d.getFoundation,d.getStock,d.getWaste,d.getScore],({stacks:e},{stacks:t},s,n,{score:a})=>({tableau:e,foundation:t,stock:s,waste:n,score:a}));t.Container=a.connect(e=>p(e),e=>({handleNewGame:()=>e(l.initialize()),handleStockClick:()=>e(l.clickStock()),handleTableauClick:(t,s)=>e(l.clickTableau(t,s)),handleWasteClick:(t,s)=>e(l.clickWaste(t,s)),handleFoundationClick:(t,s)=>e(l.clickFoundation(t,s)),handleDoubleClick:(t,s)=>e(l.doubleClick(t,s)),handleUndo:()=>e(u.undo()),handleRedo:()=>e(u.redo())}))(class extends n.PureComponent{constructor(e){super(e),this.handleNewGameClick=this.handleNewGameClick.bind(this),this.handleStockClick=this.handleStockClick.bind(this),this.handleTableauClick=this.handleTableauClick.bind(this),this.handleWasteClick=this.handleWasteClick.bind(this),this.handleFoundationClick=this.handleFoundationClick.bind(this),this.handleDoubleClick=this.handleDoubleClick.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}handleNewGameClick(){this.props.handleNewGame()}handleKeyDown(e){90===e.keyCode&&(e.ctrlKey&&e.shiftKey?this.props.handleRedo():e.ctrlKey&&this.props.handleUndo())}handleStockClick(e,t){this.props.handleStockClick(e,t)}handleTableauClick(e,t){this.props.handleTableauClick(e,t)}handleWasteClick(e,t){this.props.handleWasteClick(e,t)}handleFoundationClick(e,t){this.props.handleFoundationClick(e,t)}handleDoubleClick(e,t){this.props.handleDoubleClick(e,t)}render(){return n.createElement("div",{className:r.container},n.createElement("div",null,n.createElement("button",{id:"new-game",className:r.newGame,onClick:this.handleNewGameClick},"New Game"),n.createElement("label",{id:"score",className:r.score},"Score: ",this.props.score)),n.createElement("div",{className:r.top},n.createElement(o.StackComponent,{stack:this.props.stock.stacks[0],onClick:this.handleStockClick,direction:i.StackDirection.none,type:i.StackType.stock,left:this.props.stock.left,hidden:!0}),n.createElement(o.StackComponent,{stack:this.props.waste.stacks[0],onClick:this.handleWasteClick,onDoubleClick:this.handleDoubleClick,direction:i.StackDirection.horizontal,type:i.StackType.waste,max:this.props.waste.showing,offset:15}),this.props.foundation.map((e,t)=>n.createElement(o.StackComponent,{key:`foundation-${t}`,onClick:this.handleFoundationClick,stack:e,direction:i.StackDirection.none,type:i.StackType.foundation,max:1}))),n.createElement("div",{className:r.play},this.props.tableau.map((e,t)=>n.createElement(o.StackComponent,{key:`tableau-${t}`,onClick:this.handleTableauClick,onDoubleClick:this.handleDoubleClick,stack:e,direction:i.StackDirection.vertical,type:i.StackType.tableau}))),n.createElement("div",{className:r.version},"2.1.1"))}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1),a=s(17),c=s(4);class o extends n.PureComponent{constructor(e){super(e),this.ref=n.createRef(),this.handleCanvasClick=this.handleCanvasClick.bind(this),this.handleCanvasDoubleClick=this.handleCanvasDoubleClick.bind(this)}get stack_style(){switch(this.props.type){case c.StackType.foundation:return a.foundation;case c.StackType.tableau:return a.tableau;case c.StackType.stock:return a.stock;case c.StackType.waste:return a.waste}}get canvas_width(){switch(this.props.direction){case c.StackDirection.none:case c.StackDirection.vertical:return this.props.width;case c.StackDirection.horizontal:return 0===this.cards.length?this.props.height:this.props.offset*(this.cards.length-1)+this.props.width}}get canvas_height(){switch(this.props.direction){case c.StackDirection.none:case c.StackDirection.horizontal:return this.props.height;case c.StackDirection.vertical:return 0===this.cards.length?this.props.height:this.props.offset*(this.cards.length-1)+this.props.height}}get cards(){return this.props.hidden&&(this.props.stack.cards.length>0||this.props.left&&this.props.left>0)?[{}]:this.props.stack.cards.slice(-this.props.max)}handleCanvasDoubleClick(e){const{cards:t}=this,{stack:s,offset:n,direction:a,onDoubleClick:o}=this.props,{nativeEvent:r}=e;if(!o)return;const i=a===c.StackDirection.horizontal?"offsetX":"offsetY";o(s,t[Math.min(t.length-1,Math.floor(r[i]/n))])}handleCanvasClick(e){const{cards:t}=this,{stack:s,offset:n,direction:a,onClick:o}=this.props,{nativeEvent:r}=e;if(!o)return;const i=a===c.StackDirection.horizontal?"offsetX":"offsetY";o(s,t[Math.min(t.length-1,Math.floor(r[i]/n))])}componentDidMount(){this.updateCanvas()}componentDidUpdate(){this.updateCanvas()}updateCanvas(){const e=this.ref.current;if(!e)return;const t=e.getContext("2d");if(!t)return;const{cards:s}=this,{direction:n,offset:a}=this.props;t.save(),t.translate(.5,.5),t.clearRect(0,0,e.width,e.height),0===s.length&&(this.drawBoxRadius(t,{x:0,y:0}),t.stroke());for(let e=0;e<s.length;e++){const o=n===c.StackDirection.horizontal?e*a:0,r=n===c.StackDirection.horizontal?0:e*a;e<s.length-1&&(t.save(),this.drawClipRegion(t,{x:o,y:r})),this.drawCard(t,s[e],{x:o,y:r}),e<s.length-1&&t.restore()}t.restore()}drawClipRegion(e,{x:t,y:s}){const{direction:n,radius:a,offset:o,width:r,height:i}=this.props,l=n===c.StackDirection.horizontal?o:r,d=n===c.StackDirection.horizontal?i:o;e.beginPath(),n===c.StackDirection.horizontal?(e.moveTo(t,s),e.lineTo(t+l+a,s),e.quadraticCurveTo(t+l,s,t+l,s+a),e.lineTo(t+l,s+d-a),e.quadraticCurveTo(t+l,s+d,t+l+a,s+d),e.lineTo(t,s+d)):(e.moveTo(t+l,s),e.lineTo(t+l,s+d+a),e.quadraticCurveTo(t+l,s+d,t+l-a,s+d),e.lineTo(t+a,s+d),e.quadraticCurveTo(t,s+d,t,s+d+a),e.lineTo(t,s)),e.closePath(),e.clip()}drawBoxRadius(e,{x:t,y:s}){const{radius:n,height:a,width:c}=this.props;e.beginPath(),e.moveTo(t+n,s),e.lineTo(t+c-n,s),e.quadraticCurveTo(t+c,s,t+c,s+n),e.lineTo(t+c,s+a-n),e.quadraticCurveTo(t+c,s+a,t+c-n,s+a),e.lineTo(t+n,s+a),e.quadraticCurveTo(t,s+a,t,s+a-n),e.lineTo(t,s+n),e.quadraticCurveTo(t,s,t+n,s),e.closePath()}drawCard(e,t,{x:s,y:n}){const{card:a,selected:c}=t;if(this.drawBoxRadius(e,{x:s,y:n}),e.stroke(),!a)return e.fillStyle="#0aa",void e.fill();c&&(e.fillStyle="yellow",e.fill());const{value:o,suit:r,drawing:i}=a;e.fillStyle=i.color,e.textAlign="center",e.textBaseline="top",e.font=i.cornerFont,e.fillText(o,i.valueXOffset+s,i.valueYOffset+n,12),e.fillText(r,i.suitXOffset+s,i.suitYOffset+n),e.save(),e.translate(this.props.width,this.props.height),e.rotate(Math.PI),e.fillText(o,i.valueXOffset-s,i.valueYOffset-n,12),e.fillText(r,i.suitXOffset-s,i.suitYOffset-n),e.restore(),e.textBaseline="middle";for(const t of i.positions){const a=t.rotated?-1:1;e.textAlign=t.textAlign,t.rotated&&(e.save(),e.translate(this.props.width,this.props.height),e.rotate(Math.PI)),e.font=`${i.fontSize} sans-serif`,e.fillText(r,t.left+s*a,t.top+n*a),t.rotated&&e.restore()}}render(){return n.createElement("canvas",{onDoubleClick:this.handleCanvasDoubleClick,onClick:this.handleCanvasClick,className:this.stack_style,width:this.canvas_width+1,height:this.canvas_height+1,ref:this.ref})}}o.defaultProps={max:1/0,hidden:!1,width:74,height:97,offset:20,radius:10},t.StackComponent=o}]);
//# sourceMappingURL=klondike.7dd40bc5434c5b3afe78.js.map