{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/ts/redux/actions.ts","webpack:///./src/ts/redux/undoable.ts","webpack:///./src/ts/lib/Stack.ts","webpack:///./src/ts/lib/util.ts","webpack:///./src/ts/redux/selectors.ts","webpack:///./src/ts/lib/Card.ts","webpack:///./src/styles/cards.scss","webpack:///./src/ts/redux/score.ts","webpack:///./src/ts/redux/deck.ts","webpack:///./src/ts/index.tsx","webpack:///./src/ts/store.ts","webpack:///./src/ts/redux/index.ts","webpack:///./src/ts/redux/tableau.ts","webpack:///./src/ts/redux/foundation.ts","webpack:///./src/ts/redux/waste.ts","webpack:///./src/ts/redux/stock.ts","webpack:///./src/ts/components/Container.tsx","webpack:///./src/ts/components/Stack.tsx","webpack:///./src/ts/components/Fireworks.tsx"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","reselect_1","Stack_1","Card_1","util_1","score_1","selectors_1","undoable_1","deck_1","INITIALIZE","SELECT_CARD","DESELECT_CARD","MOVE_CARDS","REVEAL_TOP","APPEND_CARDS","getAllStacks","createSelector","getFoundation","getWaste","getTableau","stacks","foundation","waste","tableau","initialize","dispatch","getState","type","stock","getStock","stock_stack_cards","getRandomCards","map","card","assign","hidden","appendCards","tableau_stack_cards","index","selectCard","stack","deselectCard","cards","moveCards","from","to","from_card","reverse","Error","findIndex","reveal","doubleClick","stackCard","StackType","foundation_stack","ValueType","ace","find","first","suit","top_card","get_top_card","movable_to_foundation","checkpoint","incrementScore","clickFoundation","selection","get_selection","selected","selected_card","from_stack","clickWaste","clickTableau","movable_to_tableau","clickStock","state","waste_stack","stock_stack","actions_1","UNDO","undo","REDO","redo","CHECKPOINT","undoable","reducer","initialState","past","present","undefined","future","action","previous","next","newFuture","newPresent","StackDirection","valueToInt","jack","queen","king","parseInt","random","min","max","Math","floor","select_card","some","item","contains","deselect_card","move_cards","filter","indexOf","append_cards","card1","card2","isRed","isBlack","getScore","score","getDeck","deck","WIDTH","HEIGHT","SuitType","Cards","entries","diamond","heart","club","spade","drawing","getDrawing","color","fontSize","pos","three","five","nine","x","y","two","four","six","seven","eight","ten","cornerFont","valueXOffset","valueYOffset","suitXOffset","suitYOffset","positions","textAlign","getTextAlign","rotated","left","getLeft","top","getTop","container","fireworks","play","version","new-game","newGame","INCREMENT_SCORE","default","REMOVE_CARD","removeCards","count","deck_cards","React","ReactDOM","offline","react_redux_1","store_1","Container_1","install","[object Object]","applyUpdate","location","reload","store","render","createElement","Provider","Container","document","getElementById","redux_1","redux_thunk_1","redux_2","middleware","createStore","applyMiddleware","tableau_1","foundation_1","waste_1","stock_1","combineReducers","showing","Fireworks_1","cards_scss_1","Stack_2","selector","connect","handleNewGame","handleStockClick","handleTableauClick","handleWasteClick","handleFoundationClick","handleDoubleClick","handleUndo","handleRedo","PureComponent","props","super","this","handleNewGameClick","handleKeyDown","addEventListener","removeEventListener","e","keyCode","ctrlKey","shiftKey","className","id","onClick","StackComponent","direction","none","onDoubleClick","horizontal","offset","vertical","ref","createRef","handleCanvasClick","handleCanvasDoubleClick","stack_style","canvas_width","width","height","canvas_height","evt","nativeEvent","prop","updateCanvas","canvas","current","ctx","getContext","save","translate","clearRect","drawBoxRadius","stroke","drawClipRegion","drawCard","restore","radius","clip_width","clip_height","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","clip","stack_card","fillStyle","fill","textBaseline","font","fillText","rotate","PI","factor","defaultProps","Infinity","FireworksCanvas","active","every","handleDocumentKeyDown","ev","stop","start","kill","destroy"],"mappings":"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","file":"klondike.d05ce5e3c384f4626fd8.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([21,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","\nimport {createSelector} from 'reselect'\nimport {ThunkResult} from './index'\nimport {StackCard, Stack, StackType} from '../lib/Stack'\nimport {Card, ValueType} from '../lib/Card'\nimport {get_selection, movable_to_tableau, get_top_card, movable_to_foundation} from '../lib/util'\nimport {incrementScore} from './score'\nimport {getWaste, getTableau, getFoundation, getStock} from '../redux/selectors'\nimport {checkpoint} from './undoable'\nimport {getRandomCards} from './deck'\n\nexport const INITIALIZE = 'INITIALIZE'\nexport type INITIALIZE = typeof INITIALIZE\ntype Initialize = {type: INITIALIZE}\n\nexport const SELECT_CARD = 'SELECT_CARD'\ntype SELECT_CARD = typeof SELECT_CARD\ntype SelectAction = {type: SELECT_CARD, stack: Stack, card: StackCard}\n\nexport const DESELECT_CARD = 'DESELECT_CARD'\ntype DESELECT_CARD = typeof DESELECT_CARD\ntype DeselectAction = {type: DESELECT_CARD}\n\nexport const MOVE_CARDS = 'MOVE_CARDS'\ntype MOVE_CARDS = typeof MOVE_CARDS\ntype MoveCardAction = {type: MOVE_CARDS, from: Stack, to: Stack, cards: StackCard[], hidden: boolean}\n\nexport const REVEAL_TOP = 'REVEAL_TOP'\ntype REVEAL_TOP = typeof REVEAL_TOP\ntype RevealTopCardAction = {type: REVEAL_TOP, stack: Stack}\n\nexport const APPEND_CARDS = 'APPEND_CARDS'\ntype APPEND_CARDS = typeof APPEND_CARDS\ntype AppendCardAction = {type: APPEND_CARDS, stack: Stack, cards: StackCard[]}\n\nexport type GlobalActions =\n  Initialize |\n  SelectAction |\n  DeselectAction |\n  MoveCardAction |\n  RevealTopCardAction |\n  AppendCardAction\n\nconst getAllStacks = createSelector([\n  getFoundation,\n  getWaste,\n  getTableau\n], (\n  {stacks: foundation},\n  {stacks: waste},\n  {stacks: tableau}\n) => [\n  ...foundation,\n  ...waste,\n  ...tableau\n])\n\nexport function initialize(): ThunkResult<void> {\n  return (dispatch, getState) => {\n    dispatch({type: INITIALIZE})\n\n    const stock = getStock(getState())\n\n    const stock_cards = dispatch(getRandomCards(24))\n\n    const stock_stack_cards = stock_cards.map(card => ({\n      ...card,\n      hidden: true\n    }))\n\n    dispatch(appendCards(stock.stacks[0], stock_stack_cards))\n\n    const tableau = getTableau(getState())\n\n    for (let i = 0; i < tableau.stacks.length; i++) {\n\n      const tableau_cards = dispatch(getRandomCards(i + 1))\n\n      const tableau_stack_cards = tableau_cards.map((card, index) => ({\n        ...card,\n        hidden: index !== i\n      }))\n\n      dispatch(appendCards(tableau.stacks[i], tableau_stack_cards))\n    }\n\n  }\n}\n\nconst selectCard = (stack: Stack, card: StackCard): SelectAction => ({type: SELECT_CARD, card, stack})\n\nconst deselectCard = (): DeselectAction => ({type: DESELECT_CARD})\n\nconst appendCards = (stack: Stack, cards: StackCard[]): AppendCardAction => ({type: APPEND_CARDS, cards, stack})\n\nconst moveCards = (\n  from: Stack,\n  to: Stack,\n  from_card: Card | null = null,\n  index: number | null = null,\n  reverse: Boolean = false,\n  hidden: boolean = false\n): MoveCardAction => {\n\n  if (index == null) {\n    if (from_card == null) { throw new Error('from card reqired when index not provided')}\n    index = from.cards.findIndex(card => !!card.card && card.card === from_card)\n  }\n\n  let cards = from.cards.slice(index)\n  if (reverse) { cards.reverse() }\n\n  return {type: MOVE_CARDS, from, to, cards, hidden}\n}\n\nconst reveal = (stack: Stack): RevealTopCardAction => ({type: REVEAL_TOP, stack})\n\nexport function doubleClick (stack: Stack, stackCard?: StackCard): ThunkResult<void> {\n  return (dispatch, getState) => {\n\n    if (stack.type === StackType.foundation || stack.type === StackType.stock) {\n      return\n    }\n\n    if (stackCard == null) {\n      return\n    }\n\n    const {card} = stackCard\n\n    if (card == null) {\n      return\n    }\n\n    const foundation = getFoundation(getState())\n\n    const foundation_stack =\n      card.value === ValueType.ace\n        ? foundation.stacks.find(stack => stack.cards.length === 0)\n        : foundation.stacks.find(stack => {\n          if (stack.cards.length === 0) { return false }\n          const first = stack.cards[0].card\n          if (first == null) { return false }\n          return first.suit === card.suit\n        })\n\n    if (!foundation_stack) { return }\n    const top_card = get_top_card(foundation_stack)\n\n    if (movable_to_foundation(card, top_card)) {\n\n      dispatch(checkpoint())\n\n      if (stack.type === StackType.waste) {\n        dispatch(incrementScore(5))\n      }\n\n      if (stack.type === StackType.tableau) {\n        dispatch(incrementScore(10))\n      }\n\n      dispatch(moveCards(stack, foundation_stack, card))\n      dispatch(deselectCard())\n    }\n\n  }\n}\n\nexport function clickFoundation (stack: Stack, card?: StackCard): ThunkResult<void> {\n  return (dispatch, getState) => {\n\n    const stacks = getAllStacks(getState())\n    const selection = get_selection(stacks)\n\n    if (!selection) {\n      if (card && card.card) {\n        dispatch(selectCard(stack, card))\n      }\n      return\n    }\n\n    if (card && card.selected) {\n      dispatch(deselectCard())\n      return\n    }\n\n    const top_card = get_top_card(stack)\n    const {card: selected_card, stack: from_stack} = selection\n\n    if (movable_to_foundation(selected_card, top_card)) {\n\n      dispatch(checkpoint())\n\n      if (from_stack.type === StackType.waste) {\n        dispatch(incrementScore(5))\n      }\n\n      if (from_stack.type === StackType.tableau) {\n        dispatch(incrementScore(10))\n      }\n\n      dispatch(moveCards(from_stack, stack, selected_card))\n      dispatch(deselectCard())\n    }\n\n  }\n}\n\nexport function clickWaste (stack: Stack, card?: StackCard): ThunkResult<void> {\n  return (dispatch, getState) => {\n\n    if (!card) { return }\n\n    const stacks = getAllStacks(getState())\n    const selection = get_selection(stacks)\n    const top_card = get_top_card(stack)\n\n    if (card.selected) {\n      dispatch(deselectCard())\n      return\n    }\n\n    if (!selection && top_card === card) {\n      dispatch(selectCard(stack, card))\n    }\n\n  }\n}\n\nexport function clickTableau (stack: Stack, card?: StackCard): ThunkResult<void> {\n  return (dispatch, getState) => {\n\n    const stacks = getAllStacks(getState())\n    const selection = get_selection(stacks)\n    const top_card = get_top_card(stack)\n\n    if (!selection) {\n      if (card && !card.hidden) {\n        dispatch(selectCard(stack, card))\n      } else if (card && top_card && top_card.hidden === true) {\n        dispatch(checkpoint())\n        dispatch(incrementScore(5))\n        dispatch(reveal(stack))\n      }\n      return\n    }\n\n    if (card && card.selected) {\n      dispatch(deselectCard())\n      return\n    }\n\n    const {card: selected_card, stack: from_stack} = selection\n\n    if (card === top_card && movable_to_tableau(selected_card, top_card)) {\n\n      dispatch(checkpoint())\n\n      if (from_stack.type === StackType.waste) {\n        dispatch(incrementScore(10))\n      }\n\n      if (from_stack.type === StackType.foundation) {\n        dispatch(incrementScore(-10))\n      }\n\n      dispatch(moveCards(from_stack, stack, selected_card))\n      dispatch(deselectCard())\n\n    }\n  }\n}\n\nexport function clickStock (): ThunkResult<void> {\n  return (dispatch, getState) => {\n\n    const state = getState()\n    const {stacks: [waste_stack]} = getWaste(state)\n    const {stacks: [stock_stack]} = getStock(state)\n\n    dispatch(checkpoint())\n    dispatch(deselectCard())\n\n    if (stock_stack.cards.length > 0) {\n\n      dispatch(moveCards(stock_stack, waste_stack, null, -3, true, false))\n\n    } else {\n\n      dispatch(moveCards(waste_stack, stock_stack, null, 0, true, true))\n\n    }\n\n  }\n}\n","\nimport {Reducer, Action, AnyAction} from 'redux'\nimport {INITIALIZE} from './actions'\n\nexport type History <State> = {\n  past: State[],\n  present: State,\n  future: State[]\n}\n\nconst UNDO = 'UNDO'\ntype UNDO = typeof UNDO\ntype UndoAction = {type: UNDO}\nexport const undo = (): UndoAction => ({type: UNDO})\n\nconst REDO = 'REDO'\ntype REDO = typeof REDO\ntype RedoAction = {type: REDO}\nexport const redo = (): RedoAction => ({type: REDO})\n\nconst CHECKPOINT = 'CHECKPOINT'\ntype CHECKPOINT = typeof CHECKPOINT\ntype CheckpointAction = {type: CHECKPOINT}\nexport const checkpoint = (): CheckpointAction => ({type: CHECKPOINT})\n\nexport type UndoableActions = UndoAction | RedoAction | CheckpointAction\n\nexport function undoable <S, A extends AnyAction = Action>(reducer: Reducer<S, A>) {\n\n  const initialState: History<S> = {\n    past: [],\n    present: reducer(undefined, {} as A),\n    future: []\n  }\n\n  return function (state = initialState, action: A) {\n    const {past, present, future} = state\n\n    if (action.type === UNDO) {\n      const previous = past[past.length - 1]\n      if (!previous) { return state }\n\n      const newPast = past.slice(0, past.length - 1)\n      return {\n        past: newPast,\n        present: previous,\n        future: [present, ...future]\n      }\n    }\n\n    if (action.type === REDO) {\n      const next = future[0]\n      if (!next) { return state }\n\n      const newFuture = future.slice(1)\n      return {\n        past: [...past, present],\n        present: next,\n        future: newFuture\n      }\n    }\n\n    const newPresent = reducer(present, action)\n\n    if (action.type === INITIALIZE) {\n      return {\n        past: [],\n        present: newPresent,\n        future: []\n      }\n    }\n\n    if (action.type === CHECKPOINT) {\n      return {\n        past: [...past, present],\n        present: newPresent,\n        future: []\n      }\n    }\n\n    if (present === newPresent) {\n      return state\n    }\n\n    return {\n      past,\n      present: newPresent,\n      future\n    }\n  }\n}\n","\nimport {Card} from './Card'\n\nexport type StackCard = {\n  card: Card\n  hidden?: boolean\n  selected?: boolean\n}\n\nexport enum StackDirection {\n  horizontal = 'horizontal',\n  vertical = 'vertical',\n  none = ''\n}\n\nexport enum StackType {\n  tableau = 'tableau',\n  foundation = 'foundation',\n  stock = 'stock',\n  waste = 'waste'\n}\n\nexport type Stack = {\n  cards: StackCard[],\n  selection?: Card,\n  type: StackType\n}\n","\nimport {Card, ValueType} from './Card'\nimport {Stack, StackCard} from './Stack'\n\nexport const random = (min: number, max: number): number => {\n  return Math.floor(Math.random() * max) + min\n}\n\nfunction contains (stack: Stack, card: Card) {\n  return stack.cards.some((item: StackCard) => item.card === card)\n}\n\nexport function get_top_card (stack: Stack): StackCard | null {\n  return stack.cards[stack.cards.length - 1]\n}\n\nexport function get_selection (stacks: Stack[]): {card: Card, stack: Stack} | null {\n  for (let i = 0; i < stacks.length; i++) {\n    const stack = stacks[i]\n    if (stack.selection == null) { continue }\n    return {card: stack.selection, stack}\n  }\n  return null\n}\n\nexport function select_card (stacks: Stack[], stackCard: StackCard): Stack[] {\n  const card = stackCard.card\n  if (card == null) { return stacks }\n  return stacks.map(stack => {\n\n    if (!contains(stack, card)) { return stack }\n\n    return {\n      ...stack,\n      cards: stack.cards.map(stackCard => {\n        if (!stackCard.card) { return stackCard }\n        if (stackCard.card !== card) { return stackCard }\n        return {...stackCard, selected: true}\n      }),\n      selection: card\n    }\n\n  })\n}\n\nexport function deselect_card (stacks: Stack[]): Stack[] {\n  return stacks.map(stack => {\n    if (!stack.selection) { return stack }\n    return {\n      ...stack,\n      selection: void 0,\n      cards: stack.cards.map(card => !card.selected ? card : {...card, selected: void 0})\n    }\n  })\n}\n\nexport function move_cards (stacks: Stack[], from: Stack, to: Stack, cards: StackCard[], hidden: boolean): Stack[] {\n  return stacks.map(stack => {\n    if (stack === to) {\n      return {\n        ...stack,\n        cards: [\n          ...stack.cards,\n          ...cards.map(card => ({ ...card, selected: false, hidden }) )\n        ]\n      }\n    }\n    if (stack === from) {\n      return {\n        ...stack,\n        cards: stack.cards.filter(stackCard => cards.indexOf(stackCard) === -1)\n      }\n    }\n    return stack\n  })\n}\n\nexport function append_cards (stacks: Stack[], to: Stack, cards: StackCard[]) {\n  return stacks.map(stack => {\n    if (stack !== to) {\n      return stack\n    }\n    return {\n      ...stack,\n      cards: [\n        ...stack.cards,\n        ...cards\n      ]\n    }\n  })\n}\n\nexport function movable_to_foundation (card1: Card, card2?: StackCard | null) {\n\n  if (card2 == null) {\n    return card1.value === ValueType.ace\n  }\n\n  const {card} = card2\n  if (!card) { return false }\n\n  return (\n    valueToInt(card1.value) === valueToInt(card.value) + 1 &&\n    card1.suit === card.suit\n  )\n}\n\nexport function movable_to_tableau (card1: Card, card2?: StackCard | null) {\n\n  if (card2 == null) {\n    return card1.value === ValueType.king\n  }\n\n  const {card} = card2\n  if (!card) { return false }\n\n  return (\n    valueToInt(card1.value) + 1 === valueToInt(card.value) &&\n    card1.isRed && card.isBlack || card1.isBlack && card.isRed\n  )\n}\n\nfunction valueToInt (value: ValueType): number {\n  if (value === ValueType.ace) { return 1 }\n  if (value === ValueType.jack) { return 11 }\n  if (value === ValueType.queen) { return 12 }\n  if (value === ValueType.king) { return 13 }\n  return parseInt(value)\n}\n","import {createSelector} from 'reselect'\nimport {StoreState} from './index'\n\nexport const getFoundation = createSelector(\n  (state: StoreState) => state.foundation.present,\n  foundation => foundation\n)\n\nexport const getScore = createSelector(\n  (state: StoreState) => state.score.present,\n  score => score\n)\n\nexport const getStock = createSelector(\n  (state: StoreState) => state.stock.present,\n  stock => stock\n)\n\nexport const getTableau = createSelector(\n  (state: StoreState) => state.tableau.present,\n  tableau => tableau\n)\n\nexport const getWaste = createSelector(\n  (state: StoreState) => state.waste.present,\n  waste => waste\n)\n\nexport const getDeck = createSelector(\n  (state: StoreState) => state.deck.present,\n  deck => deck\n)\n","\nconst WIDTH = 75\nconst HEIGHT = 97\n\nexport enum ValueType {\n  ace = 'A',\n  two = '2',\n  three = '3',\n  four = '4',\n  five = '5',\n  six = '6',\n  seven = '7',\n  eight = '8',\n  nine = '9',\n  ten = '10',\n  jack = 'J',\n  queen = 'Q',\n  king = 'K'\n}\n\nenum SuitType {\n  heart = '\\u2665',\n  diamond = '\\u2666',\n  spade = '\\u2660',\n  club = '\\u2663'\n}\n\ntype Position = {\n  left: number,\n  top: number,\n  rotated: boolean,\n  textAlign: string\n}\n\ntype Drawing = {\n  color: string,\n  cornerFont: string,\n  fontSize: string\n  suitXOffset: number,\n  suitYOffset: number,\n  valueXOffset: number,\n  valueYOffset: number,\n  positions: Position[]\n}\n\nexport type Card = {\n  suit: SuitType,\n  value: ValueType,\n  drawing: Drawing,\n  isRed: boolean,\n  isBlack: boolean\n}\n\nexport const Cards: Card[] = []\nfor (const [, value] of Object.entries(ValueType)) {\n  for (const [, suit] of Object.entries(SuitType)) {\n    Cards.push({\n      suit,\n      value,\n      isRed: [SuitType.diamond, SuitType.heart].indexOf(suit) > -1,\n      isBlack: [SuitType.club, SuitType.spade].indexOf(suit) > -1,\n      drawing: getDrawing(suit, value)\n    })\n  }\n}\n\nfunction getDrawing (suit: SuitType, value: ValueType): Drawing {\n\n  type ypos = 0|1|2|3|4|5|6\n  type xpos = 0|1|2\n\n  const color = [\n    SuitType.diamond,\n    SuitType.heart\n  ].indexOf(suit) > -1 ? 'red' : 'black'\n\n  const fontSize = [\n    ValueType.ace,\n    ValueType.jack,\n    ValueType.queen,\n    ValueType.king\n  ].indexOf(value) > -1 ? '72px' : '20px'\n\n  const pos: {x: xpos, y: ypos}[] = []\n\n  if ([ValueType.ace, ValueType.three, ValueType.five, ValueType.nine, ValueType.jack, ValueType.queen, ValueType.king].indexOf(value) > -1) {\n    pos.push({x: 1, y: 3})\n  }\n\n  if ([ValueType.two, ValueType.three].indexOf(value) > -1) {\n    pos.push({x: 1, y: 0}, {x: 1, y: 6})\n  }\n\n  if ([ValueType.four, ValueType.five, ValueType.six, ValueType.seven, ValueType.eight, ValueType.nine, ValueType.ten].indexOf(value) > -1) {\n    pos.push({x: 0, y: 0}, {x: 2, y: 0}, {x: 0, y: 6}, {x: 2, y: 6})\n  }\n\n  if ([ValueType.six, ValueType.seven, ValueType.eight].indexOf(value) > -1) {\n    pos.push({x: 0, y: 3}, {x: 2, y: 3})\n  }\n\n  if ([ValueType.seven, ValueType.ten, ValueType.eight].indexOf(value) > -1) {\n    pos.push({x: 1, y: 1})\n  }\n\n  if ([ValueType.nine, ValueType.ten].indexOf(value) > -1) {\n    pos.push({x: 0, y: 2}, {x: 2, y: 2}, {x: 0, y: 4}, {x: 2, y: 4})\n  }\n\n  if ([ValueType.ten, ValueType.eight].indexOf(value) > -1) {\n    pos.push({x: 1, y: 5})\n  }\n\n  const getTop = (y: ypos) => {\n    switch (y) {\n      case 0: case 6: return HEIGHT * 0.2\n      case 1: case 5: return HEIGHT * 0.3\n      case 2: case 4: return HEIGHT * 0.4\n      case 3: return HEIGHT * 0.5\n    }\n  }\n\n  const getLeft = (x: xpos) => {\n    switch (x) {\n      case 0: return WIDTH * 0.25\n      case 1: return WIDTH * 0.50\n      case 2: return WIDTH * 0.75\n    }\n  }\n\n  const getTextAlign = (x: xpos) => {\n    switch (x) {\n      case 0: return 'left'\n      case 1: return 'center'\n      case 2: return 'right'\n    }\n  }\n\n  const positions: Position[] = pos.map(({x, y}) => {\n    return {\n      textAlign: getTextAlign(x),\n      rotated: y > 3,\n      left: getLeft(x),\n      top: getTop(y)\n    }\n  })\n\n  return {\n    cornerFont: 'bold 15px sans-serif',\n    valueXOffset: 9,\n    valueYOffset: 2,\n    suitXOffset: 9,\n    suitYOffset: 12,\n    color,\n    fontSize,\n    positions\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"_3hBob\",\"fireworks\":\"XihLW\",\"top\":\"_3awzY\",\"play\":\"_1E68Q\",\"stock\":\"_2EnhJ\",\"waste\":\"_3xl1i\",\"foundation\":\"cOfJ3\",\"tableau\":\"_2j3jz\",\"version\":\"_3qfCP\",\"new-game\":\"_3o9uZ\",\"newGame\":\"_3o9uZ\",\"score\":\"_1xo1P\"};","\nimport {INITIALIZE, GlobalActions} from './actions'\nimport {undoable} from './undoable'\n\nconst INCREMENT_SCORE = 'INCREMENT_SCORE'\ntype INCREMENT_SCORE = typeof INCREMENT_SCORE\n\ntype IncrementAction = {\n  type: INCREMENT_SCORE,\n  score: number\n}\n\nexport function incrementScore (score: number): IncrementAction {\n  return {type: INCREMENT_SCORE, score}\n}\n\nexport type ScoreStore = {\n  score: number\n}\n\nexport type ScoreActions = IncrementAction\n\nconst initialState: ScoreStore = {score: 0}\n\nfunction scoreReducer (\n  state: ScoreStore = initialState,\n  action: IncrementAction | GlobalActions\n): ScoreStore {\n\n  if (action.type === INITIALIZE) {\n    return {score: 0}\n  }\n\n  if (action.type === INCREMENT_SCORE) {\n    return {score: state.score + action.score}\n  }\n\n  return state\n\n}\n\nexport default undoable(scoreReducer)\n","import {Cards} from '../lib/Card'\nimport {GlobalActions, INITIALIZE} from './actions'\nimport {undoable} from './undoable'\nimport {random} from '../lib/util'\nimport {ThunkResult} from '.'\nimport {getDeck} from './selectors'\nimport {StackCard} from '../lib/Stack'\n\nexport type DeckStore = {\n  readonly cards: StackCard[]\n}\n\nconst REMOVE_CARD = 'REMOVE_CARD'\ntype REMOVE_CARD = typeof REMOVE_CARD\ntype RemoveCardAction = {type: REMOVE_CARD, cards: StackCard[]}\nexport const removeCards = (cards: StackCard[]): RemoveCardAction => ({type: REMOVE_CARD, cards})\n\nexport type DeckActions = RemoveCardAction\n\nexport const getRandomCards = (count: Number): ThunkResult<StackCard[]> => {\n  return (dispatch, getState) => {\n\n    const current_deck = getDeck(getState())\n    const deck_cards = [...current_deck.cards]\n    const cards = []\n    for (let i = 0; i < count; i++) {\n      const index = random(0, deck_cards.length - 1)\n      cards.push(...deck_cards.splice(index, 1))\n    }\n\n    dispatch(removeCards(cards))\n    return cards\n  }\n}\n\nconst initialState: DeckStore = {\n  cards: []\n}\n\nfunction deckReducer (\n  state: DeckStore = initialState,\n  action: DeckActions | GlobalActions\n): DeckStore {\n\n  if (action.type === INITIALIZE) {\n    const cards = []\n    for (const card of Cards) {\n      cards.push({card: {...card}})\n    }\n    return {cards}\n  }\n\n  if (action.type === REMOVE_CARD) {\n    return {\n      cards: state.cards.filter(card => action.cards.indexOf(card) === -1)\n    }\n  }\n\n  return state\n}\n\nexport default undoable(deckReducer)\n","\nimport * as React from 'react'\nimport * as ReactDOM from 'react-dom'\nimport * as offline from 'offline-plugin/runtime'\nimport {Provider} from 'react-redux'\nimport configStore from './store'\nimport {initialize} from './redux/actions'\nimport {Container} from './components/Container'\nimport {ThunkDispatch} from './redux'\n\noffline.install({\n  onUpdateReady () { offline.applyUpdate() },\n  onUpdated () { window.location.reload() }\n})\n\nconst store = configStore()\n\n; (store.dispatch as ThunkDispatch)(initialize())\n\nReactDOM.render(\n  <Provider store={store}>\n    <Container />\n  </Provider>,\n  document.getElementById('root')\n)\n","\nimport {createStore, applyMiddleware} from 'redux'\nimport thunk, { ThunkMiddleware } from 'redux-thunk'\nimport {createLogger} from 'redux-logger'\nimport reducer, {StoreState, StoreActions} from './redux'\n\nexport default function configStore (state?: object) {\n\n  const middleware = []\n\n  middleware.push(thunk as ThunkMiddleware<StoreState, StoreActions>)\n\n  if (process.env.NODE_ENV !== 'production') {\n    middleware.push(createLogger())\n  }\n\n  return createStore(\n    reducer,\n    state!,\n    applyMiddleware(...middleware)\n  )\n}\n","\nimport {combineReducers} from 'redux'\nimport {ThunkAction, ThunkDispatch} from 'redux-thunk'\nimport {GlobalActions} from './actions'\nimport tableau, {TableauStore} from './tableau'\nimport foundation, {FoundationStore} from './foundation'\nimport waste, {WasteStore} from './waste'\nimport stock, {StockStore} from './stock'\nimport score, {ScoreStore, ScoreActions} from './score'\nimport deck, {DeckStore, DeckActions} from './deck'\nimport {History, UndoableActions} from './undoable'\n\nexport type StoreActions =\n  GlobalActions |\n  ScoreActions |\n  UndoableActions |\n  DeckActions\n\nexport type StoreState = {\n  deck: History<DeckStore>,\n  tableau: History<TableauStore>,\n  foundation: History<FoundationStore>,\n  waste: History<WasteStore>,\n  stock: History<StockStore>,\n  score: History<ScoreStore>\n}\n\nexport type ThunkResult<R> = ThunkAction<R, StoreState, null, StoreActions>\nexport type ThunkDispatch = ThunkDispatch<StoreState, null, StoreActions>\n\nexport default combineReducers<StoreState, StoreActions>({\n  deck,\n  tableau,\n  foundation,\n  waste,\n  stock,\n  score\n})\n","\nimport {INITIALIZE, GlobalActions, SELECT_CARD, DESELECT_CARD, MOVE_CARDS, REVEAL_TOP, APPEND_CARDS} from './actions'\nimport {Stack, StackType} from '../lib/Stack'\nimport {select_card, deselect_card, move_cards, append_cards} from '../lib/util'\nimport {undoable} from './undoable'\n\nexport type TableauStore = {\n  readonly stacks: Stack[]\n}\n\nconst initialState: TableauStore = {\n  stacks: [\n    {type: StackType.tableau, cards: []},\n    {type: StackType.tableau, cards: []},\n    {type: StackType.tableau, cards: []},\n    {type: StackType.tableau, cards: []},\n    {type: StackType.tableau, cards: []},\n    {type: StackType.tableau, cards: []},\n    {type: StackType.tableau, cards: []}\n  ]\n}\n\nfunction tableauReducer (\n  state: TableauStore = initialState,\n  action: GlobalActions\n): TableauStore {\n\n  if (action.type === INITIALIZE) {\n    return {...initialState}\n  }\n\n  if (action.type === SELECT_CARD && state.stacks.some(stack => stack === action.stack)) {\n    return {...state, stacks: select_card(state.stacks, action.card)}\n  }\n\n  if (action.type === DESELECT_CARD && state.stacks.some(stack => !!stack.selection)) {\n    return {...state, stacks: deselect_card(state.stacks)}\n  }\n\n  if (action.type === MOVE_CARDS && state.stacks.some(stack => [action.from, action.to].indexOf(stack) > -1)) {\n    return {...state, stacks: move_cards(state.stacks, action.from, action.to, action.cards, action.hidden)}\n  }\n\n  if (action.type === APPEND_CARDS && state.stacks.some(stack => action.stack === stack)) {\n    return {...state, stacks: append_cards(state.stacks, action.stack, action.cards)}\n  }\n\n  if (action.type === REVEAL_TOP) {\n    return {\n      ...state,\n      stacks: state.stacks.map(stack => {\n        if (stack !== action.stack) { return stack }\n        return {\n          ...stack,\n          cards: stack.cards.map((card, index) => {\n            if (index < stack.cards.length - 1) { return card }\n            return {...card, hidden: false}\n          })\n        }\n      })\n    }\n  }\n\n\n  return state\n\n}\n\nexport default undoable(tableauReducer)\n","\nimport {INITIALIZE, GlobalActions, SELECT_CARD, DESELECT_CARD, MOVE_CARDS} from './actions'\nimport {Stack, StackType} from '../lib/Stack'\nimport {select_card, deselect_card, move_cards} from '../lib/util'\nimport {undoable} from './undoable'\n\nexport type FoundationStore = {\n  readonly stacks: Stack[]\n}\n\nconst initialState: FoundationStore = {\n  stacks: [\n    {type: StackType.foundation, cards: []},\n    {type: StackType.foundation, cards: []},\n    {type: StackType.foundation, cards: []},\n    {type: StackType.foundation, cards: []}\n  ]\n}\n\nfunction foundationReducer (\n  state: FoundationStore = initialState,\n  action: GlobalActions\n): FoundationStore {\n\n  if (action.type === INITIALIZE) {\n    return {...initialState}\n  }\n\n  if (action.type === SELECT_CARD && state.stacks.some(stack => stack === action.stack)) {\n    return {...state, stacks: select_card(state.stacks, action.card)}\n  }\n\n  if (action.type === DESELECT_CARD && state.stacks.some(stack => !!stack.selection)) {\n    return {...state, stacks: deselect_card(state.stacks)}\n  }\n\n  if (action.type === MOVE_CARDS && state.stacks.some(stack => [action.from, action.to].indexOf(stack) > -1)) {\n    return {...state, stacks: move_cards(state.stacks, action.from, action.to, action.cards, action.hidden)}\n  }\n\n  return state\n\n}\n\nexport default undoable(foundationReducer)\n","\nimport {INITIALIZE, GlobalActions, SELECT_CARD, DESELECT_CARD, MOVE_CARDS, APPEND_CARDS} from './actions'\nimport {select_card, deselect_card, move_cards, append_cards} from '../lib/util'\nimport {Stack, StackType} from '../lib/Stack'\nimport {undoable} from './undoable'\n\nexport type WasteStore = {\n  readonly stacks: Stack[] // this is an array for consistency with other stores\n  readonly showing: number\n}\n\nconst initialState: WasteStore = {stacks: [{type: StackType.waste, cards: []}], showing: 0}\n\nfunction wasteReducer (\n  state: WasteStore = initialState,\n  action: GlobalActions\n): WasteStore {\n\n  if (action.type === INITIALIZE) {\n    return {...initialState}\n  }\n\n  if (action.type === SELECT_CARD && state.stacks.some(stack => stack === action.stack)) {\n    return {...state, stacks: select_card(state.stacks, action.card)}\n  }\n\n  if (action.type === DESELECT_CARD && state.stacks.some(stack => !!stack.selection)) {\n    return {...state, stacks: deselect_card(state.stacks)}\n  }\n\n  if (action.type === MOVE_CARDS && state.stacks.some(stack => [action.from, action.to].indexOf(stack) > -1)) {\n    return {\n      ...state,\n      showing: action.to === state.stacks[0]\n        ? Math.min(state.stacks[0].cards.length + action.cards.length, 3)\n        : Math.max(1, state.showing - 1),\n      stacks: move_cards(state.stacks, action.from, action.to, action.cards, action.hidden)\n    }\n  }\n\n  if (action.type === APPEND_CARDS && state.stacks.some(stack => action.stack === stack)) {\n    return {\n      ...state,\n      showing: action.stack === state.stacks[0]\n        ? Math.min(state.stacks[0].cards.length + action.cards.length, 3)\n        : Math.max(1, state.showing - 1),\n      stacks: append_cards(state.stacks, action.stack, action.cards)\n    }\n  }\n\n  return state\n\n}\n\nexport default undoable(wasteReducer)\n","\nimport {undoable} from './undoable'\nimport {INITIALIZE, GlobalActions, APPEND_CARDS, MOVE_CARDS} from './actions'\nimport {Stack, StackType} from '../lib/Stack'\nimport {append_cards, move_cards} from '../lib/util'\n\nexport type StockStore = {\n  readonly stacks: Stack[]\n}\n\nconst initialState: StockStore = {\n  stacks: [{\n    type: StackType.stock,\n    cards: []\n  }]\n}\n\nfunction stockReducer (\n  state: StockStore = initialState,\n  action: GlobalActions\n): StockStore {\n\n  if (action.type === INITIALIZE) {\n    return {...initialState}\n  }\n\n  if (action.type === MOVE_CARDS && state.stacks.some(stack => [action.from, action.to].indexOf(stack) > -1)) {\n    return {...state, stacks: move_cards(state.stacks, action.from, action.to, action.cards, action.hidden)}\n  }\n\n  if (action.type === APPEND_CARDS && state.stacks.some(stack => action.stack === stack)) {\n    return {...state, stacks: append_cards(state.stacks, action.stack, action.cards)}\n  }\n\n  return state\n\n}\n\nexport default undoable(stockReducer)\n","\nimport * as React from 'react'\nimport {connect} from 'react-redux'\nimport {createSelector} from 'reselect'\nimport {StackComponent} from './Stack'\nimport FireworksComponent from './Fireworks'\nimport {container, top, play, newGame, score, version} from '../../styles/cards.scss'\nimport {StoreState, ThunkDispatch} from '../redux'\nimport {Stack, StackCard, StackType, StackDirection} from '../lib/Stack'\nimport {initialize, clickStock, clickTableau, clickWaste, clickFoundation, doubleClick} from '../redux/actions'\nimport {WasteStore} from '../redux/waste'\nimport {getWaste, getTableau, getFoundation, getStock, getScore} from '../redux/selectors'\nimport {undo, redo} from '../redux/undoable'\nimport {StockStore} from '../redux/stock'\n\ntype ContainerConnectedProps = {\n  tableau: Stack[],\n  foundation: Stack[],\n  stock: StockStore,\n  waste: WasteStore,\n  score: number\n}\n\ntype ContainerActionProps = {\n  handleNewGame: () => void\n  handleStockClick: (stack: Stack, card?: StackCard) => void,\n  handleTableauClick: (stack: Stack, card?: StackCard) => void,\n  handleWasteClick: (stack: Stack, card?: StackCard) => void,\n  handleFoundationClick: (stack: Stack, card?: StackCard) => void,\n  handleDoubleClick: (stack: Stack, card?: StackCard) => void,\n  handleUndo: () => void,\n  handleRedo: () => void\n}\n\ntype ContainerProps = ContainerConnectedProps & ContainerActionProps\n\nclass ContainerComponent extends React.PureComponent<ContainerProps> {\n\n  constructor (props: ContainerProps) {\n    super(props)\n    this.handleNewGameClick = this.handleNewGameClick.bind(this)\n    this.handleStockClick = this.handleStockClick.bind(this)\n    this.handleTableauClick = this.handleTableauClick.bind(this)\n    this.handleWasteClick = this.handleWasteClick.bind(this)\n    this.handleFoundationClick = this.handleFoundationClick.bind(this)\n    this.handleDoubleClick = this.handleDoubleClick.bind(this)\n    this.handleKeyDown = this.handleKeyDown.bind(this)\n  }\n\n  componentDidMount () {\n    document.addEventListener('keydown', this.handleKeyDown)\n  }\n\n  componentWillUnmount () {\n    document.removeEventListener('keydown', this.handleKeyDown)\n  }\n\n  handleNewGameClick () {\n    this.props.handleNewGame()\n  }\n\n  handleKeyDown (e: KeyboardEvent) {\n    if (e.keyCode !== 90) { return }\n    if (e.ctrlKey && e.shiftKey) {\n      this.props.handleRedo()\n    } else if (e.ctrlKey) {\n      this.props.handleUndo()\n    }\n  }\n\n  handleStockClick (stack: Stack, card?: StackCard) {\n    this.props.handleStockClick(stack, card)\n  }\n\n  handleTableauClick (stack: Stack, card?: StackCard) {\n    this.props.handleTableauClick(stack, card)\n  }\n\n  handleWasteClick (stack: Stack, card?: StackCard) {\n    this.props.handleWasteClick(stack, card)\n  }\n\n  handleFoundationClick (stack: Stack, card?: StackCard) {\n    this.props.handleFoundationClick(stack, card)\n  }\n\n  handleDoubleClick (stack: Stack, card?: StackCard) {\n    this.props.handleDoubleClick(stack, card)\n  }\n\n  render () {\n    return (\n      <div className={container}>\n        <FireworksComponent/>\n        <div>\n          <button id=\"new-game\" className={newGame} onClick={this.handleNewGameClick}>\n            {'New Game'}\n          </button>\n          <label id=\"score\" className={score}>\n            {'Score: '}\n            {this.props.score}\n          </label>\n        </div>\n        <div className={top}>\n          <StackComponent\n            stack={this.props.stock.stacks[0]}\n            onClick={this.handleStockClick}\n            direction={StackDirection.none}\n            type={StackType.stock}\n            hidden={true}\n            max={1}\n          />\n          <StackComponent\n            stack={this.props.waste.stacks[0]}\n            onClick={this.handleWasteClick}\n            onDoubleClick={this.handleDoubleClick}\n            direction={StackDirection.horizontal}\n            type={StackType.waste}\n            hidden={false}\n            max={this.props.waste.showing}\n            offset={15}\n          />\n          {this.props.foundation.map((stack, index) => (\n            <StackComponent\n              key={`foundation-${index}`}\n              onClick={this.handleFoundationClick}\n              stack={stack}\n              direction={StackDirection.none}\n              type={StackType.foundation}\n              max={1}\n            />\n          ))}\n        </div>\n        <div className={play}>\n          {this.props.tableau.map((stack, index) => (\n            <StackComponent\n              key={`tableau-${index}`}\n              onClick={this.handleTableauClick}\n              onDoubleClick={this.handleDoubleClick}\n              stack={stack}\n              direction={StackDirection.vertical}\n              type={StackType.tableau}\n            />\n          ))}\n        </div>\n        <div className={version}>\n          {process.env.version}\n        </div>\n      </div>\n    )\n  }\n}\n\nconst selector = createSelector([\n  getTableau,\n  getFoundation,\n  getStock,\n  getWaste,\n  getScore\n], (\n  {stacks: tableau},\n  {stacks: foundation},\n  stock,\n  waste,\n  {score}\n) => ({\n  tableau,\n  foundation,\n  stock,\n  waste,\n  score\n}))\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch): ContainerActionProps => ({\n  handleNewGame: () => dispatch(initialize()),\n  handleStockClick: () => dispatch(clickStock()),\n  handleTableauClick: (stack, card) => dispatch(clickTableau(stack, card)),\n  handleWasteClick: (stack, card) => dispatch(clickWaste(stack, card)),\n  handleFoundationClick: (stack, card) => dispatch(clickFoundation(stack, card)),\n  handleDoubleClick: (stack, card) => dispatch(doubleClick(stack, card)),\n  handleUndo: () => dispatch(undo()),\n  handleRedo: () => dispatch(redo())\n})\n\nconst mapStateToProps = (state: StoreState): ContainerConnectedProps => selector(state)\n\nexport const Container = connect(mapStateToProps, mapDispatchToProps)(ContainerComponent)\n","\nimport * as React from 'react'\nimport {stock, waste, tableau, foundation} from '../../styles/cards.scss'\nimport {Stack, StackCard, StackType, StackDirection} from '../lib/Stack'\n\ntype CardClickEvent = (stack: Stack, card: StackCard) => void\n\ntype StackOwnProps = {\n  type: StackType,\n  direction: StackDirection,\n  children?: React.ReactNode,\n  stack: Stack,\n  onClick?: CardClickEvent,\n  onDoubleClick?: CardClickEvent\n  max: number,\n  hidden: boolean,\n  width: number,\n  height: number,\n  offset: number,\n  radius: number\n}\n\ntype StackConnectedProps = {\n}\n\ntype StackProps = StackOwnProps & StackConnectedProps\n\ntype Point = {\n  x: number\n  y: number\n}\n\nexport class StackComponent extends React.PureComponent<StackProps> {\n\n  static defaultProps = {\n    max: Infinity,\n    hidden: false,\n    width: 74,\n    height: 97,\n    offset: 20,\n    radius: 10\n  }\n\n  private ref = React.createRef<HTMLCanvasElement>()\n\n  constructor (props: StackProps) {\n    super(props)\n    this.handleCanvasClick = this.handleCanvasClick.bind(this)\n    this.handleCanvasDoubleClick = this.handleCanvasDoubleClick.bind(this)\n  }\n\n  get stack_style(): string {\n    switch (this.props.type) {\n      case StackType.foundation: return foundation\n      case StackType.tableau: return tableau\n      case StackType.stock: return stock\n      case StackType.waste: return waste\n    }\n  }\n\n  get canvas_width () {\n    switch (this.props.direction) {\n      case StackDirection.none:\n      case StackDirection.vertical:\n        return this.props.width\n      case StackDirection.horizontal:\n        return this.cards.length === 0\n          ? this.props.height\n          : (this.props.offset * (this.cards.length - 1) + this.props.width)\n    }\n  }\n\n  get canvas_height () {\n    switch (this.props.direction) {\n      case StackDirection.none:\n      case StackDirection.horizontal:\n        return this.props.height\n      case StackDirection.vertical:\n        return this.cards.length === 0\n          ? this.props.height\n          : this.props.offset * (this.cards.length - 1) + this.props.height\n    }\n  }\n\n  get cards () {\n    return this.props.stack.cards.slice(-this.props.max)\n  }\n\n  handleCanvasDoubleClick (evt: React.MouseEvent<Element>) {\n    const {cards} = this\n    const {stack, offset, direction, onDoubleClick} = this.props\n    const {nativeEvent: e} = evt\n    if (!onDoubleClick) { return }\n\n    const prop = direction === StackDirection.horizontal ? 'offsetX' : 'offsetY'\n    const index = Math.min(cards.length - 1, Math.floor(e[prop] / offset))\n    onDoubleClick(stack, cards[index])\n  }\n\n  handleCanvasClick (evt: React.MouseEvent<Element>) {\n    const {cards} = this\n    const {stack, offset, direction, onClick} = this.props\n    const {nativeEvent: e} = evt\n    if (!onClick) { return }\n\n    const prop = direction === StackDirection.horizontal ? 'offsetX' : 'offsetY'\n    const index = Math.min(cards.length - 1, Math.floor(e[prop] / offset))\n    onClick(stack, cards[index])\n  }\n\n  componentDidMount () {\n    this.updateCanvas()\n  }\n\n  componentDidUpdate () {\n    this.updateCanvas()\n  }\n\n  updateCanvas () {\n    const canvas = this.ref.current\n    if (!canvas) { return }\n\n    const ctx = canvas.getContext('2d')\n    if (!ctx) { return }\n\n    const {cards} = this\n    const {direction, offset} = this.props\n\n    ctx.save()\n    ctx.translate(0.5, 0.5)\n    ctx.clearRect(0, 0, canvas.width, canvas.height)\n\n    if (cards.length === 0) {\n      this.drawBoxRadius(ctx, {x: 0, y: 0})\n      ctx.stroke()\n    }\n\n    for (let i = 0; i < cards.length; i++) {\n      const x = direction === StackDirection.horizontal ? i * offset : 0\n      const y = direction === StackDirection.horizontal ? 0 : i * offset\n\n      if (i < cards.length - 1) {\n        ctx.save()\n        this.drawClipRegion(ctx, {x, y})\n      }\n\n      this.drawCard(ctx, cards[i], {x, y})\n\n      if (i < cards.length - 1) {\n        ctx.restore()\n      }\n    }\n    ctx.restore()\n  }\n\n  drawClipRegion (ctx: CanvasRenderingContext2D, {x, y}: Point) {\n\n    const {direction, radius, offset, width, height} = this.props\n    const clip_width = direction === StackDirection.horizontal ? offset : width\n    const clip_height = direction === StackDirection.horizontal ? height : offset\n\n    ctx.beginPath()\n    if (direction === StackDirection.horizontal) {\n      ctx.moveTo(x, y)\n      ctx.lineTo(x + clip_width + radius, y)\n      ctx.quadraticCurveTo(x + clip_width, y, x + clip_width, y + radius)\n      ctx.lineTo(x + clip_width, y + clip_height - radius)\n      ctx.quadraticCurveTo(x + clip_width, y + clip_height, x + clip_width + radius, y + clip_height)\n      ctx.lineTo(x, y + clip_height)\n    } else {\n      ctx.moveTo(x + clip_width, y)\n      ctx.lineTo(x + clip_width, y + clip_height + radius)\n      ctx.quadraticCurveTo(x + clip_width, y + clip_height, x + clip_width - radius, y + clip_height)\n      ctx.lineTo(x + radius, y + clip_height)\n      ctx.quadraticCurveTo(x, y + clip_height, x, y + clip_height + radius)\n      ctx.lineTo(x, y)\n    }\n    ctx.closePath()\n    ctx.clip()\n  }\n\n  drawBoxRadius (ctx: CanvasRenderingContext2D, {x, y}: Point) {\n    const {radius, height, width} = this.props\n    ctx.beginPath()\n    ctx.moveTo(x + radius, y)\n    ctx.lineTo(x + width - radius, y)\n    ctx.quadraticCurveTo(x + width, y, x + width, y + radius)\n    ctx.lineTo(x + width, y + height - radius)\n    ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height)\n    ctx.lineTo(x + radius, y + height)\n    ctx.quadraticCurveTo(x, y + height, x, y + height - radius)\n    ctx.lineTo(x, y + radius)\n    ctx.quadraticCurveTo(x, y, x + radius, y)\n    ctx.closePath()\n  }\n\n  drawCard (ctx: CanvasRenderingContext2D, stack_card: StackCard, {x, y}: Point) {\n\n    const {card, hidden, selected} = stack_card\n\n    this.drawBoxRadius(ctx, {x, y})\n    ctx.stroke()\n\n    if (hidden) {\n      ctx.fillStyle = '#0aa'\n      ctx.fill()\n      return\n    }\n\n    if (selected) {\n      ctx.fillStyle = 'yellow'\n      ctx.fill()\n    }\n\n    const {value, suit, drawing} = card\n\n    ctx.fillStyle = drawing.color\n    ctx.textAlign = 'center'\n    ctx.textBaseline = 'top'\n\n    ctx.font = drawing.cornerFont\n    ctx.fillText(value, drawing.valueXOffset + x, drawing.valueYOffset + y, 12)\n    ctx.fillText(suit, drawing.suitXOffset + x, drawing.suitYOffset + y)\n\n    ctx.save()\n    ctx.translate(this.props.width, this.props.height)\n    ctx.rotate(Math.PI)\n    ctx.fillText(value, drawing.valueXOffset - x, drawing.valueYOffset - y, 12)\n    ctx.fillText(suit, drawing.suitXOffset - x, drawing.suitYOffset - y)\n    ctx.restore()\n\n    ctx.textBaseline = 'middle'\n\n    for (const pos of drawing.positions) {\n      const factor = pos.rotated ? -1 : 1\n      ctx.textAlign = pos.textAlign\n\n      if (pos.rotated) {\n        ctx.save()\n        ctx.translate(this.props.width, this.props.height)\n        ctx.rotate(Math.PI)\n      }\n\n      ctx.font = `${drawing.fontSize} sans-serif`\n      ctx.fillText(suit, pos.left + x * factor, pos.top + y * factor)\n\n      if (pos.rotated) {\n        ctx.restore()\n      }\n    }\n  }\n\n  render () {\n    return (\n      <canvas\n        onDoubleClick={this.handleCanvasDoubleClick}\n        onClick={this.handleCanvasClick}\n        className={this.stack_style}\n        width={this.canvas_width + 1}\n        height={this.canvas_height + 1}\n        ref={this.ref}\n      />\n    )\n  }\n}\n","\nimport * as React from 'react'\nimport {connect} from 'react-redux'\nimport {createSelector} from 'reselect'\nimport * as FireworksCanvas from 'fireworks-canvas'\n\nimport {fireworks} from '../../styles/cards.scss'\nimport {StoreState} from '../redux'\nimport {getFoundation} from '../redux/selectors'\n\ntype FireworksConnectedProps = {\n  active: boolean\n}\n\ntype FireworksProps = FireworksConnectedProps\n\nclass Fireworks extends React.PureComponent<FireworksProps> {\n\n  ref: React.RefObject<HTMLDivElement>\n  fireworks: FireworksCanvas\n\n  constructor (props: FireworksProps) {\n    super(props)\n    this.ref = React.createRef()\n    this.handleDocumentKeyDown = this.handleDocumentKeyDown.bind(this)\n  }\n\n  handleDocumentKeyDown (ev: KeyboardEvent) {\n    if (ev.keyCode === 27) { this.fireworks.stop() }\n  }\n\n  componentDidMount () {\n    if (!this.ref.current) { return null}\n    this.fireworks = new FireworksCanvas(this.ref.current)\n  }\n\n  componentDidUpdate () {\n    if (this.props.active) {\n      document.addEventListener('keydown', this.handleDocumentKeyDown)\n      this.fireworks.start()\n    } else {\n      document.removeEventListener('keydown', this.handleDocumentKeyDown)\n      this.fireworks.kill()\n    }\n  }\n\n  componentWillUnmount () {\n    this.fireworks.destroy()\n  }\n\n  render () {\n    return (\n      <div className={fireworks} ref={this.ref} />\n    )\n  }\n\n}\n\nconst selector = createSelector([getFoundation], ({stacks: foundation}) => ({\n  active: foundation.every(stack => stack.cards.length === 13)\n}))\n\nconst mapStateToProps = (state: StoreState): FireworksConnectedProps => selector(state)\n\nexport default connect(mapStateToProps)(Fireworks)\n"],"sourceRoot":""}