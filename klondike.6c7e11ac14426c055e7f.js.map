{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/ts/redux/globals.ts","webpack:///./src/ts/redux/undoable.ts","webpack:///./src/ts/lib/Stack.ts","webpack:///./src/ts/lib/util.ts","webpack:///./src/ts/redux/selectors.ts","webpack:///./src/ts/lib/Card.ts","webpack:///./src/styles/cards.scss","webpack:///./src/ts/redux/stock.ts","webpack:///./src/ts/redux/score.ts","webpack:///./src/ts/lib/persist.ts","webpack:///./src/ts/redux/deck.ts","webpack:///./src/ts/redux/actions.ts","webpack:///./src/ts/index.tsx","webpack:///./src/ts/store.ts","webpack:///./src/ts/redux/index.ts","webpack:///./src/ts/redux/tableau.ts","webpack:///./src/ts/redux/foundation.ts","webpack:///./src/ts/redux/waste.ts","webpack:///./src/ts/components/Container.tsx","webpack:///./src/ts/components/Stack.tsx","webpack:///./src/ts/components/Fireworks.tsx"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","ScoringType","ScoreType","INITIALIZE","SELECT_CARD","DESELECT_CARD","MOVE_CARDS","REVEAL_TOP","APPEND_CARDS","CHANGE_SCORE_TYPE","UNDO","undo","type","REDO","redo","CHECKPOINT","checkpoint","reducer","initialState","past","present","undefined","future","state","action","previous","next","newFuture","newPresent","StackDirection","StackType","valueToInt","ValueType","ace","jack","queen","king","parseInt","random","min","max","Math","floor","stack","cards","stacks","selection","card","stackCard","map","some","item","contains","selected","from","to","hidden","filter","indexOf","card1","card2","suit","isRed","isBlack","getFoundation","createSelector","foundation","getScore","score","getStock","stock","getTableau","tableau","getWaste","waste","getDeck","deck","getAllStacks","WIDTH","HEIGHT","SuitType","Cards","entries","diamond","heart","club","spade","drawing","getDrawing","color","fontSize","pos","three","five","nine","x","y","two","four","six","seven","eight","ten","getTop","getLeft","getTextAlign","cornerFont","valueXOffset","valueYOffset","suitXOffset","suitYOffset","positions","textAlign","rotated","left","top","DECREMENT_DRAWS","decrementDraws","drawsLeft","Infinity","undoable","scoringType","vegas","move_cards","append_cards","INCREMENT_SCORE","scoreType","getSavedScore","regular","oldScore","tableauToFoundation","wasteToFoundation","revealCard","wasteToTableau","foundationToTableau","localStorage","setItem","toString","err","getItem","parsed","Number","isNaN","REMOVE_CARD","removeCards","getRandomCards","count","dispatch","getState","deck_cards","index","newScoringType","stock_stack_cards","appendCards","tableau_stack_cards","selectCard","deselectCard","moveCards","from_card","reverse","Error","findIndex","reveal","foundation_stack","find","first","top_card","get_top_card","movable_to_foundation","incrementScore","get_selection","selected_card","from_stack","movable_to_tableau","waste_stack","stock_stack","offline","install","applyUpdate","location","reload","store","initialize","ReactDOM","render","Provider","Container","document","getElementById","middleware","createStore","applyMiddleware","saveScore","combineReducers","select_card","deselect_card","showing","selector","connect","handleNewGame","handleSwitchGameType","newGameType","handleStockClick","clickStock","handleTableauClick","clickTableau","handleWasteClick","clickWaste","handleFoundationClick","clickFoundation","handleDoubleClick","doubleClick","handleUndo","handleRedo","React","PureComponent","props","super","this","handleNewGameClick","handleKeyDown","handleSwitchGameTypeClick","addEventListener","removeEventListener","otherGameType","e","keyCode","ctrlKey","shiftKey","className","container","id","newGame","onClick","switchScoreType","StackComponent","direction","none","onDoubleClick","horizontal","offset","play","vertical","version","ref","createRef","handleCanvasClick","handleCanvasDoubleClick","width","height","evt","nativeEvent","prop","updateCanvas","canvas","current","ctx","getContext","save","translate","clearRect","drawBoxRadius","stroke","font","fillStyle","textBaseline","fillText","restore","drawClipRegion","drawCard","radius","clip_width","clip_height","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","clip","stack_card","fill","rotate","PI","factor","stack_style","canvas_width","canvas_height","defaultProps","active","every","handleDocumentKeyDown","ev","fireworks","stop","FireworksCanvas","start","kill","destroy","display","style"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAKlC,IAFGe,GAAqBA,EAAoBhB,GAEtCO,EAASC,QACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrBiB,EAAG,GAGAZ,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU8B,QAGnC,IAAIC,EAASH,EAAiB5B,GAAY,CACzCK,EAAGL,EACHgC,GAAG,EACHF,QAAS,IAUV,OANAhB,EAAQd,GAAUW,KAAKoB,EAAOD,QAASC,EAAQA,EAAOD,QAASJ,GAG/DK,EAAOC,GAAI,EAGJD,EAAOD,QAKfJ,EAAoBO,EAAInB,EAGxBY,EAAoBQ,EAAIN,EAGxBF,EAAoBS,EAAI,SAASL,EAASM,EAAMC,GAC3CX,EAAoBY,EAAER,EAASM,IAClC5B,OAAO+B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEX,EAAoBgB,EAAI,SAASZ,GACX,oBAAXa,QAA0BA,OAAOC,aAC1CpC,OAAO+B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DrC,OAAO+B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKzC,OAAO0C,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBzC,OAAO+B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBS,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAL,EAAoBS,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRX,EAAoBY,EAAI,SAASgB,EAAQC,GAAY,OAAO/C,OAAOC,UAAUC,eAAeC,KAAK2C,EAAQC,IAGzG7B,EAAoB8B,EAAI,GAExB,IAAIC,EAAaC,OAAqB,aAAIA,OAAqB,cAAK,GAChEC,EAAmBF,EAAW5C,KAAKuC,KAAKK,GAC5CA,EAAW5C,KAAOf,EAClB2D,EAAaA,EAAWG,QACxB,IAAI,IAAIvD,EAAI,EAAGA,EAAIoD,EAAWlD,OAAQF,IAAKP,EAAqB2D,EAAWpD,IAC3E,IAAIU,EAAsB4C,EAI1B1C,EAAgBJ,KAAK,CAAC,GAAG,IAElBM,I,iFCrJT,SAAY0C,GACV,qBACA,yBAFF,CAAY,EAAAA,cAAA,EAAAA,YAAW,KAKvB,SAAYC,GACV,uCACA,6CACA,iDACA,+BACA,iDALF,CAAY,EAAAA,YAAA,EAAAA,UAAS,KAQR,EAAAC,WAAa,aAIb,EAAAC,YAAc,cAId,EAAAC,cAAgB,gBAIhB,EAAAC,WAAa,aAUb,EAAAC,WAAa,aAIb,EAAAC,aAAe,eAQf,EAAAC,kBAAoB,qB,+EChDjC,aAQMC,EAAO,OAGA,EAAAC,KAAO,KAAkB,CAAGC,KAAMF,IAE/C,MAAMG,EAAO,OAGA,EAAAC,KAAO,KAAkB,CAAGF,KAAMC,IAE/C,MAAME,EAAa,aAGN,EAAAC,WAAa,KAAwB,CAAGJ,KAAMG,IAI3D,oBACEE,GAEA,MAAMC,EAA2B,CAC/BC,KAAM,GACNC,QAASH,OAAQI,EAAW,IAC5BC,OAAQ,IAGV,OAAO,SAASC,EAAQL,EAAcM,GACpC,MAAM,KAAEL,EAAI,QAAEC,EAAO,OAAEE,GAAWC,EAElC,GAAIC,EAAOZ,OAASF,EAAM,CACxB,MAAMe,EAAWN,EAAKA,EAAKxE,OAAS,GACpC,OAAK8E,EAKE,CACLN,KAFcA,EAAKnB,MAAM,EAAGmB,EAAKxE,OAAS,GAG1CyE,QAASK,EACTH,OAAQ,CAACF,KAAYE,IAPdC,EAWX,GAAIC,EAAOZ,OAASC,EAAM,CACxB,MAAMa,EAAOJ,EAAO,GACpB,IAAKI,EACH,OAAOH,EAGT,MAAMI,EAAYL,EAAOtB,MAAM,GAC/B,MAAO,CACLmB,KAAM,IAAIA,EAAMC,GAChBA,QAASM,EACTJ,OAAQK,GAIZ,MAAMC,EAAaX,EAAQG,EAASI,GAEpC,OAAIA,EAAOZ,OAAS,EAAAT,WACX,CACLgB,KAAM,GACNC,QAASQ,EACTN,OAAQ,IAIRE,EAAOZ,OAASG,EACX,CACLI,KAAM,IAAIA,EAAMC,GAChBA,QAASQ,EACTN,OAAQ,IAIRF,IAAYQ,EACPL,EAGF,CACLJ,OACAC,QAASQ,EACTN,a,8ECnFN,SAAYO,GACV,0BACA,sBACA,UAHF,CAAY,EAAAA,iBAAA,EAAAA,eAAc,KAM1B,SAAYC,GACV,oBACA,0BACA,gBACA,gBAJF,CAAY,EAAAA,YAAA,EAAAA,UAAS,M,+ECdrB,cA8IA,SAASC,EAAW9C,GAClB,OAAIA,IAAU,EAAA+C,UAAUC,IACf,EAELhD,IAAU,EAAA+C,UAAUE,KACf,GAELjD,IAAU,EAAA+C,UAAUG,MACf,GAELlD,IAAU,EAAA+C,UAAUI,KACf,GAEFC,SAASpD,GAxJL,EAAAqD,OAAS,CAACC,EAAaC,IAC3BC,KAAKC,MAAMD,KAAKH,SAAWE,GAAOD,EAO3C,wBAA6BI,GAC3B,OAAOA,EAAMC,MAAMD,EAAMC,MAAMjG,OAAS,IAG1C,yBACEkG,GAEA,IAAK,IAAIpG,EAAI,EAAGA,EAAIoG,EAAOlG,OAAQF,IAAK,CACtC,MAAMkG,EAAQE,EAAOpG,GACrB,GAAuB,MAAnBkG,EAAMG,UAGV,MAAO,CAAEC,KAAMJ,EAAMG,UAAWH,SAElC,OAAO,MAGT,uBAA4BE,EAAiBG,GAC3C,MAAMD,EAAOC,EAAUD,KACvB,OAAY,MAARA,EACKF,EAEFA,EAAOI,IAAIN,IA1BpB,SAAkBA,EAAcI,GAC9B,OAAOJ,EAAMC,MAAMM,KAAMC,GAAoBA,EAAKJ,OAASA,IA0BpDK,CAAST,EAAOI,GAId,OAAP,wBACKJ,GAAK,CACRC,MAAOD,EAAMC,MAAMK,IAAID,GAChBA,EAAUD,KAGXC,EAAUD,OAASA,EACdC,EAEF,OAAP,wBAAYA,GAAS,CAAEK,UAAU,IALxBL,GAOXF,UAAWC,IAdJJ,IAmBb,yBAA8BE,GAC5B,OAAOA,EAAOI,IAAIN,GACXA,EAAMG,UAGJ,OAAP,wBACKH,GAAK,CACRG,eAAW,EACXF,MAAOD,EAAMC,MAAMK,IAAIF,GACpBA,EAAKM,SAAkB,OAAD,wBAAMN,GAAI,CAAEM,cAAU,IAA5BN,KANZJ,IAYb,sBACEE,EACAS,EACAC,EACAX,EACAY,GAEA,OAAOX,EAAOI,IAAIN,GACZA,IAAUY,EACL,OAAP,wBACKZ,GAAK,CACRC,MAAO,IACFD,EAAMC,SACNA,EAAMK,IAAIF,GAAS,OAAD,wBAAMA,GAAI,CAAEM,UAAU,EAAOG,eAIpDb,IAAUW,EACL,OAAP,wBACKX,GAAK,CACRC,MAAOD,EAAMC,MAAMa,OAAOT,IAA2C,IAA9BJ,EAAMc,QAAQV,MAGlDL,IAIX,wBAA6BE,EAAiBU,EAAWX,GACvD,OAAOC,EAAOI,IAAIN,GACZA,IAAUY,EACLZ,EAEF,OAAP,wBACKA,GAAK,CACRC,MAAO,IAAID,EAAMC,SAAUA,OAKjC,iCAAsCe,EAAaC,GACjD,GAAa,MAATA,EACF,OAAOD,EAAM1E,QAAU,EAAA+C,UAAUC,IAGnC,MAAM,KAAEc,GAASa,EACjB,QAAKb,IAKHhB,EAAW4B,EAAM1E,SAAW8C,EAAWgB,EAAK9D,OAAS,GACrD0E,EAAME,OAASd,EAAKc,OAIxB,8BAAmCF,EAAaC,GAC9C,GAAa,MAATA,EACF,OAAOD,EAAM1E,QAAU,EAAA+C,UAAUI,KAGnC,MAAM,KAAEW,GAASa,EACjB,QAAKb,IAKFhB,EAAW4B,EAAM1E,OAAS,IAAM8C,EAAWgB,EAAK9D,QAC/C0E,EAAMG,OACNf,EAAKgB,SACNJ,EAAMI,SAAWhB,EAAKe,S,8EC1I3B,cAGa,EAAAE,cAAgB,EAAAC,eAC1B1C,GAAsBA,EAAM2C,WAAW9C,QACxC8C,GAAcA,GAGH,EAAAC,SAAW,EAAAF,eACrB1C,GAAsBA,EAAM6C,MAAMhD,QACnCgD,GAASA,GAGE,EAAAC,SAAW,EAAAJ,eACrB1C,GAAsBA,EAAM+C,MAAMlD,QACnCkD,GAASA,GAGE,EAAAC,WAAa,EAAAN,eACvB1C,GAAsBA,EAAMiD,QAAQpD,QACrCoD,GAAWA,GAGA,EAAAC,SAAW,EAAAR,eACrB1C,GAAsBA,EAAMmD,MAAMtD,QACnCsD,GAASA,GAGE,EAAAC,QAAU,EAAAV,eACpB1C,GAAsBA,EAAMqD,KAAKxD,QAClCwD,GAAQA,GAGG,EAAAC,aAAe,EAAAZ,eAC1B,CAAC,EAAAD,cAAe,EAAAS,SAAU,EAAAF,YAC1B,EAAG1B,OAAQqB,IAAgBrB,OAAQ6B,IAAW7B,OAAQ2B,KAAc,IAC/DN,KACAQ,KACAF,K,gFCtCP,MAAMM,EAAQ,GACRC,EAAS,GAEf,IAAY/C,EAgBPgD,GAhBL,SAAYhD,GACV,UACA,UACA,YACA,WACA,WACA,UACA,YACA,YACA,WACA,WACA,WACA,YACA,WAbF,CAAYA,EAAA,EAAAA,YAAA,EAAAA,UAAS,KAgBrB,SAAKgD,GACH,YACA,cACA,YACA,WAJF,CAAKA,MAAQ,KAiCA,EAAAC,MAAgB,GAC7B,IAAK,MAAO,CAAEhG,KAAUrC,OAAOsI,QAAQlD,GACrC,IAAK,MAAO,CAAE6B,KAASjH,OAAOsI,QAAQF,GACpC,EAAAC,MAAMhI,KAAK,CACT4G,OACA5E,QACA6E,MAAO,CAACkB,EAASG,QAASH,EAASI,OAAO1B,QAAQG,IAAS,EAC3DE,QAAS,CAACiB,EAASK,KAAML,EAASM,OAAO5B,QAAQG,IAAS,EAC1D0B,QAASC,EAAW3B,EAAM5E,KAKhC,SAASuG,EAAW3B,EAAgB5E,GAIlC,MAAMwG,EACJ,CAACT,EAASG,QAASH,EAASI,OAAO1B,QAAQG,IAAS,EAAI,MAAQ,QAE5D6B,EACJ,CAAC1D,EAAUC,IAAKD,EAAUE,KAAMF,EAAUG,MAAOH,EAAUI,MAAMsB,QAC/DzE,IACG,EACD,OACA,OAEA0G,EAA8B,GAGlC,CACE3D,EAAUC,IACVD,EAAU4D,MACV5D,EAAU6D,KACV7D,EAAU8D,KACV9D,EAAUE,KACVF,EAAUG,MACVH,EAAUI,MACVsB,QAAQzE,IAAU,GAEpB0G,EAAI1I,KAAK,CAAE8I,EAAG,EAAGC,EAAG,IAGlB,CAAChE,EAAUiE,IAAKjE,EAAU4D,OAAOlC,QAAQzE,IAAU,GACrD0G,EAAI1I,KAAK,CAAE8I,EAAG,EAAGC,EAAG,GAAK,CAAED,EAAG,EAAGC,EAAG,IAIpC,CACEhE,EAAUkE,KACVlE,EAAU6D,KACV7D,EAAUmE,IACVnE,EAAUoE,MACVpE,EAAUqE,MACVrE,EAAU8D,KACV9D,EAAUsE,KACV5C,QAAQzE,IAAU,GAEpB0G,EAAI1I,KAAK,CAAE8I,EAAG,EAAGC,EAAG,GAAK,CAAED,EAAG,EAAGC,EAAG,GAAK,CAAED,EAAG,EAAGC,EAAG,GAAK,CAAED,EAAG,EAAGC,EAAG,IAGlE,CAAChE,EAAUmE,IAAKnE,EAAUoE,MAAOpE,EAAUqE,OAAO3C,QAAQzE,IAAU,GACtE0G,EAAI1I,KAAK,CAAE8I,EAAG,EAAGC,EAAG,GAAK,CAAED,EAAG,EAAGC,EAAG,IAGlC,CAAChE,EAAUoE,MAAOpE,EAAUsE,IAAKtE,EAAUqE,OAAO3C,QAAQzE,IAAU,GACtE0G,EAAI1I,KAAK,CAAE8I,EAAG,EAAGC,EAAG,IAGlB,CAAChE,EAAU8D,KAAM9D,EAAUsE,KAAK5C,QAAQzE,IAAU,GACpD0G,EAAI1I,KAAK,CAAE8I,EAAG,EAAGC,EAAG,GAAK,CAAED,EAAG,EAAGC,EAAG,GAAK,CAAED,EAAG,EAAGC,EAAG,GAAK,CAAED,EAAG,EAAGC,EAAG,IAGlE,CAAChE,EAAUsE,IAAKtE,EAAUqE,OAAO3C,QAAQzE,IAAU,GACrD0G,EAAI1I,KAAK,CAAE8I,EAAG,EAAGC,EAAG,IAGtB,MAAMO,EAAUP,IACd,OAAQA,GACN,KAAK,EACL,KAAK,EACH,MAAgB,GAATjB,EACT,KAAK,EACL,KAAK,EACH,MAAgB,GAATA,EACT,KAAK,EACL,KAAK,EACH,MAAgB,GAATA,EACT,KAAK,EACH,MAAgB,GAATA,IAIPyB,EAAWT,IACf,OAAQA,GACN,KAAK,EACH,MAAe,IAARjB,EACT,KAAK,EACH,MAAe,GAARA,EACT,KAAK,EACH,MAAe,IAARA,IAIP2B,EAAgBV,IACpB,OAAQA,GACN,KAAK,EACH,MAAO,OACT,KAAK,EACH,MAAO,SACT,KAAK,EACH,MAAO,UAab,MAAO,CACLW,WAAY,uBACZC,aAAc,EACdC,aAAc,EACdC,YAAa,EACbC,YAAa,GACbrB,QACAC,WACAqB,UAjB4BpB,EAAI1C,IAAI,EAAG8C,IAAGC,QACnC,CACLgB,UAAWP,EAAaV,GACxBkB,QAASjB,EAAI,EACbkB,KAAMV,EAAQT,GACdoB,IAAKZ,EAAOP,S,iBC3KlB7H,EAAOD,QAAU,CAAC,UAAY,SAAS,UAAY,SAAS,IAAM,QAAQ,KAAO,SAAS,MAAQ,SAAS,MAAQ,SAAS,WAAa,QAAQ,QAAU,SAAS,QAAU,SAAS,WAAW,SAAS,QAAU,SAAS,oBAAoB,SAAS,gBAAkB,SAAS,MAAQ,W,oFCD9R,aACA,OACA,OACA,OAQMkJ,EAAkB,kBAGX,EAAAC,eAAiB,KAA4B,CACxDzG,KAAMwG,IAUR,MAAMlG,EAA2B,CAC/BoG,UAAWC,IACX1E,OAAQ,CACN,CACEjC,KAAM,EAAAkB,UAAUwC,MAChB1B,MAAO,MAoDb,UAAe,EAAA4E,SA/Cf,SACEjG,EAAoBL,EACpBM,GAEA,OAAIA,EAAOZ,OAAS,EAAAT,WACX,OAAP,wBACKe,GAAY,CACfoG,UAAW9F,EAAOiG,cAAgB,EAAAxH,YAAYyH,MAAQ,EAAIH,MAI1D/F,EAAOZ,OAASwG,EACX,OAAP,wBACK7F,GAAK,CACR+F,UAAW/F,EAAM+F,UAAY,IAK/B9F,EAAOZ,OAAS,EAAAN,YAChBiB,EAAMsB,OAAOK,KAAKP,GAAS,CAACnB,EAAO8B,KAAM9B,EAAO+B,IAAIG,QAAQf,IAAU,GAE/D,OAAP,wBACKpB,GAAK,CACRsB,OAAQ,EAAA8E,WACNpG,EAAMsB,OACNrB,EAAO8B,KACP9B,EAAO+B,GACP/B,EAAOoB,MACPpB,EAAOgC,UAMXhC,EAAOZ,OAAS,EAAAJ,cAChBe,EAAMsB,OAAOK,KAAKP,GAASnB,EAAOmB,QAAUA,GAErC,OAAP,wBACKpB,GAAK,CACRsB,OAAQ,EAAA+E,aAAarG,EAAMsB,OAAQrB,EAAOmB,MAAOnB,EAAOoB,SAIrDrB,K,8EC/ET,aACA,OACA,QAEMsG,EAAkB,kBAQxB,0BAA+BC,GAC7B,MAAO,CAAElH,KAAMiH,EAAiBC,cAUlC,MACM5G,EAA2B,CAAEkD,MADrB,EAAA2D,gBAC4BN,YAAa,EAAAxH,YAAY+H,SAkDnE,UAAe,EAAAR,SAhDf,SACEjG,EAAoBL,EACpBM,GAEA,GAAIA,EAAOZ,OAAS,EAAAT,WAAY,CAC9B,MAAM8H,EAAW,EAAAF,gBAEjB,MAAO,CACL3D,MAAO5C,EAAOiG,cAAgB,EAAAxH,YAAYyH,MAAQO,EAAW,GAAK,EAClER,YAAajG,EAAOiG,aAIxB,GAAIjG,EAAOZ,OAASiH,EAAiB,CACnC,IAAIzD,EAAQ,EA4BZ,OA1BE7C,EAAMkG,cAAgB,EAAAxH,YAAY+H,SAClCxG,EAAOsG,YAAc,EAAA5H,UAAUgI,oBAE/B9D,EAAQ,GAER5C,EAAOsG,YAAc,EAAA5H,UAAUiI,mBAC9B5G,EAAMkG,cAAgB,EAAAxH,YAAYyH,OACjClG,EAAOsG,YAAc,EAAA5H,UAAUgI,qBAChC3G,EAAMkG,cAAgB,EAAAxH,YAAY+H,SACjCxG,EAAOsG,YAAc,EAAA5H,UAAUkI,YAChC7G,EAAMkG,cAAgB,EAAAxH,YAAY+H,SACjCxG,EAAOsG,YAAc,EAAA5H,UAAUmI,eAEjCjE,EAAQ,EAER7C,EAAMkG,cAAgB,EAAAxH,YAAY+H,SAClC,EAAA9H,UAAUoI,oBAEVlE,EAAQ,GAER7C,EAAMkG,cAAgB,EAAAxH,YAAYyH,OAClClG,EAAOsG,YAAc,EAAA5H,UAAUoI,sBAE/BlE,GAAS,GAGJ,OAAP,wBAAY7C,GAAK,CAAE6C,MAAO7C,EAAM6C,MAAQA,IAG1C,OAAO7C,K,8ECtET,aAEA,qBAA0B6C,GACxB,IACMA,EAAMqD,cAAgB,EAAAxH,YAAYyH,OACpCa,aAAaC,QAAQ,QAASpE,EAAMA,MAAMqE,YAE5C,MAAOC,MAKX,2BACE,IACE,IAAItE,EAAQmE,aAAaI,QAAQ,SACjC,GAAa,MAATvE,EACF,OAAO,EAGT,IAAIwE,EAASvG,SAAS+B,EAAO,IAC7B,OAAIyE,OAAOC,MAAMF,GACR,EAGFA,EACP,MAAOF,GACP,OAAO,K,8EC3BX,cACA,OACA,OACA,OAEA,OAOMK,EAAc,cAGP,EAAAC,YAAepG,IAAyC,CACnEhC,KAAMmI,EACNnG,UAKW,EAAAqG,eAAkBC,GACtB,CAACC,EAAUC,KAChB,MACMC,EAAa,IADE,EAAA1E,QAAQyE,KACOxG,OAC9BA,EAAQ,GACd,IAAK,IAAInG,EAAI,EAAGA,EAAIyM,EAAOzM,IAAK,CAC9B,MAAM6M,EAAQ,EAAAhH,OAAO,EAAG+G,EAAW1M,OAAS,GAC5CiG,EAAM3F,QAAQoM,EAAWxL,OAAOyL,EAAO,IAIzC,OADAH,EAAS,EAAAH,YAAYpG,IACdA,GAIX,MAAM1B,EAA0B,CAC9B0B,MAAO,IAwBT,UAAe,EAAA4E,SArBf,SACEjG,EAAmBL,EACnBM,GAEA,GAAIA,EAAOZ,OAAS,EAAAT,WAAY,CAC9B,MAAMyC,EAAQ,GACd,IAAK,MAAMG,KAAQ,EAAAkC,MACjBrC,EAAM3F,KAAK,CAAE8F,KAAM,OAAF,UAAOA,KAE1B,MAAO,CAAEH,SAGX,OAAIpB,EAAOZ,OAASmI,EACX,CACLnG,MAAOrB,EAAMqB,MAAMa,OAAOV,IAAwC,IAAhCvB,EAAOoB,MAAMc,QAAQX,KAIpDxB,K,8EC1DT,aAOA,QACA,OACA,QACA,OAMA,OACA,QACA,OAeA,QAEA,sBAA2BgI,GACzB,MAAO,CAACJ,EAAUC,KAChB,IAAI3B,EAAc8B,EACC,MAAf9B,IACFA,EAAc2B,IAAWhF,MAAMhD,QAAQqG,aAGzC0B,EAAS,CAAEvI,KAAM,EAAAT,WAAYsH,gBAE7B,MAAMnD,EAAQ,EAAAD,SAAS+E,KAIjBI,EAFcL,EAAS,EAAAF,eAAe,KAENhG,IAAIF,GAAS,OAAD,wBAC7CA,GAAI,CACPS,QAAQ,KAGV2F,EAAS,EAAAM,YAAYnF,EAAMzB,OAAO,GAAI2G,IAEtC,MAAMhF,EAAU,EAAAD,WAAW6E,KAE3B,IAAK,IAAI3M,EAAI,EAAGA,EAAI+H,EAAQ3B,OAAOlG,OAAQF,IAAK,CAC9C,MAEMiN,EAFgBP,EAAS,EAAAF,eAAexM,EAAI,IAERwG,IAAI,CAACF,EAAMuG,IAAW,OAAD,wBAC1DvG,GAAI,CACPS,OAAQ8F,IAAU7M,KAGpB0M,EAAS,EAAAM,YAAYjF,EAAQ3B,OAAOpG,GAAIiN,OAKjC,EAAAC,WAAa,CAAChH,EAAcI,KAAkC,CACzEnC,KAAM,EAAAR,YACN2C,OACAJ,UAGW,EAAAiH,aAAe,KAAsB,CAAGhJ,KAAM,EAAAP,gBAE9C,EAAAoJ,YAAc,CACzB9G,EACAC,KACqB,CAAGhC,KAAM,EAAAJ,aAAcoC,QAAOD,UAExC,EAAAkH,UAAY,CACvBvG,EACAC,EACAuG,EAAyB,KACzBR,EAAuB,KACvBS,GAAmB,EACnBvG,GAAkB,KAElB,GAAa,MAAT8F,EAAe,CACjB,GAAiB,MAAbQ,EACF,MAAM,IAAIE,MAAM,6CAElBV,EAAQhG,EAAKV,MAAMqH,UAAUlH,KAAUA,EAAKA,MAAQA,EAAKA,OAAS+G,GAGpE,IAAIlH,EAAQU,EAAKV,MAAM5C,MAAMsJ,GAK7B,OAJIS,GACFnH,EAAMmH,UAGD,CAAEnJ,KAAM,EAAAN,WAAYgD,OAAMC,KAAIX,QAAOY,WAG9C,MAAM0G,EAAUvH,IAAsC,CACpD/B,KAAM,EAAAL,WACNoC,UAGF,uBACEA,EACAK,GAEA,MAAO,CAACmG,EAAUC,KAChB,GAAIzG,EAAM/B,OAAS,EAAAkB,UAAUoC,YAAcvB,EAAM/B,OAAS,EAAAkB,UAAUwC,MAClE,OAGF,GAAiB,MAAbtB,EACF,OAGF,MAAM,KAAED,GAASC,EAEjB,GAAY,MAARD,EACF,OAGF,MAAMmB,EAAa,EAAAF,cAAcoF,KAE3Be,EACJpH,EAAK9D,QAAU,EAAA+C,UAAUC,IACrBiC,EAAWrB,OAAOuH,KAAKzH,GAAgC,IAAvBA,EAAMC,MAAMjG,QAC5CuH,EAAWrB,OAAOuH,KAAKzH,IACrB,GAA2B,IAAvBA,EAAMC,MAAMjG,OACd,OAAO,EAET,MAAM0N,EAAQ1H,EAAMC,MAAM,GAAGG,KAC7B,OAAa,MAATsH,GAGGA,EAAMxG,OAASd,EAAKc,OAGnC,IAAKsG,EACH,OAEF,MAAMG,EAAW,EAAAC,aAAaJ,GAE1B,EAAAK,sBAAsBzH,EAAMuH,KAC9BnB,EAAS,EAAAnI,cAEL2B,EAAM/B,OAAS,EAAAkB,UAAU4C,OAC3ByE,EAAS,EAAAsB,eAAe,EAAAvK,UAAUiI,oBAGhCxF,EAAM/B,OAAS,EAAAkB,UAAU0C,SAC3B2E,EAAS,EAAAsB,eAAe,EAAAvK,UAAUgI,sBAGpCiB,EAAS,EAAAU,UAAUlH,EAAOwH,EAAkBpH,IAC5CoG,EAAS,EAAAS,mBAKf,2BACEjH,EACAI,GAEA,MAAO,CAACoG,EAAUC,KAChB,MAAMvG,EAAS,EAAAgC,aAAauE,KACtBtG,EAAY,EAAA4H,cAAc7H,GAEhC,IAAKC,EAIH,YAHIC,GAAQA,EAAKA,MACfoG,EAAS,EAAAQ,WAAWhH,EAAOI,KAK/B,GAAIA,GAAQA,EAAKM,SAEf,YADA8F,EAAS,EAAAS,gBAIX,MAAMU,EAAW,EAAAC,aAAa5H,IACtBI,KAAM4H,EAAehI,MAAOiI,GAAe9H,EAE/C,EAAA0H,sBAAsBG,EAAeL,KACvCnB,EAAS,EAAAnI,cAEL4J,EAAWhK,OAAS,EAAAkB,UAAU4C,OAChCyE,EAAS,EAAAsB,eAAe,EAAAvK,UAAUiI,oBAGhCyC,EAAWhK,OAAS,EAAAkB,UAAU0C,SAChC2E,EAAS,EAAAsB,eAAe,EAAAvK,UAAUgI,sBAGpCiB,EAAS,EAAAU,UAAUe,EAAYjI,EAAOgI,IACtCxB,EAAS,EAAAS,mBAKf,sBAA2BjH,EAAcI,GACvC,MAAO,CAACoG,EAAUC,KAChB,IAAKrG,EACH,OAGF,MAAMF,EAAS,EAAAgC,aAAauE,KACtBtG,EAAY,EAAA4H,cAAc7H,GAC1ByH,EAAW,EAAAC,aAAa5H,GAE1BI,EAAKM,SACP8F,EAAS,EAAAS,gBAIN9G,GAAawH,IAAavH,GAC7BoG,EAAS,EAAAQ,WAAWhH,EAAOI,MAKjC,wBACEJ,EACAI,GAEA,MAAO,CAACoG,EAAUC,KAChB,MAAMvG,EAAS,EAAAgC,aAAauE,KACtBtG,EAAY,EAAA4H,cAAc7H,GAC1ByH,EAAW,EAAAC,aAAa5H,GAE9B,IAAKG,EAQH,YAPIC,IAASA,EAAKS,OAChB2F,EAAS,EAAAQ,WAAWhH,EAAOI,IAClBA,GAAQuH,IAAgC,IAApBA,EAAS9G,SACtC2F,EAAS,EAAAnI,cACTmI,EAAS,EAAAsB,eAAe,EAAAvK,UAAUkI,aAClCe,EAASe,EAAOvH,MAKpB,GAAII,GAAQA,EAAKM,SAEf,YADA8F,EAAS,EAAAS,gBAIX,MAAQ7G,KAAM4H,EAAehI,MAAOiI,GAAe9H,EAE/CC,IAASuH,GAAY,EAAAO,mBAAmBF,EAAeL,KACzDnB,EAAS,EAAAnI,cAEL4J,EAAWhK,OAAS,EAAAkB,UAAU4C,OAChCyE,EAAS,EAAAsB,eAAe,EAAAvK,UAAUmI,iBAGhCuC,EAAWhK,OAAS,EAAAkB,UAAUoC,YAChCiF,EAAS,EAAAsB,eAAe,EAAAvK,UAAUoI,sBAGpCa,EAAS,EAAAU,UAAUe,EAAYjI,EAAOgI,IACtCxB,EAAS,EAAAS,mBAKf,wBACE,MAAO,CAACT,EAAUC,KAChB,MAAM7H,EAAQ6H,KAEZvG,QAASiI,IACP,EAAArG,SAASlD,IAEXsB,QAASkI,GAAY,UACrBzD,GACE,EAAAjD,SAAS9C,GAEoB,IAA7BwJ,EAAYnI,MAAMjG,QAA8B,IAAd2K,IAItC6B,EAAS,EAAAnI,cACTmI,EAAS,EAAAS,gBAELmB,EAAYnI,MAAMjG,OAAS,EAC7BwM,EAAS,EAAAU,UAAUkB,EAAaD,EAAa,MAAO,GAAG,GAAM,KAE7D3B,EAAS,EAAAU,UAAUiB,EAAaC,EAAa,KAAM,GAAG,GAAM,IAC5D5B,EAAS,EAAA9B,uB,+ECxSf,aACA,OACA,QACA,QACA,QACA,QACA,QAGA2D,EAAQC,QAAQ,CACd,gBACED,EAAQE,eAEV,YACEpL,OAAOqL,SAASC,YAIpB,MAAMC,EAAQ,YACZA,EAAMlC,SAA2B,EAAAmC,cAEnCC,EAASC,OACP,gBAAC,EAAAC,SAAQ,CAACJ,MAAOA,GACf,gBAAC,EAAAK,UAAS,OAEZC,SAASC,eAAe,U,uFCzB1B,aACA,QAEA,GADA,MACA,OACA,QAEA,OACA,QAEA,mBAAoCrK,GAClC,MAAMsK,EAAa,GAEnBA,EAAW5O,KAAK,WAMhB,MAAMoO,EAAQ,EAAAS,YAAY,UAASvK,EAAQ,EAAAwK,mBAAmBF,IAE9D,OADA,UAAUR,EAAO,EAAAlH,SAAWC,GAAsB,EAAA4H,UAAU5H,IACrDiH,I,gFCpBT,aAGA,QACA,QACA,QACA,QACA,QACA,QAsBA,UAAe,EAAAY,gBAA0C,CACvDrH,KAAA,UACAJ,QAAA,UACAN,WAAA,UACAQ,MAAA,UACAJ,MAAA,UACAF,MAAA,a,8ECpCF,aACA,OAMA,OACA,OAcMlD,EAA6B,CACjC2B,OAAQ,CACN,CAAEjC,KAAM,EAAAkB,UAAU0C,QAAS5B,MAAO,IAClC,CAAEhC,KAAM,EAAAkB,UAAU0C,QAAS5B,MAAO,IAClC,CAAEhC,KAAM,EAAAkB,UAAU0C,QAAS5B,MAAO,IAClC,CAAEhC,KAAM,EAAAkB,UAAU0C,QAAS5B,MAAO,IAClC,CAAEhC,KAAM,EAAAkB,UAAU0C,QAAS5B,MAAO,IAClC,CAAEhC,KAAM,EAAAkB,UAAU0C,QAAS5B,MAAO,IAClC,CAAEhC,KAAM,EAAAkB,UAAU0C,QAAS5B,MAAO,MA2EtC,UAAe,EAAA4E,SAvEf,SACEjG,EAAsBL,EACtBM,GAEA,OAAIA,EAAOZ,OAAS,EAAAT,WACX,OAAP,UAAYe,GAIZM,EAAOZ,OAAS,EAAAR,aAChBmB,EAAMsB,OAAOK,KAAKP,GAASA,IAAUnB,EAAOmB,OAErC,OAAP,wBAAYpB,GAAK,CAAEsB,OAAQ,EAAAqJ,YAAY3K,EAAMsB,OAAQrB,EAAOuB,QAI5DvB,EAAOZ,OAAS,EAAAP,eAChBkB,EAAMsB,OAAOK,KAAKP,KAAWA,EAAMG,WAE5B,OAAP,wBAAYvB,GAAK,CAAEsB,OAAQ,EAAAsJ,cAAc5K,EAAMsB,UAI/CrB,EAAOZ,OAAS,EAAAN,YAChBiB,EAAMsB,OAAOK,KAAKP,GAAS,CAACnB,EAAO8B,KAAM9B,EAAO+B,IAAIG,QAAQf,IAAU,GAE/D,OAAP,wBACKpB,GAAK,CACRsB,OAAQ,EAAA8E,WACNpG,EAAMsB,OACNrB,EAAO8B,KACP9B,EAAO+B,GACP/B,EAAOoB,MACPpB,EAAOgC,UAMXhC,EAAOZ,OAAS,EAAAJ,cAChBe,EAAMsB,OAAOK,KAAKP,GAASnB,EAAOmB,QAAUA,GAErC,OAAP,wBACKpB,GAAK,CACRsB,OAAQ,EAAA+E,aAAarG,EAAMsB,OAAQrB,EAAOmB,MAAOnB,EAAOoB,SAIxDpB,EAAOZ,OAAS,EAAAL,WACX,OAAP,wBACKgB,GAAK,CACRsB,OAAQtB,EAAMsB,OAAOI,IAAIN,GACnBA,IAAUnB,EAAOmB,MACZA,EAEF,OAAP,wBACKA,GAAK,CACRC,MAAOD,EAAMC,MAAMK,IAAI,CAACF,EAAMuG,IACxBA,EAAQ3G,EAAMC,MAAMjG,OAAS,EACxBoG,EAEF,OAAP,wBAAYA,GAAI,CAAES,QAAQ,UAO7BjC,K,8ECtGT,aAOA,OACA,OACA,OAMML,EAAgC,CACpC2B,OAAQ,CACN,CAAEjC,KAAM,EAAAkB,UAAUoC,WAAYtB,MAAO,IACrC,CAAEhC,KAAM,EAAAkB,UAAUoC,WAAYtB,MAAO,IACrC,CAAEhC,KAAM,EAAAkB,UAAUoC,WAAYtB,MAAO,IACrC,CAAEhC,KAAM,EAAAkB,UAAUoC,WAAYtB,MAAO,MA6CzC,UAAe,EAAA4E,SAzCf,SACEjG,EAAyBL,EACzBM,GAEA,OAAIA,EAAOZ,OAAS,EAAAT,WACX,OAAP,UAAYe,GAIZM,EAAOZ,OAAS,EAAAR,aAChBmB,EAAMsB,OAAOK,KAAKP,GAASA,IAAUnB,EAAOmB,OAErC,OAAP,wBAAYpB,GAAK,CAAEsB,OAAQ,EAAAqJ,YAAY3K,EAAMsB,OAAQrB,EAAOuB,QAI5DvB,EAAOZ,OAAS,EAAAP,eAChBkB,EAAMsB,OAAOK,KAAKP,KAAWA,EAAMG,WAE5B,OAAP,wBAAYvB,GAAK,CAAEsB,OAAQ,EAAAsJ,cAAc5K,EAAMsB,UAI/CrB,EAAOZ,OAAS,EAAAN,YAChBiB,EAAMsB,OAAOK,KAAKP,GAAS,CAACnB,EAAO8B,KAAM9B,EAAO+B,IAAIG,QAAQf,IAAU,GAE/D,OAAP,wBACKpB,GAAK,CACRsB,OAAQ,EAAA8E,WACNpG,EAAMsB,OACNrB,EAAO8B,KACP9B,EAAO+B,GACP/B,EAAOoB,MACPpB,EAAOgC,UAKNjC,K,8EC9DT,aAMA,OACA,OACA,OAcML,EAA2B,CAC/B2B,OAAQ,CAAC,CAAEjC,KAAM,EAAAkB,UAAU4C,MAAO9B,MAAO,KACzCwJ,QAAS,GA8DX,UAAe,EAAA5E,SA3Df,SACEjG,EAAoBL,EACpBM,GAEA,OAAIA,EAAOZ,OAAS,EAAAT,WACX,OAAP,UAAYe,GAIZM,EAAOZ,OAAS,EAAAR,aAChBmB,EAAMsB,OAAOK,KAAKP,GAASA,IAAUnB,EAAOmB,OAErC,OAAP,wBAAYpB,GAAK,CAAEsB,OAAQ,EAAAqJ,YAAY3K,EAAMsB,OAAQrB,EAAOuB,QAI5DvB,EAAOZ,OAAS,EAAAP,eAChBkB,EAAMsB,OAAOK,KAAKP,KAAWA,EAAMG,WAE5B,OAAP,wBAAYvB,GAAK,CAAEsB,OAAQ,EAAAsJ,cAAc5K,EAAMsB,UAI/CrB,EAAOZ,OAAS,EAAAN,YAChBiB,EAAMsB,OAAOK,KAAKP,GAAS,CAACnB,EAAO8B,KAAM9B,EAAO+B,IAAIG,QAAQf,IAAU,GAE/D,OAAP,wBACKpB,GAAK,CACR6K,QACE5K,EAAO+B,KAAOhC,EAAMsB,OAAO,GACvBJ,KAAKF,IAAIhB,EAAMsB,OAAO,GAAGD,MAAMjG,OAAS6E,EAAOoB,MAAMjG,OAAQ,GAC7D8F,KAAKD,IAAI,EAAGjB,EAAM6K,QAAU,GAClCvJ,OAAQ,EAAA8E,WACNpG,EAAMsB,OACNrB,EAAO8B,KACP9B,EAAO+B,GACP/B,EAAOoB,MACPpB,EAAOgC,UAMXhC,EAAOZ,OAAS,EAAAJ,cAChBe,EAAMsB,OAAOK,KAAKP,GAASnB,EAAOmB,QAAUA,GAErC,OAAP,wBACKpB,GAAK,CACR6K,QACE5K,EAAOmB,QAAUpB,EAAMsB,OAAO,GAC1BJ,KAAKF,IAAIhB,EAAMsB,OAAO,GAAGD,MAAMjG,OAAS6E,EAAOoB,MAAMjG,OAAQ,GAC7D8F,KAAKD,IAAI,EAAGjB,EAAM6K,QAAU,GAClCvJ,OAAQ,EAAA+E,aAAarG,EAAMsB,OAAQrB,EAAOmB,MAAOnB,EAAOoB,SAIrDrB,K,+ECnFT,aACA,QACA,QACA,QACA,QACA,QAUA,OACA,QASA,OAOA,OAGA,OAoKA,MAAM8K,EAAW,EAAApI,eACf,CAAC,EAAAM,WAAY,EAAAP,cAAe,EAAAK,SAAU,EAAAI,SAAU,EAAAN,UAChD,EAAGtB,OAAQ2B,IAAa3B,OAAQqB,GAAcI,EAAOI,EAAON,KAAU,CACpEI,UACAN,aACAI,QACAI,QACAN,WAoBS,EAAAsH,UAAY,EAAAY,QAHA/K,GACvB8K,EAAS9K,GAdiB4H,IAAkD,CAC5EoD,cAAe,IAAMpD,EAAS,EAAAmC,cAC9BkB,qBAAsBC,GAAetD,EAAS,EAAAmC,WAAWmB,IACzDC,iBAAkB,IAAMvD,EAAS,EAAAwD,cACjCC,mBAAoB,CAACjK,EAAOI,IAASoG,EAAS,EAAA0D,aAAalK,EAAOI,IAClE+J,iBAAkB,CAACnK,EAAOI,IAASoG,EAAS,EAAA4D,WAAWpK,EAAOI,IAC9DiK,sBAAuB,CAACrK,EAAOI,IAC7BoG,EAAS,EAAA8D,gBAAgBtK,EAAOI,IAClCmK,kBAAmB,CAACvK,EAAOI,IAASoG,EAAS,EAAAgE,YAAYxK,EAAOI,IAChEqK,WAAY,IAAMjE,EAAS,EAAAxI,QAC3B0M,WAAY,IAAMlE,EAAS,EAAArI,UAMJ,CAvKzB,cAAiCwM,EAAMC,cACrC,YAAYC,GACVC,MAAMD,GACNE,KAAKC,mBAAqBD,KAAKC,mBAAmBnO,KAAKkO,MACvDA,KAAKhB,iBAAmBgB,KAAKhB,iBAAiBlN,KAAKkO,MACnDA,KAAKd,mBAAqBc,KAAKd,mBAAmBpN,KAAKkO,MACvDA,KAAKZ,iBAAmBY,KAAKZ,iBAAiBtN,KAAKkO,MACnDA,KAAKV,sBAAwBU,KAAKV,sBAAsBxN,KAAKkO,MAC7DA,KAAKR,kBAAoBQ,KAAKR,kBAAkB1N,KAAKkO,MACrDA,KAAKE,cAAgBF,KAAKE,cAAcpO,KAAKkO,MAC7CA,KAAKG,0BAA4BH,KAAKG,0BAA0BrO,KAAKkO,MAGvE,oBACE/B,SAASmC,iBAAiB,UAAWJ,KAAKE,eAG5C,uBACEjC,SAASoC,oBAAoB,UAAWL,KAAKE,eAG/C,qBACEF,KAAKF,MAAMjB,gBAGb,4BACEmB,KAAKF,MAAMhB,qBAAqBkB,KAAKM,eAGvC,cAAcC,GACM,KAAdA,EAAEC,UAGFD,EAAEE,SAAWF,EAAEG,SACjBV,KAAKF,MAAMH,aACFY,EAAEE,SACXT,KAAKF,MAAMJ,cAIf,iBAAiBzK,EAAcI,GAC7B2K,KAAKF,MAAMd,iBAAiB/J,EAAOI,GAGrC,mBAAmBJ,EAAcI,GAC/B2K,KAAKF,MAAMZ,mBAAmBjK,EAAOI,GAGvC,iBAAiBJ,EAAcI,GAC7B2K,KAAKF,MAAMV,iBAAiBnK,EAAOI,GAGrC,sBAAsBJ,EAAcI,GAClC2K,KAAKF,MAAMR,sBAAsBrK,EAAOI,GAG1C,kBAAkBJ,EAAcI,GAC9B2K,KAAKF,MAAMN,kBAAkBvK,EAAOI,GAGtC,oBACE,OAAO2K,KAAKF,MAAMpJ,MAAMqD,cAAgB,EAAAxH,YAAYyH,MAChD,EAAAzH,YAAY+H,QACZ,EAAA/H,YAAYyH,MAGlB,SACE,OACE,uBAAK2G,UAAW,EAAAC,WACd,gBAAC,UAAkB,MACnB,2BACE,0BACEC,GAAG,WACHF,UAAW,EAAAG,QACXC,QAASf,KAAKC,oBAEb,YAEH,0BACEY,GAAG,cACHF,UAAW,EAAAK,gBACXD,QAASf,KAAKG,2BAEb,cACA,EAAA5N,YAAYyN,KAAKM,gBAEpB,yBAAOO,GAAG,QAAQF,UAAW,EAAAjK,OAC1B,UACAsJ,KAAKF,MAAMpJ,MAAMA,QAGtB,uBAAKiK,UAAW,EAAAlH,KACd,gBAAC,EAAAwH,eAAc,CACbhM,MAAO+K,KAAKF,MAAMlJ,MAAMzB,OAAO,GAC/B4L,QAASf,KAAKhB,iBACdkC,UAAW,EAAA/M,eAAegN,KAC1BjO,KAAM,EAAAkB,UAAUwC,MAChBd,QAAQ,EACRhB,IAAK,EACL8E,UAAWoG,KAAKF,MAAMlJ,MAAMgD,YAE9B,gBAAC,EAAAqH,eAAc,CACbhM,MAAO+K,KAAKF,MAAM9I,MAAM7B,OAAO,GAC/B4L,QAASf,KAAKZ,iBACdgC,cAAepB,KAAKR,kBACpB0B,UAAW,EAAA/M,eAAekN,WAC1BnO,KAAM,EAAAkB,UAAU4C,MAChBlB,QAAQ,EACRhB,IAAKkL,KAAKF,MAAM9I,MAAM0H,QACtB4C,OAAQ,KAETtB,KAAKF,MAAMtJ,WAAWjB,IAAI,CAACN,EAAO2G,IACjC,gBAAC,EAAAqF,eAAc,CACbpP,kBAAmB+J,IACnBmF,QAASf,KAAKV,sBACdrK,MAAOA,EACPiM,UAAW,EAAA/M,eAAegN,KAC1BjO,KAAM,EAAAkB,UAAUoC,WAChB1B,IAAK,MAIX,uBAAK6L,UAAW,EAAAY,MACbvB,KAAKF,MAAMhJ,QAAQvB,IAAI,CAACN,EAAO2G,IAC9B,gBAAC,EAAAqF,eAAc,CACbpP,eAAgB+J,IAChBmF,QAASf,KAAKd,mBACdkC,cAAepB,KAAKR,kBACpBvK,MAAOA,EACPiM,UAAW,EAAA/M,eAAeqN,SAC1BtO,KAAM,EAAAkB,UAAU0C,YAItB,uBAAK6J,UAAW,EAAAc,SAAU,c,8ECjMlC,aACA,QACA,OA6BA,MAAaR,UAAuBrB,EAAMC,cAYxC,YAAYC,GACVC,MAAMD,GAHA,KAAA4B,IAAM9B,EAAM+B,YAIlB3B,KAAK4B,kBAAoB5B,KAAK4B,kBAAkB9P,KAAKkO,MACrDA,KAAK6B,wBAA0B7B,KAAK6B,wBAAwB/P,KAAKkO,MAGnE,kBACE,OAAQA,KAAKF,MAAM5M,MACjB,KAAK,EAAAkB,UAAUoC,WACb,OAAO,EAAAA,WACT,KAAK,EAAApC,UAAU0C,QACb,OAAO,EAAAA,QACT,KAAK,EAAA1C,UAAUwC,MACb,OAAO,EAAAA,MACT,KAAK,EAAAxC,UAAU4C,MACb,OAAO,EAAAA,OAIb,mBACE,OAAQgJ,KAAKF,MAAMoB,WACjB,KAAK,EAAA/M,eAAegN,KACpB,KAAK,EAAAhN,eAAeqN,SAClB,OAAOxB,KAAKF,MAAMgC,MACpB,KAAK,EAAA3N,eAAekN,WAClB,OAA6B,IAAtBrB,KAAK9K,MAAMjG,OACd+Q,KAAKF,MAAMiC,OACX/B,KAAKF,MAAMwB,QAAUtB,KAAK9K,MAAMjG,OAAS,GAAK+Q,KAAKF,MAAMgC,OAInE,oBACE,OAAQ9B,KAAKF,MAAMoB,WACjB,KAAK,EAAA/M,eAAegN,KACpB,KAAK,EAAAhN,eAAekN,WAClB,OAAOrB,KAAKF,MAAMiC,OACpB,KAAK,EAAA5N,eAAeqN,SAClB,OAA6B,IAAtBxB,KAAK9K,MAAMjG,OACd+Q,KAAKF,MAAMiC,OACX/B,KAAKF,MAAMwB,QAAUtB,KAAK9K,MAAMjG,OAAS,GAAK+Q,KAAKF,MAAMiC,QAInE,YACE,OAAO/B,KAAKF,MAAM7K,MAAMC,MAAM5C,OAAO0N,KAAKF,MAAMhL,KAGlD,wBAAwBkN,GACtB,MAAM,MAAE9M,GAAU8K,MACZ,MAAE/K,EAAK,OAAEqM,EAAM,UAAEJ,EAAS,cAAEE,GAAkBpB,KAAKF,OACjDmC,YAAa1B,GAAMyB,EAC3B,IAAKZ,EACH,OAGF,MAAMc,EAAOhB,IAAc,EAAA/M,eAAekN,WAAa,UAAY,UAEnED,EAAcnM,EAAOC,EADPH,KAAKF,IAAIK,EAAMjG,OAAS,EAAG8F,KAAKC,MAAMuL,EAAE2B,GAAQZ,MAIhE,kBAAkBU,GAChB,MAAM,MAAE9M,GAAU8K,MACZ,MAAE/K,EAAK,OAAEqM,EAAM,UAAEJ,EAAS,QAAEH,GAAYf,KAAKF,OAC3CmC,YAAa1B,GAAMyB,EAC3B,IAAKjB,EACH,OAGF,MAAMmB,EAAOhB,IAAc,EAAA/M,eAAekN,WAAa,UAAY,UAEnEN,EAAQ9L,EAAOC,EADDH,KAAKF,IAAIK,EAAMjG,OAAS,EAAG8F,KAAKC,MAAMuL,EAAE2B,GAAQZ,MAIhE,oBACEtB,KAAKmC,eAGP,qBACEnC,KAAKmC,eAGP,eACE,MAAMC,EAASpC,KAAK0B,IAAIW,QACxB,IAAKD,EACH,OAGF,MAAME,EAAMF,EAAOG,WAAW,MAC9B,IAAKD,EACH,OAGF,MAAM,MAAEpN,GAAU8K,MACZ,UAAEkB,EAAS,OAAEI,GAAWtB,KAAKF,MAEnCwC,EAAIE,OACJF,EAAIG,UAAU,GAAK,IACnBH,EAAII,UAAU,EAAG,EAAGN,EAAON,MAAOM,EAAOL,QAEpB,IAAjB7M,EAAMjG,SACR+Q,KAAK2C,cAAcL,EAAK,CAAEjK,EAAG,EAAGC,EAAG,IACnCgK,EAAIM,SAEyB,IAAzB5C,KAAKF,MAAMlG,YACb0I,EAAIE,OACJF,EAAIO,KAAO,kBACXP,EAAIQ,UAAY,MAChBR,EAAIhJ,UAAY,SAChBgJ,EAAIS,aAAe,SACnBT,EAAIU,SAAS,IAAKhD,KAAKF,MAAMgC,MAAQ,EAAG9B,KAAKF,MAAMiC,OAAS,GAC5DO,EAAIW,YAIR,IAAK,IAAIlU,EAAI,EAAGA,EAAImG,EAAMjG,OAAQF,IAAK,CACrC,MAAMsJ,EAAI6I,IAAc,EAAA/M,eAAekN,WAAatS,EAAIuS,EAAS,EAC3DhJ,EAAI4I,IAAc,EAAA/M,eAAekN,WAAa,EAAItS,EAAIuS,EAExDvS,EAAImG,EAAMjG,OAAS,IACrBqT,EAAIE,OACJxC,KAAKkD,eAAeZ,EAAK,CAAEjK,IAAGC,OAGhC0H,KAAKmD,SAASb,EAAKpN,EAAMnG,GAAI,CAAEsJ,IAAGC,MAE9BvJ,EAAImG,EAAMjG,OAAS,GACrBqT,EAAIW,UAGRX,EAAIW,UAGN,eAAeX,GAA+B,EAAEjK,EAAC,EAAEC,IACjD,MAAM,UAAE4I,EAAS,OAAEkC,EAAM,OAAE9B,EAAM,MAAEQ,EAAK,OAAEC,GAAW/B,KAAKF,MACpDuD,EAAanC,IAAc,EAAA/M,eAAekN,WAAaC,EAASQ,EAChEwB,EACJpC,IAAc,EAAA/M,eAAekN,WAAaU,EAAST,EAErDgB,EAAIiB,YACArC,IAAc,EAAA/M,eAAekN,YAC/BiB,EAAIkB,OAAOnL,EAAGC,GACdgK,EAAImB,OAAOpL,EAAIgL,EAAaD,EAAQ9K,GACpCgK,EAAIoB,iBAAiBrL,EAAIgL,EAAY/K,EAAGD,EAAIgL,EAAY/K,EAAI8K,GAC5Dd,EAAImB,OAAOpL,EAAIgL,EAAY/K,EAAIgL,EAAcF,GAC7Cd,EAAIoB,iBACFrL,EAAIgL,EACJ/K,EAAIgL,EACJjL,EAAIgL,EAAaD,EACjB9K,EAAIgL,GAENhB,EAAImB,OAAOpL,EAAGC,EAAIgL,KAElBhB,EAAIkB,OAAOnL,EAAIgL,EAAY/K,GAC3BgK,EAAImB,OAAOpL,EAAIgL,EAAY/K,EAAIgL,EAAcF,GAC7Cd,EAAIoB,iBACFrL,EAAIgL,EACJ/K,EAAIgL,EACJjL,EAAIgL,EAAaD,EACjB9K,EAAIgL,GAENhB,EAAImB,OAAOpL,EAAI+K,EAAQ9K,EAAIgL,GAC3BhB,EAAIoB,iBAAiBrL,EAAGC,EAAIgL,EAAajL,EAAGC,EAAIgL,EAAcF,GAC9Dd,EAAImB,OAAOpL,EAAGC,IAEhBgK,EAAIqB,YACJrB,EAAIsB,OAGN,cAActB,GAA+B,EAAEjK,EAAC,EAAEC,IAChD,MAAM,OAAE8K,EAAM,OAAErB,EAAM,MAAED,GAAU9B,KAAKF,MACvCwC,EAAIiB,YACJjB,EAAIkB,OAAOnL,EAAI+K,EAAQ9K,GACvBgK,EAAImB,OAAOpL,EAAIyJ,EAAQsB,EAAQ9K,GAC/BgK,EAAIoB,iBAAiBrL,EAAIyJ,EAAOxJ,EAAGD,EAAIyJ,EAAOxJ,EAAI8K,GAClDd,EAAImB,OAAOpL,EAAIyJ,EAAOxJ,EAAIyJ,EAASqB,GACnCd,EAAIoB,iBAAiBrL,EAAIyJ,EAAOxJ,EAAIyJ,EAAQ1J,EAAIyJ,EAAQsB,EAAQ9K,EAAIyJ,GACpEO,EAAImB,OAAOpL,EAAI+K,EAAQ9K,EAAIyJ,GAC3BO,EAAIoB,iBAAiBrL,EAAGC,EAAIyJ,EAAQ1J,EAAGC,EAAIyJ,EAASqB,GACpDd,EAAImB,OAAOpL,EAAGC,EAAI8K,GAClBd,EAAIoB,iBAAiBrL,EAAGC,EAAGD,EAAI+K,EAAQ9K,GACvCgK,EAAIqB,YAGN,SACErB,EACAuB,GACA,EAAExL,EAAC,EAAEC,IAEL,MAAM,KAAEjD,EAAI,OAAES,EAAM,SAAEH,GAAakO,EAKnC,GAHA7D,KAAK2C,cAAcL,EAAK,CAAEjK,IAAGC,MAC7BgK,EAAIM,SAEA9M,EAGF,OAFAwM,EAAIQ,UAAY,YAChBR,EAAIwB,OAIFnO,IACF2M,EAAIQ,UAAY,SAChBR,EAAIwB,QAGN,MAAM,MAAEvS,EAAK,KAAE4E,EAAI,QAAE0B,GAAYxC,EAEjCiN,EAAIQ,UAAYjL,EAAQE,MACxBuK,EAAIhJ,UAAY,SAChBgJ,EAAIS,aAAe,MAEnBT,EAAIO,KAAOhL,EAAQmB,WACnBsJ,EAAIU,SAASzR,EAAOsG,EAAQoB,aAAeZ,EAAGR,EAAQqB,aAAeZ,EAAG,IACxEgK,EAAIU,SAAS7M,EAAM0B,EAAQsB,YAAcd,EAAGR,EAAQuB,YAAcd,GAElEgK,EAAIE,OACJF,EAAIG,UAAUzC,KAAKF,MAAMgC,MAAO9B,KAAKF,MAAMiC,QAC3CO,EAAIyB,OAAOhP,KAAKiP,IAChB1B,EAAIU,SAASzR,EAAOsG,EAAQoB,aAAeZ,EAAGR,EAAQqB,aAAeZ,EAAG,IACxEgK,EAAIU,SAAS7M,EAAM0B,EAAQsB,YAAcd,EAAGR,EAAQuB,YAAcd,GAClEgK,EAAIW,UAEJX,EAAIS,aAAe,SAEnB,IAAK,MAAM9K,KAAOJ,EAAQwB,UAAW,CACnC,MAAM4K,EAAShM,EAAIsB,SAAW,EAAI,EAClC+I,EAAIhJ,UAAYrB,EAAIqB,UAEhBrB,EAAIsB,UACN+I,EAAIE,OACJF,EAAIG,UAAUzC,KAAKF,MAAMgC,MAAO9B,KAAKF,MAAMiC,QAC3CO,EAAIyB,OAAOhP,KAAKiP,KAGlB1B,EAAIO,QAAUhL,EAAQG,sBACtBsK,EAAIU,SAAS7M,EAAM8B,EAAIuB,KAAOnB,EAAI4L,EAAQhM,EAAIwB,IAAMnB,EAAI2L,GAEpDhM,EAAIsB,SACN+I,EAAIW,WAKV,SACE,OACE,0BACE7B,cAAepB,KAAK6B,wBACpBd,QAASf,KAAK4B,kBACdjB,UAAWX,KAAKkE,YAChBpC,MAAO9B,KAAKmE,aAAe,EAC3BpC,OAAQ/B,KAAKoE,cAAgB,EAC7B1C,IAAK1B,KAAK0B,OAtQlB,mBACS,EAAA2C,aAAe,CACpBvP,IAAK+E,IACL/D,QAAQ,EACRgM,MAAO,GACPC,OAAQ,GACRT,OAAQ,GACR8B,OAAQ,K,8ECtCZ,aACA,QACA,QACA,QAEA,QAEA,OAmDA,MAAMzE,EAAW,EAAApI,eACf,CAAC,EAAAD,eACD,EAAGnB,OAAQqB,MAAiB,CAC1B8N,OAAQ9N,EAAW+N,MAAMtP,GAAgC,KAAvBA,EAAMC,MAAMjG,WAOlD,UAAe,EAAA2P,QAHU/K,GACvB8K,EAAS9K,GAEI,CArDf,cAAwB+L,EAAMC,cAI5B,YAAYC,GACVC,MAAMD,GACNE,KAAK0B,IAAM9B,EAAM+B,YACjB3B,KAAKwE,sBAAwBxE,KAAKwE,sBAAsB1S,KAAKkO,MAG/D,sBAAsByE,GACD,KAAfA,EAAGjE,SACLR,KAAK0E,UAAUC,OAInB,oBACE,IAAK3E,KAAK0B,IAAIW,QACZ,OAAO,KAETrC,KAAK0E,UAAY,IAAIE,EAAgB5E,KAAK0B,IAAIW,SAGhD,qBACMrC,KAAKF,MAAMwE,QACbrG,SAASmC,iBAAiB,UAAWJ,KAAKwE,uBAC1CxE,KAAK0E,UAAUG,UAEf5G,SAASoC,oBAAoB,UAAWL,KAAKwE,uBAC7CxE,KAAK0E,UAAUI,QAInB,uBACE9E,KAAK0E,UAAUK,UAGjB,SACE,MAAMC,EAAUhF,KAAKF,MAAMwE,OAAS,GAAK,OACzC,OAAO,uBAAKW,MAAO,CAAED,WAAWrE,UAAW,EAAA+D,UAAWhD,IAAK1B,KAAK0B","file":"klondike.6c7e11ac14426c055e7f.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([25,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { Stack, StackCard } from '../lib/Stack'\n\nexport enum ScoringType {\n  vegas,\n  regular\n}\n\nexport enum ScoreType {\n  wasteToTableau,\n  wasteToFoundation,\n  tableauToFoundation,\n  revealCard,\n  foundationToTableau\n}\n\nexport const INITIALIZE = 'INITIALIZE'\ntype INITIALIZE = typeof INITIALIZE\nexport type Initialize = { type: INITIALIZE; scoringType: ScoringType }\n\nexport const SELECT_CARD = 'SELECT_CARD'\ntype SELECT_CARD = typeof SELECT_CARD\nexport type SelectAction = { type: SELECT_CARD; stack: Stack; card: StackCard }\n\nexport const DESELECT_CARD = 'DESELECT_CARD'\ntype DESELECT_CARD = typeof DESELECT_CARD\nexport type DeselectAction = { type: DESELECT_CARD }\n\nexport const MOVE_CARDS = 'MOVE_CARDS'\ntype MOVE_CARDS = typeof MOVE_CARDS\nexport type MoveCardAction = {\n  type: MOVE_CARDS\n  from: Stack\n  to: Stack\n  cards: StackCard[]\n  hidden: boolean\n}\n\nexport const REVEAL_TOP = 'REVEAL_TOP'\ntype REVEAL_TOP = typeof REVEAL_TOP\nexport type RevealTopCardAction = { type: REVEAL_TOP; stack: Stack }\n\nexport const APPEND_CARDS = 'APPEND_CARDS'\ntype APPEND_CARDS = typeof APPEND_CARDS\nexport type AppendCardAction = {\n  type: APPEND_CARDS\n  stack: Stack\n  cards: StackCard[]\n}\n\nexport const CHANGE_SCORE_TYPE = 'CHANGE_SCORE_TYPE'\ntype CHANGE_SCORE_TYPE = typeof CHANGE_SCORE_TYPE\nexport type ChangeScoreAction = {\n  type: CHANGE_SCORE_TYPE\n}\n\nexport type GlobalActions =\n  | Initialize\n  | SelectAction\n  | DeselectAction\n  | MoveCardAction\n  | RevealTopCardAction\n  | AppendCardAction\n  | ChangeScoreAction\n","import { Reducer, Action, AnyAction } from 'redux'\nimport { INITIALIZE } from './globals'\n\nexport type History<State> = {\n  past: State[]\n  present: State\n  future: State[]\n}\n\nconst UNDO = 'UNDO'\ntype UNDO = typeof UNDO\ntype UndoAction = { type: UNDO }\nexport const undo = (): UndoAction => ({ type: UNDO })\n\nconst REDO = 'REDO'\ntype REDO = typeof REDO\ntype RedoAction = { type: REDO }\nexport const redo = (): RedoAction => ({ type: REDO })\n\nconst CHECKPOINT = 'CHECKPOINT'\ntype CHECKPOINT = typeof CHECKPOINT\ntype CheckpointAction = { type: CHECKPOINT }\nexport const checkpoint = (): CheckpointAction => ({ type: CHECKPOINT })\n\nexport type UndoableActions = UndoAction | RedoAction | CheckpointAction\n\nexport function undoable<S, A extends AnyAction = Action>(\n  reducer: Reducer<S, A>\n) {\n  const initialState: History<S> = {\n    past: [],\n    present: reducer(undefined, {} as A),\n    future: []\n  }\n\n  return function(state = initialState, action: A) {\n    const { past, present, future } = state\n\n    if (action.type === UNDO) {\n      const previous = past[past.length - 1]\n      if (!previous) {\n        return state\n      }\n\n      const newPast = past.slice(0, past.length - 1)\n      return {\n        past: newPast,\n        present: previous,\n        future: [present, ...future]\n      }\n    }\n\n    if (action.type === REDO) {\n      const next = future[0]\n      if (!next) {\n        return state\n      }\n\n      const newFuture = future.slice(1)\n      return {\n        past: [...past, present],\n        present: next,\n        future: newFuture\n      }\n    }\n\n    const newPresent = reducer(present, action)\n\n    if (action.type === INITIALIZE) {\n      return {\n        past: [],\n        present: newPresent,\n        future: []\n      }\n    }\n\n    if (action.type === CHECKPOINT) {\n      return {\n        past: [...past, present],\n        present: newPresent,\n        future: []\n      }\n    }\n\n    if (present === newPresent) {\n      return state\n    }\n\n    return {\n      past,\n      present: newPresent,\n      future\n    }\n  }\n}\n","import { Card } from './Card'\n\nexport type StackCard = {\n  card: Card\n  hidden?: boolean\n  selected?: boolean\n}\n\nexport enum StackDirection {\n  horizontal = 'horizontal',\n  vertical = 'vertical',\n  none = ''\n}\n\nexport enum StackType {\n  tableau = 'tableau',\n  foundation = 'foundation',\n  stock = 'stock',\n  waste = 'waste'\n}\n\nexport type Stack = {\n  cards: StackCard[]\n  selection?: Card\n  type: StackType\n}\n","import { Card, ValueType } from './Card'\nimport { Stack, StackCard } from './Stack'\n\nexport const random = (min: number, max: number): number => {\n  return Math.floor(Math.random() * max) + min\n}\n\nfunction contains(stack: Stack, card: Card) {\n  return stack.cards.some((item: StackCard) => item.card === card)\n}\n\nexport function get_top_card(stack: Stack): StackCard | null {\n  return stack.cards[stack.cards.length - 1]\n}\n\nexport function get_selection(\n  stacks: Stack[]\n): { card: Card; stack: Stack } | null {\n  for (let i = 0; i < stacks.length; i++) {\n    const stack = stacks[i]\n    if (stack.selection == null) {\n      continue\n    }\n    return { card: stack.selection, stack }\n  }\n  return null\n}\n\nexport function select_card(stacks: Stack[], stackCard: StackCard): Stack[] {\n  const card = stackCard.card\n  if (card == null) {\n    return stacks\n  }\n  return stacks.map(stack => {\n    if (!contains(stack, card)) {\n      return stack\n    }\n\n    return {\n      ...stack,\n      cards: stack.cards.map(stackCard => {\n        if (!stackCard.card) {\n          return stackCard\n        }\n        if (stackCard.card !== card) {\n          return stackCard\n        }\n        return { ...stackCard, selected: true }\n      }),\n      selection: card\n    }\n  })\n}\n\nexport function deselect_card(stacks: Stack[]): Stack[] {\n  return stacks.map(stack => {\n    if (!stack.selection) {\n      return stack\n    }\n    return {\n      ...stack,\n      selection: void 0,\n      cards: stack.cards.map(card =>\n        !card.selected ? card : { ...card, selected: void 0 }\n      )\n    }\n  })\n}\n\nexport function move_cards(\n  stacks: Stack[],\n  from: Stack,\n  to: Stack,\n  cards: StackCard[],\n  hidden: boolean\n): Stack[] {\n  return stacks.map(stack => {\n    if (stack === to) {\n      return {\n        ...stack,\n        cards: [\n          ...stack.cards,\n          ...cards.map(card => ({ ...card, selected: false, hidden }))\n        ]\n      }\n    }\n    if (stack === from) {\n      return {\n        ...stack,\n        cards: stack.cards.filter(stackCard => cards.indexOf(stackCard) === -1)\n      }\n    }\n    return stack\n  })\n}\n\nexport function append_cards(stacks: Stack[], to: Stack, cards: StackCard[]) {\n  return stacks.map(stack => {\n    if (stack !== to) {\n      return stack\n    }\n    return {\n      ...stack,\n      cards: [...stack.cards, ...cards]\n    }\n  })\n}\n\nexport function movable_to_foundation(card1: Card, card2?: StackCard | null) {\n  if (card2 == null) {\n    return card1.value === ValueType.ace\n  }\n\n  const { card } = card2\n  if (!card) {\n    return false\n  }\n\n  return (\n    valueToInt(card1.value) === valueToInt(card.value) + 1 &&\n    card1.suit === card.suit\n  )\n}\n\nexport function movable_to_tableau(card1: Card, card2?: StackCard | null) {\n  if (card2 == null) {\n    return card1.value === ValueType.king\n  }\n\n  const { card } = card2\n  if (!card) {\n    return false\n  }\n\n  return (\n    (valueToInt(card1.value) + 1 === valueToInt(card.value) &&\n      card1.isRed &&\n      card.isBlack) ||\n    (card1.isBlack && card.isRed)\n  )\n}\n\nfunction valueToInt(value: ValueType): number {\n  if (value === ValueType.ace) {\n    return 1\n  }\n  if (value === ValueType.jack) {\n    return 11\n  }\n  if (value === ValueType.queen) {\n    return 12\n  }\n  if (value === ValueType.king) {\n    return 13\n  }\n  return parseInt(value)\n}\n","import { createSelector } from 'reselect'\nimport { StoreState } from './index'\n\nexport const getFoundation = createSelector(\n  (state: StoreState) => state.foundation.present,\n  foundation => foundation\n)\n\nexport const getScore = createSelector(\n  (state: StoreState) => state.score.present,\n  score => score\n)\n\nexport const getStock = createSelector(\n  (state: StoreState) => state.stock.present,\n  stock => stock\n)\n\nexport const getTableau = createSelector(\n  (state: StoreState) => state.tableau.present,\n  tableau => tableau\n)\n\nexport const getWaste = createSelector(\n  (state: StoreState) => state.waste.present,\n  waste => waste\n)\n\nexport const getDeck = createSelector(\n  (state: StoreState) => state.deck.present,\n  deck => deck\n)\n\nexport const getAllStacks = createSelector(\n  [getFoundation, getWaste, getTableau],\n  ({ stacks: foundation }, { stacks: waste }, { stacks: tableau }) => [\n    ...foundation,\n    ...waste,\n    ...tableau\n  ]\n)\n","const WIDTH = 75\nconst HEIGHT = 97\n\nexport enum ValueType {\n  ace = 'A',\n  two = '2',\n  three = '3',\n  four = '4',\n  five = '5',\n  six = '6',\n  seven = '7',\n  eight = '8',\n  nine = '9',\n  ten = '10',\n  jack = 'J',\n  queen = 'Q',\n  king = 'K'\n}\n\nenum SuitType {\n  heart = '\\u2665',\n  diamond = '\\u2666',\n  spade = '\\u2660',\n  club = '\\u2663'\n}\n\ntype Position = {\n  left: number\n  top: number\n  rotated: boolean\n  textAlign: CanvasTextAlign\n}\n\ntype Drawing = {\n  color: string\n  cornerFont: string\n  fontSize: string\n  suitXOffset: number\n  suitYOffset: number\n  valueXOffset: number\n  valueYOffset: number\n  positions: Position[]\n}\n\nexport type Card = {\n  suit: SuitType\n  value: ValueType\n  drawing: Drawing\n  isRed: boolean\n  isBlack: boolean\n}\n\nexport const Cards: Card[] = []\nfor (const [, value] of Object.entries(ValueType)) {\n  for (const [, suit] of Object.entries(SuitType)) {\n    Cards.push({\n      suit,\n      value,\n      isRed: [SuitType.diamond, SuitType.heart].indexOf(suit) > -1,\n      isBlack: [SuitType.club, SuitType.spade].indexOf(suit) > -1,\n      drawing: getDrawing(suit, value)\n    })\n  }\n}\n\nfunction getDrawing(suit: SuitType, value: ValueType): Drawing {\n  type ypos = 0 | 1 | 2 | 3 | 4 | 5 | 6\n  type xpos = 0 | 1 | 2\n\n  const color =\n    [SuitType.diamond, SuitType.heart].indexOf(suit) > -1 ? 'red' : 'black'\n\n  const fontSize =\n    [ValueType.ace, ValueType.jack, ValueType.queen, ValueType.king].indexOf(\n      value\n    ) > -1\n      ? '72px'\n      : '20px'\n\n  const pos: { x: xpos; y: ypos }[] = []\n\n  if (\n    [\n      ValueType.ace,\n      ValueType.three,\n      ValueType.five,\n      ValueType.nine,\n      ValueType.jack,\n      ValueType.queen,\n      ValueType.king\n    ].indexOf(value) > -1\n  ) {\n    pos.push({ x: 1, y: 3 })\n  }\n\n  if ([ValueType.two, ValueType.three].indexOf(value) > -1) {\n    pos.push({ x: 1, y: 0 }, { x: 1, y: 6 })\n  }\n\n  if (\n    [\n      ValueType.four,\n      ValueType.five,\n      ValueType.six,\n      ValueType.seven,\n      ValueType.eight,\n      ValueType.nine,\n      ValueType.ten\n    ].indexOf(value) > -1\n  ) {\n    pos.push({ x: 0, y: 0 }, { x: 2, y: 0 }, { x: 0, y: 6 }, { x: 2, y: 6 })\n  }\n\n  if ([ValueType.six, ValueType.seven, ValueType.eight].indexOf(value) > -1) {\n    pos.push({ x: 0, y: 3 }, { x: 2, y: 3 })\n  }\n\n  if ([ValueType.seven, ValueType.ten, ValueType.eight].indexOf(value) > -1) {\n    pos.push({ x: 1, y: 1 })\n  }\n\n  if ([ValueType.nine, ValueType.ten].indexOf(value) > -1) {\n    pos.push({ x: 0, y: 2 }, { x: 2, y: 2 }, { x: 0, y: 4 }, { x: 2, y: 4 })\n  }\n\n  if ([ValueType.ten, ValueType.eight].indexOf(value) > -1) {\n    pos.push({ x: 1, y: 5 })\n  }\n\n  const getTop = (y: ypos) => {\n    switch (y) {\n      case 0:\n      case 6:\n        return HEIGHT * 0.2\n      case 1:\n      case 5:\n        return HEIGHT * 0.3\n      case 2:\n      case 4:\n        return HEIGHT * 0.4\n      case 3:\n        return HEIGHT * 0.5\n    }\n  }\n\n  const getLeft = (x: xpos) => {\n    switch (x) {\n      case 0:\n        return WIDTH * 0.25\n      case 1:\n        return WIDTH * 0.5\n      case 2:\n        return WIDTH * 0.75\n    }\n  }\n\n  const getTextAlign = (x: xpos): CanvasTextAlign => {\n    switch (x) {\n      case 0:\n        return 'left'\n      case 1:\n        return 'center'\n      case 2:\n        return 'right'\n    }\n  }\n\n  const positions: Position[] = pos.map(({ x, y }) => {\n    return {\n      textAlign: getTextAlign(x),\n      rotated: y > 3,\n      left: getLeft(x),\n      top: getTop(y)\n    }\n  })\n\n  return {\n    cornerFont: 'bold 15px sans-serif',\n    valueXOffset: 9,\n    valueYOffset: 2,\n    suitXOffset: 9,\n    suitYOffset: 12,\n    color,\n    fontSize,\n    positions\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"_3Ho0y\",\"fireworks\":\"_3Vpx0\",\"top\":\"PXPNp\",\"play\":\"_1AEL_\",\"stock\":\"_1RYwC\",\"waste\":\"_2ZC3g\",\"foundation\":\"Dkr2R\",\"tableau\":\"_32gkp\",\"version\":\"_2eXaR\",\"new-game\":\"_1Lqhp\",\"newGame\":\"_1Lqhp\",\"switch-score-type\":\"_2Bfdq\",\"switchScoreType\":\"_2Bfdq\",\"score\":\"_7PP0b\"};","import { undoable } from './undoable'\nimport { Stack, StackType } from '../lib/Stack'\nimport { append_cards, move_cards } from '../lib/util'\nimport {\n  GlobalActions,\n  INITIALIZE,\n  MOVE_CARDS,\n  APPEND_CARDS,\n  ScoringType\n} from './globals'\n\nconst DECREMENT_DRAWS = 'DECREMENT_DRAWS'\ntype DECREMENT_DRAWS = typeof DECREMENT_DRAWS\ntype DecrementDrawsAction = { type: DECREMENT_DRAWS }\nexport const decrementDraws = (): DecrementDrawsAction => ({\n  type: DECREMENT_DRAWS\n})\n\nexport type StockStore = {\n  readonly drawsLeft: number\n  readonly stacks: Stack[]\n}\n\nexport type StockActions = DecrementDrawsAction\n\nconst initialState: StockStore = {\n  drawsLeft: Infinity,\n  stacks: [\n    {\n      type: StackType.stock,\n      cards: []\n    }\n  ]\n}\n\nfunction stockReducer(\n  state: StockStore = initialState,\n  action: GlobalActions | StockActions\n): StockStore {\n  if (action.type === INITIALIZE) {\n    return {\n      ...initialState,\n      drawsLeft: action.scoringType === ScoringType.vegas ? 2 : Infinity\n    }\n  }\n\n  if (action.type === DECREMENT_DRAWS) {\n    return {\n      ...state,\n      drawsLeft: state.drawsLeft - 1\n    }\n  }\n\n  if (\n    action.type === MOVE_CARDS &&\n    state.stacks.some(stack => [action.from, action.to].indexOf(stack) > -1)\n  ) {\n    return {\n      ...state,\n      stacks: move_cards(\n        state.stacks,\n        action.from,\n        action.to,\n        action.cards,\n        action.hidden\n      )\n    }\n  }\n\n  if (\n    action.type === APPEND_CARDS &&\n    state.stacks.some(stack => action.stack === stack)\n  ) {\n    return {\n      ...state,\n      stacks: append_cards(state.stacks, action.stack, action.cards)\n    }\n  }\n\n  return state\n}\n\nexport default undoable(stockReducer)\n","import { INITIALIZE, GlobalActions, ScoreType, ScoringType } from './globals'\nimport { undoable } from './undoable'\nimport { getSavedScore } from '../lib/persist'\n\nconst INCREMENT_SCORE = 'INCREMENT_SCORE'\ntype INCREMENT_SCORE = typeof INCREMENT_SCORE\n\ntype IncrementAction = {\n  type: INCREMENT_SCORE\n  scoreType: ScoreType\n}\n\nexport function incrementScore(scoreType: ScoreType): IncrementAction {\n  return { type: INCREMENT_SCORE, scoreType }\n}\n\nexport type ScoreStore = {\n  readonly score: number\n  readonly scoringType: ScoringType\n}\n\nexport type ScoreActions = IncrementAction\n\nconst score = getSavedScore()\nconst initialState: ScoreStore = { score, scoringType: ScoringType.regular }\n\nfunction scoreReducer(\n  state: ScoreStore = initialState,\n  action: ScoreActions | GlobalActions\n): ScoreStore {\n  if (action.type === INITIALIZE) {\n    const oldScore = getSavedScore()\n\n    return {\n      score: action.scoringType === ScoringType.vegas ? oldScore - 52 : 0,\n      scoringType: action.scoringType\n    }\n  }\n\n  if (action.type === INCREMENT_SCORE) {\n    let score = 0\n    if (\n      state.scoringType === ScoringType.regular &&\n      action.scoreType === ScoreType.tableauToFoundation\n    ) {\n      score = 10\n    } else if (\n      action.scoreType === ScoreType.wasteToFoundation ||\n      (state.scoringType === ScoringType.vegas &&\n        action.scoreType === ScoreType.tableauToFoundation) ||\n      (state.scoringType === ScoringType.regular &&\n        action.scoreType === ScoreType.revealCard) ||\n      (state.scoringType === ScoringType.regular &&\n        action.scoreType === ScoreType.wasteToTableau)\n    ) {\n      score = 5\n    } else if (\n      state.scoringType === ScoringType.regular &&\n      ScoreType.foundationToTableau\n    ) {\n      score = 10\n    } else if (\n      state.scoringType === ScoringType.vegas &&\n      action.scoreType === ScoreType.foundationToTableau\n    ) {\n      score = -5\n    }\n\n    return { ...state, score: state.score + score }\n  }\n\n  return state\n}\n\nexport default undoable(scoreReducer)\n","import { ScoreStore } from '../redux/score'\nimport { ScoringType } from '../redux/globals'\n\nexport function saveScore(score: ScoreStore): void {\n  try {\n    if (score.scoringType === ScoringType.vegas) {\n      localStorage.setItem('score', score.score.toString())\n    }\n  } catch (err) {\n    // ehh, that sucks\n  }\n}\n\nexport function getSavedScore(): number {\n  try {\n    let score = localStorage.getItem('score')\n    if (score == null) {\n      return 0\n    }\n\n    let parsed = parseInt(score, 10)\n    if (Number.isNaN(parsed)) {\n      return 0\n    }\n\n    return parsed\n  } catch (err) {\n    return 0\n  }\n}\n","import { Cards } from '../lib/Card'\nimport { GlobalActions, INITIALIZE } from './globals'\nimport { undoable } from './undoable'\nimport { random } from '../lib/util'\nimport { ThunkResult } from '.'\nimport { getDeck } from './selectors'\nimport { StackCard } from '../lib/Stack'\n\nexport type DeckStore = {\n  readonly cards: StackCard[]\n}\n\nconst REMOVE_CARD = 'REMOVE_CARD'\ntype REMOVE_CARD = typeof REMOVE_CARD\ntype RemoveCardAction = { type: REMOVE_CARD; cards: StackCard[] }\nexport const removeCards = (cards: StackCard[]): RemoveCardAction => ({\n  type: REMOVE_CARD,\n  cards\n})\n\nexport type DeckActions = RemoveCardAction\n\nexport const getRandomCards = (count: Number): ThunkResult<StackCard[]> => {\n  return (dispatch, getState) => {\n    const current_deck = getDeck(getState())\n    const deck_cards = [...current_deck.cards]\n    const cards = []\n    for (let i = 0; i < count; i++) {\n      const index = random(0, deck_cards.length - 1)\n      cards.push(...deck_cards.splice(index, 1))\n    }\n\n    dispatch(removeCards(cards))\n    return cards\n  }\n}\n\nconst initialState: DeckStore = {\n  cards: []\n}\n\nfunction deckReducer(\n  state: DeckStore = initialState,\n  action: DeckActions | GlobalActions\n): DeckStore {\n  if (action.type === INITIALIZE) {\n    const cards = []\n    for (const card of Cards) {\n      cards.push({ card: { ...card } })\n    }\n    return { cards }\n  }\n\n  if (action.type === REMOVE_CARD) {\n    return {\n      cards: state.cards.filter(card => action.cards.indexOf(card) === -1)\n    }\n  }\n\n  return state\n}\n\nexport default undoable(deckReducer)\n","import { ThunkResult } from './index'\nimport {\n  getStock,\n  getTableau,\n  getFoundation,\n  getWaste,\n  getAllStacks\n} from './selectors'\nimport { getRandomCards } from './deck'\nimport { Stack, StackCard, StackType } from '../lib/Stack'\nimport { Card, ValueType } from '../lib/Card'\nimport {\n  get_top_card,\n  movable_to_foundation,\n  get_selection,\n  movable_to_tableau\n} from '../lib/util'\nimport { checkpoint } from './undoable'\nimport { incrementScore } from './score'\nimport {\n  APPEND_CARDS,\n  DESELECT_CARD,\n  INITIALIZE,\n  MOVE_CARDS,\n  REVEAL_TOP,\n  SELECT_CARD,\n  AppendCardAction,\n  DeselectAction,\n  MoveCardAction,\n  RevealTopCardAction,\n  SelectAction,\n  ScoringType,\n  ScoreType\n} from './globals'\nimport { decrementDraws } from './stock'\n\nexport function initialize(newScoringType?: ScoringType): ThunkResult<void> {\n  return (dispatch, getState) => {\n    let scoringType = newScoringType\n    if (scoringType == null) {\n      scoringType = getState().score.present.scoringType\n    }\n\n    dispatch({ type: INITIALIZE, scoringType })\n\n    const stock = getStock(getState())\n\n    const stock_cards = dispatch(getRandomCards(24))\n\n    const stock_stack_cards = stock_cards.map(card => ({\n      ...card,\n      hidden: true\n    }))\n\n    dispatch(appendCards(stock.stacks[0], stock_stack_cards))\n\n    const tableau = getTableau(getState())\n\n    for (let i = 0; i < tableau.stacks.length; i++) {\n      const tableau_cards = dispatch(getRandomCards(i + 1))\n\n      const tableau_stack_cards = tableau_cards.map((card, index) => ({\n        ...card,\n        hidden: index !== i\n      }))\n\n      dispatch(appendCards(tableau.stacks[i], tableau_stack_cards))\n    }\n  }\n}\n\nexport const selectCard = (stack: Stack, card: StackCard): SelectAction => ({\n  type: SELECT_CARD,\n  card,\n  stack\n})\n\nexport const deselectCard = (): DeselectAction => ({ type: DESELECT_CARD })\n\nexport const appendCards = (\n  stack: Stack,\n  cards: StackCard[]\n): AppendCardAction => ({ type: APPEND_CARDS, cards, stack })\n\nexport const moveCards = (\n  from: Stack,\n  to: Stack,\n  from_card: Card | null = null,\n  index: number | null = null,\n  reverse: Boolean = false,\n  hidden: boolean = false\n): MoveCardAction => {\n  if (index == null) {\n    if (from_card == null) {\n      throw new Error('from card reqired when index not provided')\n    }\n    index = from.cards.findIndex(card => !!card.card && card.card === from_card)\n  }\n\n  let cards = from.cards.slice(index)\n  if (reverse) {\n    cards.reverse()\n  }\n\n  return { type: MOVE_CARDS, from, to, cards, hidden }\n}\n\nconst reveal = (stack: Stack): RevealTopCardAction => ({\n  type: REVEAL_TOP,\n  stack\n})\n\nexport function doubleClick(\n  stack: Stack,\n  stackCard?: StackCard\n): ThunkResult<void> {\n  return (dispatch, getState) => {\n    if (stack.type === StackType.foundation || stack.type === StackType.stock) {\n      return\n    }\n\n    if (stackCard == null) {\n      return\n    }\n\n    const { card } = stackCard\n\n    if (card == null) {\n      return\n    }\n\n    const foundation = getFoundation(getState())\n\n    const foundation_stack =\n      card.value === ValueType.ace\n        ? foundation.stacks.find(stack => stack.cards.length === 0)\n        : foundation.stacks.find(stack => {\n            if (stack.cards.length === 0) {\n              return false\n            }\n            const first = stack.cards[0].card\n            if (first == null) {\n              return false\n            }\n            return first.suit === card.suit\n          })\n\n    if (!foundation_stack) {\n      return\n    }\n    const top_card = get_top_card(foundation_stack)\n\n    if (movable_to_foundation(card, top_card)) {\n      dispatch(checkpoint())\n\n      if (stack.type === StackType.waste) {\n        dispatch(incrementScore(ScoreType.wasteToFoundation))\n      }\n\n      if (stack.type === StackType.tableau) {\n        dispatch(incrementScore(ScoreType.tableauToFoundation))\n      }\n\n      dispatch(moveCards(stack, foundation_stack, card))\n      dispatch(deselectCard())\n    }\n  }\n}\n\nexport function clickFoundation(\n  stack: Stack,\n  card?: StackCard\n): ThunkResult<void> {\n  return (dispatch, getState) => {\n    const stacks = getAllStacks(getState())\n    const selection = get_selection(stacks)\n\n    if (!selection) {\n      if (card && card.card) {\n        dispatch(selectCard(stack, card))\n      }\n      return\n    }\n\n    if (card && card.selected) {\n      dispatch(deselectCard())\n      return\n    }\n\n    const top_card = get_top_card(stack)\n    const { card: selected_card, stack: from_stack } = selection\n\n    if (movable_to_foundation(selected_card, top_card)) {\n      dispatch(checkpoint())\n\n      if (from_stack.type === StackType.waste) {\n        dispatch(incrementScore(ScoreType.wasteToFoundation))\n      }\n\n      if (from_stack.type === StackType.tableau) {\n        dispatch(incrementScore(ScoreType.tableauToFoundation))\n      }\n\n      dispatch(moveCards(from_stack, stack, selected_card))\n      dispatch(deselectCard())\n    }\n  }\n}\n\nexport function clickWaste(stack: Stack, card?: StackCard): ThunkResult<void> {\n  return (dispatch, getState) => {\n    if (!card) {\n      return\n    }\n\n    const stacks = getAllStacks(getState())\n    const selection = get_selection(stacks)\n    const top_card = get_top_card(stack)\n\n    if (card.selected) {\n      dispatch(deselectCard())\n      return\n    }\n\n    if (!selection && top_card === card) {\n      dispatch(selectCard(stack, card))\n    }\n  }\n}\n\nexport function clickTableau(\n  stack: Stack,\n  card?: StackCard\n): ThunkResult<void> {\n  return (dispatch, getState) => {\n    const stacks = getAllStacks(getState())\n    const selection = get_selection(stacks)\n    const top_card = get_top_card(stack)\n\n    if (!selection) {\n      if (card && !card.hidden) {\n        dispatch(selectCard(stack, card))\n      } else if (card && top_card && top_card.hidden === true) {\n        dispatch(checkpoint())\n        dispatch(incrementScore(ScoreType.revealCard))\n        dispatch(reveal(stack))\n      }\n      return\n    }\n\n    if (card && card.selected) {\n      dispatch(deselectCard())\n      return\n    }\n\n    const { card: selected_card, stack: from_stack } = selection\n\n    if (card === top_card && movable_to_tableau(selected_card, top_card)) {\n      dispatch(checkpoint())\n\n      if (from_stack.type === StackType.waste) {\n        dispatch(incrementScore(ScoreType.wasteToTableau))\n      }\n\n      if (from_stack.type === StackType.foundation) {\n        dispatch(incrementScore(ScoreType.foundationToTableau))\n      }\n\n      dispatch(moveCards(from_stack, stack, selected_card))\n      dispatch(deselectCard())\n    }\n  }\n}\n\nexport function clickStock(): ThunkResult<void> {\n  return (dispatch, getState) => {\n    const state = getState()\n    const {\n      stacks: [waste_stack]\n    } = getWaste(state)\n    const {\n      stacks: [stock_stack],\n      drawsLeft\n    } = getStock(state)\n\n    if (stock_stack.cards.length === 0 && drawsLeft === 0) {\n      return\n    }\n\n    dispatch(checkpoint())\n    dispatch(deselectCard())\n\n    if (stock_stack.cards.length > 0) {\n      dispatch(moveCards(stock_stack, waste_stack, null, -3, true, false))\n    } else {\n      dispatch(moveCards(waste_stack, stock_stack, null, 0, true, true))\n      dispatch(decrementDraws())\n    }\n  }\n}\n","import * as React from 'react'\nimport * as ReactDOM from 'react-dom'\nimport * as offline from 'offline-plugin/runtime'\nimport { Provider } from 'react-redux'\nimport configStore from './store'\nimport { initialize } from './redux/actions'\nimport { Container } from './components/Container'\nimport { ThunkDispatch } from './redux'\n\noffline.install({\n  onUpdateReady() {\n    offline.applyUpdate()\n  },\n  onUpdated() {\n    window.location.reload()\n  }\n})\n\nconst store = configStore()\n;(store.dispatch as ThunkDispatch)(initialize())\n\nReactDOM.render(\n  <Provider store={store}>\n    <Container />\n  </Provider>,\n  document.getElementById('root')\n)\n","import { createStore, applyMiddleware } from 'redux'\nimport thunk, { ThunkMiddleware } from 'redux-thunk'\nimport { createLogger } from 'redux-logger'\nimport reducer, { StoreState, StoreActions } from './redux'\nimport subscribe from 'redux-subscribe-reselect'\nimport { ScoreStore } from './redux/score'\nimport { getScore } from './redux/selectors'\nimport { saveScore } from './lib/persist'\n\nexport default function configStore(state?: object) {\n  const middleware = []\n\n  middleware.push(thunk as ThunkMiddleware<StoreState, StoreActions>)\n\n  if (process.env.NODE_ENV !== 'production') {\n    middleware.push(createLogger())\n  }\n\n  const store = createStore(reducer, state!, applyMiddleware(...middleware))\n  subscribe(store, getScore, (score: ScoreStore) => saveScore(score))\n  return store\n}\n","import { combineReducers } from 'redux'\nimport { ThunkAction, ThunkDispatch } from 'redux-thunk'\nimport { GlobalActions } from './globals'\nimport tableau, { TableauStore } from './tableau'\nimport foundation, { FoundationStore } from './foundation'\nimport waste, { WasteStore } from './waste'\nimport stock, { StockStore, StockActions } from './stock'\nimport score, { ScoreStore, ScoreActions } from './score'\nimport deck, { DeckStore, DeckActions } from './deck'\nimport { History, UndoableActions } from './undoable'\n\nexport type StoreActions =\n  | GlobalActions\n  | ScoreActions\n  | UndoableActions\n  | DeckActions\n  | StockActions\n\nexport type StoreState = {\n  deck: History<DeckStore>\n  tableau: History<TableauStore>\n  foundation: History<FoundationStore>\n  waste: History<WasteStore>\n  stock: History<StockStore>\n  score: History<ScoreStore>\n}\n\nexport type ThunkResult<R> = ThunkAction<R, StoreState, null, StoreActions>\nexport type ThunkDispatch = ThunkDispatch<StoreState, null, StoreActions>\n\nexport default combineReducers<StoreState, StoreActions>({\n  deck,\n  tableau,\n  foundation,\n  waste,\n  stock,\n  score\n})\n","import { Stack, StackType } from '../lib/Stack'\nimport {\n  select_card,\n  deselect_card,\n  move_cards,\n  append_cards\n} from '../lib/util'\nimport { undoable } from './undoable'\nimport {\n  GlobalActions,\n  INITIALIZE,\n  SELECT_CARD,\n  DESELECT_CARD,\n  MOVE_CARDS,\n  APPEND_CARDS,\n  REVEAL_TOP\n} from './globals'\n\nexport type TableauStore = {\n  readonly stacks: Stack[]\n}\n\nconst initialState: TableauStore = {\n  stacks: [\n    { type: StackType.tableau, cards: [] },\n    { type: StackType.tableau, cards: [] },\n    { type: StackType.tableau, cards: [] },\n    { type: StackType.tableau, cards: [] },\n    { type: StackType.tableau, cards: [] },\n    { type: StackType.tableau, cards: [] },\n    { type: StackType.tableau, cards: [] }\n  ]\n}\n\nfunction tableauReducer(\n  state: TableauStore = initialState,\n  action: GlobalActions\n): TableauStore {\n  if (action.type === INITIALIZE) {\n    return { ...initialState }\n  }\n\n  if (\n    action.type === SELECT_CARD &&\n    state.stacks.some(stack => stack === action.stack)\n  ) {\n    return { ...state, stacks: select_card(state.stacks, action.card) }\n  }\n\n  if (\n    action.type === DESELECT_CARD &&\n    state.stacks.some(stack => !!stack.selection)\n  ) {\n    return { ...state, stacks: deselect_card(state.stacks) }\n  }\n\n  if (\n    action.type === MOVE_CARDS &&\n    state.stacks.some(stack => [action.from, action.to].indexOf(stack) > -1)\n  ) {\n    return {\n      ...state,\n      stacks: move_cards(\n        state.stacks,\n        action.from,\n        action.to,\n        action.cards,\n        action.hidden\n      )\n    }\n  }\n\n  if (\n    action.type === APPEND_CARDS &&\n    state.stacks.some(stack => action.stack === stack)\n  ) {\n    return {\n      ...state,\n      stacks: append_cards(state.stacks, action.stack, action.cards)\n    }\n  }\n\n  if (action.type === REVEAL_TOP) {\n    return {\n      ...state,\n      stacks: state.stacks.map(stack => {\n        if (stack !== action.stack) {\n          return stack\n        }\n        return {\n          ...stack,\n          cards: stack.cards.map((card, index) => {\n            if (index < stack.cards.length - 1) {\n              return card\n            }\n            return { ...card, hidden: false }\n          })\n        }\n      })\n    }\n  }\n\n  return state\n}\n\nexport default undoable(tableauReducer)\n","import {\n  INITIALIZE,\n  GlobalActions,\n  SELECT_CARD,\n  DESELECT_CARD,\n  MOVE_CARDS\n} from './globals'\nimport { Stack, StackType } from '../lib/Stack'\nimport { select_card, deselect_card, move_cards } from '../lib/util'\nimport { undoable } from './undoable'\n\nexport type FoundationStore = {\n  readonly stacks: Stack[]\n}\n\nconst initialState: FoundationStore = {\n  stacks: [\n    { type: StackType.foundation, cards: [] },\n    { type: StackType.foundation, cards: [] },\n    { type: StackType.foundation, cards: [] },\n    { type: StackType.foundation, cards: [] }\n  ]\n}\n\nfunction foundationReducer(\n  state: FoundationStore = initialState,\n  action: GlobalActions\n): FoundationStore {\n  if (action.type === INITIALIZE) {\n    return { ...initialState }\n  }\n\n  if (\n    action.type === SELECT_CARD &&\n    state.stacks.some(stack => stack === action.stack)\n  ) {\n    return { ...state, stacks: select_card(state.stacks, action.card) }\n  }\n\n  if (\n    action.type === DESELECT_CARD &&\n    state.stacks.some(stack => !!stack.selection)\n  ) {\n    return { ...state, stacks: deselect_card(state.stacks) }\n  }\n\n  if (\n    action.type === MOVE_CARDS &&\n    state.stacks.some(stack => [action.from, action.to].indexOf(stack) > -1)\n  ) {\n    return {\n      ...state,\n      stacks: move_cards(\n        state.stacks,\n        action.from,\n        action.to,\n        action.cards,\n        action.hidden\n      )\n    }\n  }\n\n  return state\n}\n\nexport default undoable(foundationReducer)\n","import {\n  select_card,\n  deselect_card,\n  move_cards,\n  append_cards\n} from '../lib/util'\nimport { Stack, StackType } from '../lib/Stack'\nimport { undoable } from './undoable'\nimport {\n  GlobalActions,\n  INITIALIZE,\n  SELECT_CARD,\n  DESELECT_CARD,\n  MOVE_CARDS,\n  APPEND_CARDS\n} from './globals'\n\nexport type WasteStore = {\n  readonly stacks: Stack[] // this is an array for consistency with other stores\n  readonly showing: number\n}\n\nconst initialState: WasteStore = {\n  stacks: [{ type: StackType.waste, cards: [] }],\n  showing: 0\n}\n\nfunction wasteReducer(\n  state: WasteStore = initialState,\n  action: GlobalActions\n): WasteStore {\n  if (action.type === INITIALIZE) {\n    return { ...initialState }\n  }\n\n  if (\n    action.type === SELECT_CARD &&\n    state.stacks.some(stack => stack === action.stack)\n  ) {\n    return { ...state, stacks: select_card(state.stacks, action.card) }\n  }\n\n  if (\n    action.type === DESELECT_CARD &&\n    state.stacks.some(stack => !!stack.selection)\n  ) {\n    return { ...state, stacks: deselect_card(state.stacks) }\n  }\n\n  if (\n    action.type === MOVE_CARDS &&\n    state.stacks.some(stack => [action.from, action.to].indexOf(stack) > -1)\n  ) {\n    return {\n      ...state,\n      showing:\n        action.to === state.stacks[0]\n          ? Math.min(state.stacks[0].cards.length + action.cards.length, 3)\n          : Math.max(1, state.showing - 1),\n      stacks: move_cards(\n        state.stacks,\n        action.from,\n        action.to,\n        action.cards,\n        action.hidden\n      )\n    }\n  }\n\n  if (\n    action.type === APPEND_CARDS &&\n    state.stacks.some(stack => action.stack === stack)\n  ) {\n    return {\n      ...state,\n      showing:\n        action.stack === state.stacks[0]\n          ? Math.min(state.stacks[0].cards.length + action.cards.length, 3)\n          : Math.max(1, state.showing - 1),\n      stacks: append_cards(state.stacks, action.stack, action.cards)\n    }\n  }\n\n  return state\n}\n\nexport default undoable(wasteReducer)\n","import * as React from 'react'\nimport { connect } from 'react-redux'\nimport { createSelector } from 'reselect'\nimport { StackComponent } from './Stack'\nimport FireworksComponent from './Fireworks'\nimport {\n  container,\n  top,\n  play,\n  newGame,\n  score,\n  version,\n  switchScoreType\n} from '../../styles/cards.scss'\nimport { StoreState, ThunkDispatch } from '../redux'\nimport { Stack, StackCard, StackType, StackDirection } from '../lib/Stack'\nimport {\n  initialize,\n  clickStock,\n  clickTableau,\n  clickWaste,\n  clickFoundation,\n  doubleClick\n} from '../redux/actions'\nimport { WasteStore } from '../redux/waste'\nimport {\n  getWaste,\n  getTableau,\n  getFoundation,\n  getStock,\n  getScore\n} from '../redux/selectors'\nimport { undo, redo } from '../redux/undoable'\nimport { StockStore } from '../redux/stock'\nimport { ScoreStore } from '../redux/score'\nimport { ScoringType } from '../redux/globals'\n\ntype ContainerConnectedProps = {\n  tableau: Stack[]\n  foundation: Stack[]\n  stock: StockStore\n  waste: WasteStore\n  score: ScoreStore\n}\n\ntype ContainerActionProps = {\n  handleNewGame: () => void\n  handleSwitchGameType: (newScoringType: ScoringType) => void\n  handleStockClick: (stack: Stack, card?: StackCard) => void\n  handleTableauClick: (stack: Stack, card?: StackCard) => void\n  handleWasteClick: (stack: Stack, card?: StackCard) => void\n  handleFoundationClick: (stack: Stack, card?: StackCard) => void\n  handleDoubleClick: (stack: Stack, card?: StackCard) => void\n  handleUndo: () => void\n  handleRedo: () => void\n}\n\ntype ContainerProps = ContainerConnectedProps & ContainerActionProps\n\nclass ContainerComponent extends React.PureComponent<ContainerProps> {\n  constructor(props: ContainerProps) {\n    super(props)\n    this.handleNewGameClick = this.handleNewGameClick.bind(this)\n    this.handleStockClick = this.handleStockClick.bind(this)\n    this.handleTableauClick = this.handleTableauClick.bind(this)\n    this.handleWasteClick = this.handleWasteClick.bind(this)\n    this.handleFoundationClick = this.handleFoundationClick.bind(this)\n    this.handleDoubleClick = this.handleDoubleClick.bind(this)\n    this.handleKeyDown = this.handleKeyDown.bind(this)\n    this.handleSwitchGameTypeClick = this.handleSwitchGameTypeClick.bind(this)\n  }\n\n  componentDidMount() {\n    document.addEventListener('keydown', this.handleKeyDown)\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeyDown)\n  }\n\n  handleNewGameClick() {\n    this.props.handleNewGame()\n  }\n\n  handleSwitchGameTypeClick() {\n    this.props.handleSwitchGameType(this.otherGameType)\n  }\n\n  handleKeyDown(e: KeyboardEvent) {\n    if (e.keyCode !== 90) {\n      return\n    }\n    if (e.ctrlKey && e.shiftKey) {\n      this.props.handleRedo()\n    } else if (e.ctrlKey) {\n      this.props.handleUndo()\n    }\n  }\n\n  handleStockClick(stack: Stack, card?: StackCard) {\n    this.props.handleStockClick(stack, card)\n  }\n\n  handleTableauClick(stack: Stack, card?: StackCard) {\n    this.props.handleTableauClick(stack, card)\n  }\n\n  handleWasteClick(stack: Stack, card?: StackCard) {\n    this.props.handleWasteClick(stack, card)\n  }\n\n  handleFoundationClick(stack: Stack, card?: StackCard) {\n    this.props.handleFoundationClick(stack, card)\n  }\n\n  handleDoubleClick(stack: Stack, card?: StackCard) {\n    this.props.handleDoubleClick(stack, card)\n  }\n\n  get otherGameType() {\n    return this.props.score.scoringType === ScoringType.vegas\n      ? ScoringType.regular\n      : ScoringType.vegas\n  }\n\n  render() {\n    return (\n      <div className={container}>\n        <FireworksComponent />\n        <div>\n          <button\n            id=\"new-game\"\n            className={newGame}\n            onClick={this.handleNewGameClick}\n          >\n            {'New Game'}\n          </button>\n          <button\n            id=\"change-type\"\n            className={switchScoreType}\n            onClick={this.handleSwitchGameTypeClick}\n          >\n            {' Switch to '}\n            {ScoringType[this.otherGameType]}\n          </button>\n          <label id=\"score\" className={score}>\n            {'Score: '}\n            {this.props.score.score}\n          </label>\n        </div>\n        <div className={top}>\n          <StackComponent\n            stack={this.props.stock.stacks[0]}\n            onClick={this.handleStockClick}\n            direction={StackDirection.none}\n            type={StackType.stock}\n            hidden={true}\n            max={1}\n            drawsLeft={this.props.stock.drawsLeft}\n          />\n          <StackComponent\n            stack={this.props.waste.stacks[0]}\n            onClick={this.handleWasteClick}\n            onDoubleClick={this.handleDoubleClick}\n            direction={StackDirection.horizontal}\n            type={StackType.waste}\n            hidden={false}\n            max={this.props.waste.showing}\n            offset={15}\n          />\n          {this.props.foundation.map((stack, index) => (\n            <StackComponent\n              key={`foundation-${index}`}\n              onClick={this.handleFoundationClick}\n              stack={stack}\n              direction={StackDirection.none}\n              type={StackType.foundation}\n              max={1}\n            />\n          ))}\n        </div>\n        <div className={play}>\n          {this.props.tableau.map((stack, index) => (\n            <StackComponent\n              key={`tableau-${index}`}\n              onClick={this.handleTableauClick}\n              onDoubleClick={this.handleDoubleClick}\n              stack={stack}\n              direction={StackDirection.vertical}\n              type={StackType.tableau}\n            />\n          ))}\n        </div>\n        <div className={version}>{process.env.version}</div>\n      </div>\n    )\n  }\n}\n\nconst selector = createSelector(\n  [getTableau, getFoundation, getStock, getWaste, getScore],\n  ({ stacks: tableau }, { stacks: foundation }, stock, waste, score) => ({\n    tableau,\n    foundation,\n    stock,\n    waste,\n    score\n  })\n)\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch): ContainerActionProps => ({\n  handleNewGame: () => dispatch(initialize()),\n  handleSwitchGameType: newGameType => dispatch(initialize(newGameType)),\n  handleStockClick: () => dispatch(clickStock()),\n  handleTableauClick: (stack, card) => dispatch(clickTableau(stack, card)),\n  handleWasteClick: (stack, card) => dispatch(clickWaste(stack, card)),\n  handleFoundationClick: (stack, card) =>\n    dispatch(clickFoundation(stack, card)),\n  handleDoubleClick: (stack, card) => dispatch(doubleClick(stack, card)),\n  handleUndo: () => dispatch(undo()),\n  handleRedo: () => dispatch(redo())\n})\n\nconst mapStateToProps = (state: StoreState): ContainerConnectedProps =>\n  selector(state)\n\nexport const Container = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ContainerComponent)\n","import * as React from 'react'\nimport { stock, waste, tableau, foundation } from '../../styles/cards.scss'\nimport { Stack, StackCard, StackType, StackDirection } from '../lib/Stack'\n\ntype CardClickEvent = (stack: Stack, card: StackCard) => void\n\ntype StackOwnProps = {\n  type: StackType\n  direction: StackDirection\n  children?: React.ReactNode\n  stack: Stack\n  onClick?: CardClickEvent\n  onDoubleClick?: CardClickEvent\n  max: number\n  hidden: boolean\n  width: number\n  height: number\n  offset: number\n  radius: number\n  drawsLeft?: number\n}\n\ntype StackConnectedProps = {}\n\ntype StackProps = StackOwnProps & StackConnectedProps\n\ntype Point = {\n  x: number\n  y: number\n}\n\nexport class StackComponent extends React.PureComponent<StackProps> {\n  static defaultProps = {\n    max: Infinity,\n    hidden: false,\n    width: 74,\n    height: 97,\n    offset: 20,\n    radius: 10\n  }\n\n  private ref = React.createRef<HTMLCanvasElement>()\n\n  constructor(props: StackProps) {\n    super(props)\n    this.handleCanvasClick = this.handleCanvasClick.bind(this)\n    this.handleCanvasDoubleClick = this.handleCanvasDoubleClick.bind(this)\n  }\n\n  get stack_style(): string {\n    switch (this.props.type) {\n      case StackType.foundation:\n        return foundation\n      case StackType.tableau:\n        return tableau\n      case StackType.stock:\n        return stock\n      case StackType.waste:\n        return waste\n    }\n  }\n\n  get canvas_width() {\n    switch (this.props.direction) {\n      case StackDirection.none:\n      case StackDirection.vertical:\n        return this.props.width\n      case StackDirection.horizontal:\n        return this.cards.length === 0\n          ? this.props.height\n          : this.props.offset * (this.cards.length - 1) + this.props.width\n    }\n  }\n\n  get canvas_height() {\n    switch (this.props.direction) {\n      case StackDirection.none:\n      case StackDirection.horizontal:\n        return this.props.height\n      case StackDirection.vertical:\n        return this.cards.length === 0\n          ? this.props.height\n          : this.props.offset * (this.cards.length - 1) + this.props.height\n    }\n  }\n\n  get cards() {\n    return this.props.stack.cards.slice(-this.props.max)\n  }\n\n  handleCanvasDoubleClick(evt: React.MouseEvent<Element>) {\n    const { cards } = this\n    const { stack, offset, direction, onDoubleClick } = this.props\n    const { nativeEvent: e } = evt\n    if (!onDoubleClick) {\n      return\n    }\n\n    const prop = direction === StackDirection.horizontal ? 'offsetX' : 'offsetY'\n    const index = Math.min(cards.length - 1, Math.floor(e[prop] / offset))\n    onDoubleClick(stack, cards[index])\n  }\n\n  handleCanvasClick(evt: React.MouseEvent<Element>) {\n    const { cards } = this\n    const { stack, offset, direction, onClick } = this.props\n    const { nativeEvent: e } = evt\n    if (!onClick) {\n      return\n    }\n\n    const prop = direction === StackDirection.horizontal ? 'offsetX' : 'offsetY'\n    const index = Math.min(cards.length - 1, Math.floor(e[prop] / offset))\n    onClick(stack, cards[index])\n  }\n\n  componentDidMount() {\n    this.updateCanvas()\n  }\n\n  componentDidUpdate() {\n    this.updateCanvas()\n  }\n\n  updateCanvas() {\n    const canvas = this.ref.current\n    if (!canvas) {\n      return\n    }\n\n    const ctx = canvas.getContext('2d')\n    if (!ctx) {\n      return\n    }\n\n    const { cards } = this\n    const { direction, offset } = this.props\n\n    ctx.save()\n    ctx.translate(0.5, 0.5)\n    ctx.clearRect(0, 0, canvas.width, canvas.height)\n\n    if (cards.length === 0) {\n      this.drawBoxRadius(ctx, { x: 0, y: 0 })\n      ctx.stroke()\n\n      if (this.props.drawsLeft === 0) {\n        ctx.save()\n        ctx.font = '48px sans-serif'\n        ctx.fillStyle = 'red'\n        ctx.textAlign = 'center'\n        ctx.textBaseline = 'middle'\n        ctx.fillText('X', this.props.width / 2, this.props.height / 2)\n        ctx.restore()\n      }\n    }\n\n    for (let i = 0; i < cards.length; i++) {\n      const x = direction === StackDirection.horizontal ? i * offset : 0\n      const y = direction === StackDirection.horizontal ? 0 : i * offset\n\n      if (i < cards.length - 1) {\n        ctx.save()\n        this.drawClipRegion(ctx, { x, y })\n      }\n\n      this.drawCard(ctx, cards[i], { x, y })\n\n      if (i < cards.length - 1) {\n        ctx.restore()\n      }\n    }\n    ctx.restore()\n  }\n\n  drawClipRegion(ctx: CanvasRenderingContext2D, { x, y }: Point) {\n    const { direction, radius, offset, width, height } = this.props\n    const clip_width = direction === StackDirection.horizontal ? offset : width\n    const clip_height =\n      direction === StackDirection.horizontal ? height : offset\n\n    ctx.beginPath()\n    if (direction === StackDirection.horizontal) {\n      ctx.moveTo(x, y)\n      ctx.lineTo(x + clip_width + radius, y)\n      ctx.quadraticCurveTo(x + clip_width, y, x + clip_width, y + radius)\n      ctx.lineTo(x + clip_width, y + clip_height - radius)\n      ctx.quadraticCurveTo(\n        x + clip_width,\n        y + clip_height,\n        x + clip_width + radius,\n        y + clip_height\n      )\n      ctx.lineTo(x, y + clip_height)\n    } else {\n      ctx.moveTo(x + clip_width, y)\n      ctx.lineTo(x + clip_width, y + clip_height + radius)\n      ctx.quadraticCurveTo(\n        x + clip_width,\n        y + clip_height,\n        x + clip_width - radius,\n        y + clip_height\n      )\n      ctx.lineTo(x + radius, y + clip_height)\n      ctx.quadraticCurveTo(x, y + clip_height, x, y + clip_height + radius)\n      ctx.lineTo(x, y)\n    }\n    ctx.closePath()\n    ctx.clip()\n  }\n\n  drawBoxRadius(ctx: CanvasRenderingContext2D, { x, y }: Point) {\n    const { radius, height, width } = this.props\n    ctx.beginPath()\n    ctx.moveTo(x + radius, y)\n    ctx.lineTo(x + width - radius, y)\n    ctx.quadraticCurveTo(x + width, y, x + width, y + radius)\n    ctx.lineTo(x + width, y + height - radius)\n    ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height)\n    ctx.lineTo(x + radius, y + height)\n    ctx.quadraticCurveTo(x, y + height, x, y + height - radius)\n    ctx.lineTo(x, y + radius)\n    ctx.quadraticCurveTo(x, y, x + radius, y)\n    ctx.closePath()\n  }\n\n  drawCard(\n    ctx: CanvasRenderingContext2D,\n    stack_card: StackCard,\n    { x, y }: Point\n  ) {\n    const { card, hidden, selected } = stack_card\n\n    this.drawBoxRadius(ctx, { x, y })\n    ctx.stroke()\n\n    if (hidden) {\n      ctx.fillStyle = '#0aa'\n      ctx.fill()\n      return\n    }\n\n    if (selected) {\n      ctx.fillStyle = 'yellow'\n      ctx.fill()\n    }\n\n    const { value, suit, drawing } = card\n\n    ctx.fillStyle = drawing.color\n    ctx.textAlign = 'center'\n    ctx.textBaseline = 'top'\n\n    ctx.font = drawing.cornerFont\n    ctx.fillText(value, drawing.valueXOffset + x, drawing.valueYOffset + y, 12)\n    ctx.fillText(suit, drawing.suitXOffset + x, drawing.suitYOffset + y)\n\n    ctx.save()\n    ctx.translate(this.props.width, this.props.height)\n    ctx.rotate(Math.PI)\n    ctx.fillText(value, drawing.valueXOffset - x, drawing.valueYOffset - y, 12)\n    ctx.fillText(suit, drawing.suitXOffset - x, drawing.suitYOffset - y)\n    ctx.restore()\n\n    ctx.textBaseline = 'middle'\n\n    for (const pos of drawing.positions) {\n      const factor = pos.rotated ? -1 : 1\n      ctx.textAlign = pos.textAlign\n\n      if (pos.rotated) {\n        ctx.save()\n        ctx.translate(this.props.width, this.props.height)\n        ctx.rotate(Math.PI)\n      }\n\n      ctx.font = `${drawing.fontSize} sans-serif`\n      ctx.fillText(suit, pos.left + x * factor, pos.top + y * factor)\n\n      if (pos.rotated) {\n        ctx.restore()\n      }\n    }\n  }\n\n  render() {\n    return (\n      <canvas\n        onDoubleClick={this.handleCanvasDoubleClick}\n        onClick={this.handleCanvasClick}\n        className={this.stack_style}\n        width={this.canvas_width + 1}\n        height={this.canvas_height + 1}\n        ref={this.ref}\n      />\n    )\n  }\n}\n","import * as React from 'react'\nimport { connect } from 'react-redux'\nimport { createSelector } from 'reselect'\nimport * as FireworksCanvas from 'fireworks-canvas'\n\nimport { fireworks } from '../../styles/cards.scss'\nimport { StoreState } from '../redux'\nimport { getFoundation } from '../redux/selectors'\n\ntype FireworksConnectedProps = {\n  active: boolean\n}\n\ntype FireworksProps = FireworksConnectedProps\n\nclass Fireworks extends React.PureComponent<FireworksProps> {\n  ref: React.RefObject<HTMLDivElement>\n  fireworks: FireworksCanvas\n\n  constructor(props: FireworksProps) {\n    super(props)\n    this.ref = React.createRef()\n    this.handleDocumentKeyDown = this.handleDocumentKeyDown.bind(this)\n  }\n\n  handleDocumentKeyDown(ev: KeyboardEvent) {\n    if (ev.keyCode === 27) {\n      this.fireworks.stop()\n    }\n  }\n\n  componentDidMount() {\n    if (!this.ref.current) {\n      return null\n    }\n    this.fireworks = new FireworksCanvas(this.ref.current)\n  }\n\n  componentDidUpdate() {\n    if (this.props.active) {\n      document.addEventListener('keydown', this.handleDocumentKeyDown)\n      this.fireworks.start()\n    } else {\n      document.removeEventListener('keydown', this.handleDocumentKeyDown)\n      this.fireworks.kill()\n    }\n  }\n\n  componentWillUnmount() {\n    this.fireworks.destroy()\n  }\n\n  render() {\n    const display = this.props.active ? '' : 'none'\n    return <div style={{ display }} className={fireworks} ref={this.ref} />\n  }\n}\n\nconst selector = createSelector(\n  [getFoundation],\n  ({ stacks: foundation }) => ({\n    active: foundation.every(stack => stack.cards.length === 13)\n  })\n)\n\nconst mapStateToProps = (state: StoreState): FireworksConnectedProps =>\n  selector(state)\n\nexport default connect(mapStateToProps)(Fireworks)\n"],"sourceRoot":""}