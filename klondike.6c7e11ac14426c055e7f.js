!function(e){function t(t){for(var n,o,r=t[0],i=t[1],l=t[2],u=0,p=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(d&&d(t);p.length;)p.shift()();return c.push.apply(c,l||[]),s()}function s(){for(var e,t=0;t<c.length;t++){for(var s=c[t],n=!0,r=1;r<s.length;r++){var i=s[r];0!==a[i]&&(n=!1)}n&&(c.splice(t--,1),e=o(o.s=s[0]))}return e}var n={},a={0:0},c=[];function o(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=n,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(s,n,function(t){return e[t]}.bind(null,n));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var r=window.webpackJsonp=window.webpackJsonp||[],i=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=i;c.push([25,1]),s()}([,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.vegas=0]="vegas",e[e.regular=1]="regular"}(t.ScoringType||(t.ScoringType={})),function(e){e[e.wasteToTableau=0]="wasteToTableau",e[e.wasteToFoundation=1]="wasteToFoundation",e[e.tableauToFoundation=2]="tableauToFoundation",e[e.revealCard=3]="revealCard",e[e.foundationToTableau=4]="foundationToTableau"}(t.ScoreType||(t.ScoreType={})),t.INITIALIZE="INITIALIZE",t.SELECT_CARD="SELECT_CARD",t.DESELECT_CARD="DESELECT_CARD",t.MOVE_CARDS="MOVE_CARDS",t.REVEAL_TOP="REVEAL_TOP",t.APPEND_CARDS="APPEND_CARDS",t.CHANGE_SCORE_TYPE="CHANGE_SCORE_TYPE"},,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1),a="UNDO";t.undo=()=>({type:a});const c="REDO";t.redo=()=>({type:c});const o="CHECKPOINT";t.checkpoint=()=>({type:o}),t.undoable=function(e){const t={past:[],present:e(void 0,{}),future:[]};return function(s=t,r){const{past:i,present:l,future:d}=s;if(r.type===a){const e=i[i.length-1];return e?{past:i.slice(0,i.length-1),present:e,future:[l,...d]}:s}if(r.type===c){const e=d[0];if(!e)return s;const t=d.slice(1);return{past:[...i,l],present:e,future:t}}const u=e(l,r);return r.type===n.INITIALIZE?{past:[],present:u,future:[]}:r.type===o?{past:[...i,l],present:u,future:[]}:l===u?s:{past:i,present:u,future:d}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.horizontal="horizontal",e.vertical="vertical",e.none=""}(t.StackDirection||(t.StackDirection={})),function(e){e.tableau="tableau",e.foundation="foundation",e.stock="stock",e.waste="waste"}(t.StackType||(t.StackType={}))},,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(10);function a(e){return e===n.ValueType.ace?1:e===n.ValueType.jack?11:e===n.ValueType.queen?12:e===n.ValueType.king?13:parseInt(e)}t.random=(e,t)=>Math.floor(Math.random()*t)+e,t.get_top_card=function(e){return e.cards[e.cards.length-1]},t.get_selection=function(e){for(let t=0;t<e.length;t++){const s=e[t];if(null!=s.selection)return{card:s.selection,stack:s}}return null},t.select_card=function(e,t){const s=t.card;return null==s?e:e.map(e=>(function(e,t){return e.cards.some(e=>e.card===t)})(e,s)?Object.assign(Object.assign({},e),{cards:e.cards.map(e=>e.card?e.card!==s?e:Object.assign(Object.assign({},e),{selected:!0}):e),selection:s}):e)},t.deselect_card=function(e){return e.map(e=>e.selection?Object.assign(Object.assign({},e),{selection:void 0,cards:e.cards.map(e=>e.selected?Object.assign(Object.assign({},e),{selected:void 0}):e)}):e)},t.move_cards=function(e,t,s,n,a){return e.map(e=>e===s?Object.assign(Object.assign({},e),{cards:[...e.cards,...n.map(e=>Object.assign(Object.assign({},e),{selected:!1,hidden:a}))]}):e===t?Object.assign(Object.assign({},e),{cards:e.cards.filter(e=>-1===n.indexOf(e))}):e)},t.append_cards=function(e,t,s){return e.map(e=>e!==t?e:Object.assign(Object.assign({},e),{cards:[...e.cards,...s]}))},t.movable_to_foundation=function(e,t){if(null==t)return e.value===n.ValueType.ace;const{card:s}=t;return!!s&&(a(e.value)===a(s.value)+1&&e.suit===s.suit)},t.movable_to_tableau=function(e,t){if(null==t)return e.value===n.ValueType.king;const{card:s}=t;return!!s&&(a(e.value)+1===a(s.value)&&e.isRed&&s.isBlack||e.isBlack&&s.isRed)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(11);t.getFoundation=n.createSelector(e=>e.foundation.present,e=>e),t.getScore=n.createSelector(e=>e.score.present,e=>e),t.getStock=n.createSelector(e=>e.stock.present,e=>e),t.getTableau=n.createSelector(e=>e.tableau.present,e=>e),t.getWaste=n.createSelector(e=>e.waste.present,e=>e),t.getDeck=n.createSelector(e=>e.deck.present,e=>e),t.getAllStacks=n.createSelector([t.getFoundation,t.getWaste,t.getTableau],({stacks:e},{stacks:t},{stacks:s})=>[...e,...t,...s])},,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=75,a=97;var c,o;!function(e){e.ace="A",e.two="2",e.three="3",e.four="4",e.five="5",e.six="6",e.seven="7",e.eight="8",e.nine="9",e.ten="10",e.jack="J",e.queen="Q",e.king="K"}(c=t.ValueType||(t.ValueType={})),function(e){e.heart="♥",e.diamond="♦",e.spade="♠",e.club="♣"}(o||(o={})),t.Cards=[];for(const[,e]of Object.entries(c))for(const[,s]of Object.entries(o))t.Cards.push({suit:s,value:e,isRed:[o.diamond,o.heart].indexOf(s)>-1,isBlack:[o.club,o.spade].indexOf(s)>-1,drawing:r(s,e)});function r(e,t){const s=[o.diamond,o.heart].indexOf(e)>-1?"red":"black",r=[c.ace,c.jack,c.queen,c.king].indexOf(t)>-1?"72px":"20px",i=[];[c.ace,c.three,c.five,c.nine,c.jack,c.queen,c.king].indexOf(t)>-1&&i.push({x:1,y:3}),[c.two,c.three].indexOf(t)>-1&&i.push({x:1,y:0},{x:1,y:6}),[c.four,c.five,c.six,c.seven,c.eight,c.nine,c.ten].indexOf(t)>-1&&i.push({x:0,y:0},{x:2,y:0},{x:0,y:6},{x:2,y:6}),[c.six,c.seven,c.eight].indexOf(t)>-1&&i.push({x:0,y:3},{x:2,y:3}),[c.seven,c.ten,c.eight].indexOf(t)>-1&&i.push({x:1,y:1}),[c.nine,c.ten].indexOf(t)>-1&&i.push({x:0,y:2},{x:2,y:2},{x:0,y:4},{x:2,y:4}),[c.ten,c.eight].indexOf(t)>-1&&i.push({x:1,y:5});const l=e=>{switch(e){case 0:case 6:return.2*a;case 1:case 5:return.3*a;case 2:case 4:return.4*a;case 3:return.5*a}},d=e=>{switch(e){case 0:return.25*n;case 1:return.5*n;case 2:return.75*n}},u=e=>{switch(e){case 0:return"left";case 1:return"center";case 2:return"right"}};return{cornerFont:"bold 15px sans-serif",valueXOffset:9,valueYOffset:2,suitXOffset:9,suitYOffset:12,color:s,fontSize:r,positions:i.map(({x:e,y:t})=>({textAlign:u(e),rotated:t>3,left:d(e),top:l(t)}))}}},,function(e,t,s){e.exports={container:"_3Ho0y",fireworks:"_3Vpx0",top:"PXPNp",play:"_1AEL_",stock:"_1RYwC",waste:"_2ZC3g",foundation:"Dkr2R",tableau:"_32gkp",version:"_2eXaR","new-game":"_1Lqhp",newGame:"_1Lqhp","switch-score-type":"_2Bfdq",switchScoreType:"_2Bfdq",score:"_7PP0b"}},,,,,,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(3),a=s(4),c=s(6),o=s(1),r="DECREMENT_DRAWS";t.decrementDraws=()=>({type:r});const i={drawsLeft:1/0,stacks:[{type:a.StackType.stock,cards:[]}]};t.default=n.undoable(function(e=i,t){return t.type===o.INITIALIZE?Object.assign(Object.assign({},i),{drawsLeft:t.scoringType===o.ScoringType.vegas?2:1/0}):t.type===r?Object.assign(Object.assign({},e),{drawsLeft:e.drawsLeft-1}):t.type===o.MOVE_CARDS&&e.stacks.some(e=>[t.from,t.to].indexOf(e)>-1)?Object.assign(Object.assign({},e),{stacks:c.move_cards(e.stacks,t.from,t.to,t.cards,t.hidden)}):t.type===o.APPEND_CARDS&&e.stacks.some(e=>t.stack===e)?Object.assign(Object.assign({},e),{stacks:c.append_cards(e.stacks,t.stack,t.cards)}):e})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1),a=s(3),c=s(21),o="INCREMENT_SCORE";t.incrementScore=function(e){return{type:o,scoreType:e}};const r={score:c.getSavedScore(),scoringType:n.ScoringType.regular};t.default=a.undoable(function(e=r,t){if(t.type===n.INITIALIZE){const e=c.getSavedScore();return{score:t.scoringType===n.ScoringType.vegas?e-52:0,scoringType:t.scoringType}}if(t.type===o){let s=0;return e.scoringType===n.ScoringType.regular&&t.scoreType===n.ScoreType.tableauToFoundation?s=10:t.scoreType===n.ScoreType.wasteToFoundation||e.scoringType===n.ScoringType.vegas&&t.scoreType===n.ScoreType.tableauToFoundation||e.scoringType===n.ScoringType.regular&&t.scoreType===n.ScoreType.revealCard||e.scoringType===n.ScoringType.regular&&t.scoreType===n.ScoreType.wasteToTableau?s=5:e.scoringType===n.ScoringType.regular&&n.ScoreType.foundationToTableau?s=10:e.scoringType===n.ScoringType.vegas&&t.scoreType===n.ScoreType.foundationToTableau&&(s=-5),Object.assign(Object.assign({},e),{score:e.score+s})}return e})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1);t.saveScore=function(e){try{e.scoringType===n.ScoringType.vegas&&localStorage.setItem("score",e.score.toString())}catch(e){}},t.getSavedScore=function(){try{let e=localStorage.getItem("score");if(null==e)return 0;let t=parseInt(e,10);return Number.isNaN(t)?0:t}catch(e){return 0}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(10),a=s(1),c=s(3),o=s(6),r=s(7),i="REMOVE_CARD";t.removeCards=e=>({type:i,cards:e}),t.getRandomCards=e=>(s,n)=>{const a=[...r.getDeck(n()).cards],c=[];for(let t=0;t<e;t++){const e=o.random(0,a.length-1);c.push(...a.splice(e,1))}return s(t.removeCards(c)),c};const l={cards:[]};t.default=c.undoable(function(e=l,t){if(t.type===a.INITIALIZE){const e=[];for(const t of n.Cards)e.push({card:Object.assign({},t)});return{cards:e}}return t.type===i?{cards:e.cards.filter(e=>-1===t.cards.indexOf(e))}:e})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(7),a=s(22),c=s(4),o=s(10),r=s(6),i=s(3),l=s(20),d=s(1),u=s(19);t.initialize=function(e){return(s,c)=>{let o=e;null==o&&(o=c().score.present.scoringType),s({type:d.INITIALIZE,scoringType:o});const r=n.getStock(c()),i=s(a.getRandomCards(24)).map(e=>Object.assign(Object.assign({},e),{hidden:!0}));s(t.appendCards(r.stacks[0],i));const l=n.getTableau(c());for(let e=0;e<l.stacks.length;e++){const n=s(a.getRandomCards(e+1)).map((t,s)=>Object.assign(Object.assign({},t),{hidden:s!==e}));s(t.appendCards(l.stacks[e],n))}}},t.selectCard=(e,t)=>({type:d.SELECT_CARD,card:t,stack:e}),t.deselectCard=()=>({type:d.DESELECT_CARD}),t.appendCards=(e,t)=>({type:d.APPEND_CARDS,cards:t,stack:e}),t.moveCards=(e,t,s=null,n=null,a=!1,c=!1)=>{if(null==n){if(null==s)throw new Error("from card reqired when index not provided");n=e.cards.findIndex(e=>!!e.card&&e.card===s)}let o=e.cards.slice(n);return a&&o.reverse(),{type:d.MOVE_CARDS,from:e,to:t,cards:o,hidden:c}};const p=e=>({type:d.REVEAL_TOP,stack:e});t.doubleClick=function(e,s){return(a,u)=>{if(e.type===c.StackType.foundation||e.type===c.StackType.stock)return;if(null==s)return;const{card:p}=s;if(null==p)return;const h=n.getFoundation(u()),f=p.value===o.ValueType.ace?h.stacks.find(e=>0===e.cards.length):h.stacks.find(e=>{if(0===e.cards.length)return!1;const t=e.cards[0].card;return null!=t&&t.suit===p.suit});if(!f)return;const k=r.get_top_card(f);r.movable_to_foundation(p,k)&&(a(i.checkpoint()),e.type===c.StackType.waste&&a(l.incrementScore(d.ScoreType.wasteToFoundation)),e.type===c.StackType.tableau&&a(l.incrementScore(d.ScoreType.tableauToFoundation)),a(t.moveCards(e,f,p)),a(t.deselectCard()))}},t.clickFoundation=function(e,s){return(a,o)=>{const u=n.getAllStacks(o()),p=r.get_selection(u);if(!p)return void(s&&s.card&&a(t.selectCard(e,s)));if(s&&s.selected)return void a(t.deselectCard());const h=r.get_top_card(e),{card:f,stack:k}=p;r.movable_to_foundation(f,h)&&(a(i.checkpoint()),k.type===c.StackType.waste&&a(l.incrementScore(d.ScoreType.wasteToFoundation)),k.type===c.StackType.tableau&&a(l.incrementScore(d.ScoreType.tableauToFoundation)),a(t.moveCards(k,e,f)),a(t.deselectCard()))}},t.clickWaste=function(e,s){return(a,c)=>{if(!s)return;const o=n.getAllStacks(c()),i=r.get_selection(o),l=r.get_top_card(e);s.selected?a(t.deselectCard()):i||l!==s||a(t.selectCard(e,s))}},t.clickTableau=function(e,s){return(a,o)=>{const u=n.getAllStacks(o()),h=r.get_selection(u),f=r.get_top_card(e);if(!h)return void(s&&!s.hidden?a(t.selectCard(e,s)):s&&f&&!0===f.hidden&&(a(i.checkpoint()),a(l.incrementScore(d.ScoreType.revealCard)),a(p(e))));if(s&&s.selected)return void a(t.deselectCard());const{card:k,stack:y}=h;s===f&&r.movable_to_tableau(k,f)&&(a(i.checkpoint()),y.type===c.StackType.waste&&a(l.incrementScore(d.ScoreType.wasteToTableau)),y.type===c.StackType.foundation&&a(l.incrementScore(d.ScoreType.foundationToTableau)),a(t.moveCards(y,e,k)),a(t.deselectCard()))}},t.clickStock=function(){return(e,s)=>{const a=s(),{stacks:[c]}=n.getWaste(a),{stacks:[o],drawsLeft:r}=n.getStock(a);0===o.cards.length&&0===r||(e(i.checkpoint()),e(t.deselectCard()),o.cards.length>0?e(t.moveCards(o,c,null,-3,!0,!1)):(e(t.moveCards(c,o,null,0,!0,!0)),e(u.decrementDraws())))}}},,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),a=s(9),c=s(30),o=s(13),r=s(35),i=s(23),l=s(43);c.install({onUpdateReady(){c.applyUpdate()},onUpdated(){window.location.reload()}});const d=r.default();d.dispatch(i.initialize()),a.render(n.createElement(o.Provider,{store:d},n.createElement(l.Container,null)),document.getElementById("root"))},,,,,,,,,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(8),a=s(36),c=(s(37),s(38)),o=s(42),r=s(7),i=s(21);t.default=function(e){const t=[];t.push(a.default);const s=n.createStore(c.default,e,n.applyMiddleware(...t));return o.default(s,r.getScore,e=>i.saveScore(e)),s}},,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(8),a=s(39),c=s(40),o=s(41),r=s(19),i=s(20),l=s(22);t.default=n.combineReducers({deck:l.default,tableau:a.default,foundation:c.default,waste:o.default,stock:r.default,score:i.default})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(4),a=s(6),c=s(3),o=s(1),r={stacks:[{type:n.StackType.tableau,cards:[]},{type:n.StackType.tableau,cards:[]},{type:n.StackType.tableau,cards:[]},{type:n.StackType.tableau,cards:[]},{type:n.StackType.tableau,cards:[]},{type:n.StackType.tableau,cards:[]},{type:n.StackType.tableau,cards:[]}]};t.default=c.undoable(function(e=r,t){return t.type===o.INITIALIZE?Object.assign({},r):t.type===o.SELECT_CARD&&e.stacks.some(e=>e===t.stack)?Object.assign(Object.assign({},e),{stacks:a.select_card(e.stacks,t.card)}):t.type===o.DESELECT_CARD&&e.stacks.some(e=>!!e.selection)?Object.assign(Object.assign({},e),{stacks:a.deselect_card(e.stacks)}):t.type===o.MOVE_CARDS&&e.stacks.some(e=>[t.from,t.to].indexOf(e)>-1)?Object.assign(Object.assign({},e),{stacks:a.move_cards(e.stacks,t.from,t.to,t.cards,t.hidden)}):t.type===o.APPEND_CARDS&&e.stacks.some(e=>t.stack===e)?Object.assign(Object.assign({},e),{stacks:a.append_cards(e.stacks,t.stack,t.cards)}):t.type===o.REVEAL_TOP?Object.assign(Object.assign({},e),{stacks:e.stacks.map(e=>e!==t.stack?e:Object.assign(Object.assign({},e),{cards:e.cards.map((t,s)=>s<e.cards.length-1?t:Object.assign(Object.assign({},t),{hidden:!1}))}))}):e})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1),a=s(4),c=s(6),o=s(3),r={stacks:[{type:a.StackType.foundation,cards:[]},{type:a.StackType.foundation,cards:[]},{type:a.StackType.foundation,cards:[]},{type:a.StackType.foundation,cards:[]}]};t.default=o.undoable(function(e=r,t){return t.type===n.INITIALIZE?Object.assign({},r):t.type===n.SELECT_CARD&&e.stacks.some(e=>e===t.stack)?Object.assign(Object.assign({},e),{stacks:c.select_card(e.stacks,t.card)}):t.type===n.DESELECT_CARD&&e.stacks.some(e=>!!e.selection)?Object.assign(Object.assign({},e),{stacks:c.deselect_card(e.stacks)}):t.type===n.MOVE_CARDS&&e.stacks.some(e=>[t.from,t.to].indexOf(e)>-1)?Object.assign(Object.assign({},e),{stacks:c.move_cards(e.stacks,t.from,t.to,t.cards,t.hidden)}):e})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(6),a=s(4),c=s(3),o=s(1),r={stacks:[{type:a.StackType.waste,cards:[]}],showing:0};t.default=c.undoable(function(e=r,t){return t.type===o.INITIALIZE?Object.assign({},r):t.type===o.SELECT_CARD&&e.stacks.some(e=>e===t.stack)?Object.assign(Object.assign({},e),{stacks:n.select_card(e.stacks,t.card)}):t.type===o.DESELECT_CARD&&e.stacks.some(e=>!!e.selection)?Object.assign(Object.assign({},e),{stacks:n.deselect_card(e.stacks)}):t.type===o.MOVE_CARDS&&e.stacks.some(e=>[t.from,t.to].indexOf(e)>-1)?Object.assign(Object.assign({},e),{showing:t.to===e.stacks[0]?Math.min(e.stacks[0].cards.length+t.cards.length,3):Math.max(1,e.showing-1),stacks:n.move_cards(e.stacks,t.from,t.to,t.cards,t.hidden)}):t.type===o.APPEND_CARDS&&e.stacks.some(e=>t.stack===e)?Object.assign(Object.assign({},e),{showing:t.stack===e.stacks[0]?Math.min(e.stacks[0].cards.length+t.cards.length,3):Math.max(1,e.showing-1),stacks:n.append_cards(e.stacks,t.stack,t.cards)}):e})},,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),a=s(13),c=s(11),o=s(44),r=s(45),i=s(12),l=s(4),d=s(23),u=s(7),p=s(3),h=s(1);const f=c.createSelector([u.getTableau,u.getFoundation,u.getStock,u.getWaste,u.getScore],({stacks:e},{stacks:t},s,n,a)=>({tableau:e,foundation:t,stock:s,waste:n,score:a}));t.Container=a.connect(e=>f(e),e=>({handleNewGame:()=>e(d.initialize()),handleSwitchGameType:t=>e(d.initialize(t)),handleStockClick:()=>e(d.clickStock()),handleTableauClick:(t,s)=>e(d.clickTableau(t,s)),handleWasteClick:(t,s)=>e(d.clickWaste(t,s)),handleFoundationClick:(t,s)=>e(d.clickFoundation(t,s)),handleDoubleClick:(t,s)=>e(d.doubleClick(t,s)),handleUndo:()=>e(p.undo()),handleRedo:()=>e(p.redo())}))(class extends n.PureComponent{constructor(e){super(e),this.handleNewGameClick=this.handleNewGameClick.bind(this),this.handleStockClick=this.handleStockClick.bind(this),this.handleTableauClick=this.handleTableauClick.bind(this),this.handleWasteClick=this.handleWasteClick.bind(this),this.handleFoundationClick=this.handleFoundationClick.bind(this),this.handleDoubleClick=this.handleDoubleClick.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleSwitchGameTypeClick=this.handleSwitchGameTypeClick.bind(this)}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}handleNewGameClick(){this.props.handleNewGame()}handleSwitchGameTypeClick(){this.props.handleSwitchGameType(this.otherGameType)}handleKeyDown(e){90===e.keyCode&&(e.ctrlKey&&e.shiftKey?this.props.handleRedo():e.ctrlKey&&this.props.handleUndo())}handleStockClick(e,t){this.props.handleStockClick(e,t)}handleTableauClick(e,t){this.props.handleTableauClick(e,t)}handleWasteClick(e,t){this.props.handleWasteClick(e,t)}handleFoundationClick(e,t){this.props.handleFoundationClick(e,t)}handleDoubleClick(e,t){this.props.handleDoubleClick(e,t)}get otherGameType(){return this.props.score.scoringType===h.ScoringType.vegas?h.ScoringType.regular:h.ScoringType.vegas}render(){return n.createElement("div",{className:i.container},n.createElement(r.default,null),n.createElement("div",null,n.createElement("button",{id:"new-game",className:i.newGame,onClick:this.handleNewGameClick},"New Game"),n.createElement("button",{id:"change-type",className:i.switchScoreType,onClick:this.handleSwitchGameTypeClick}," Switch to ",h.ScoringType[this.otherGameType]),n.createElement("label",{id:"score",className:i.score},"Score: ",this.props.score.score)),n.createElement("div",{className:i.top},n.createElement(o.StackComponent,{stack:this.props.stock.stacks[0],onClick:this.handleStockClick,direction:l.StackDirection.none,type:l.StackType.stock,hidden:!0,max:1,drawsLeft:this.props.stock.drawsLeft}),n.createElement(o.StackComponent,{stack:this.props.waste.stacks[0],onClick:this.handleWasteClick,onDoubleClick:this.handleDoubleClick,direction:l.StackDirection.horizontal,type:l.StackType.waste,hidden:!1,max:this.props.waste.showing,offset:15}),this.props.foundation.map((e,t)=>n.createElement(o.StackComponent,{key:`foundation-${t}`,onClick:this.handleFoundationClick,stack:e,direction:l.StackDirection.none,type:l.StackType.foundation,max:1}))),n.createElement("div",{className:i.play},this.props.tableau.map((e,t)=>n.createElement(o.StackComponent,{key:`tableau-${t}`,onClick:this.handleTableauClick,onDoubleClick:this.handleDoubleClick,stack:e,direction:l.StackDirection.vertical,type:l.StackType.tableau}))),n.createElement("div",{className:i.version},"2.3.1"))}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),a=s(12),c=s(4);class o extends n.PureComponent{constructor(e){super(e),this.ref=n.createRef(),this.handleCanvasClick=this.handleCanvasClick.bind(this),this.handleCanvasDoubleClick=this.handleCanvasDoubleClick.bind(this)}get stack_style(){switch(this.props.type){case c.StackType.foundation:return a.foundation;case c.StackType.tableau:return a.tableau;case c.StackType.stock:return a.stock;case c.StackType.waste:return a.waste}}get canvas_width(){switch(this.props.direction){case c.StackDirection.none:case c.StackDirection.vertical:return this.props.width;case c.StackDirection.horizontal:return 0===this.cards.length?this.props.height:this.props.offset*(this.cards.length-1)+this.props.width}}get canvas_height(){switch(this.props.direction){case c.StackDirection.none:case c.StackDirection.horizontal:return this.props.height;case c.StackDirection.vertical:return 0===this.cards.length?this.props.height:this.props.offset*(this.cards.length-1)+this.props.height}}get cards(){return this.props.stack.cards.slice(-this.props.max)}handleCanvasDoubleClick(e){const{cards:t}=this,{stack:s,offset:n,direction:a,onDoubleClick:o}=this.props,{nativeEvent:r}=e;if(!o)return;const i=a===c.StackDirection.horizontal?"offsetX":"offsetY";o(s,t[Math.min(t.length-1,Math.floor(r[i]/n))])}handleCanvasClick(e){const{cards:t}=this,{stack:s,offset:n,direction:a,onClick:o}=this.props,{nativeEvent:r}=e;if(!o)return;const i=a===c.StackDirection.horizontal?"offsetX":"offsetY";o(s,t[Math.min(t.length-1,Math.floor(r[i]/n))])}componentDidMount(){this.updateCanvas()}componentDidUpdate(){this.updateCanvas()}updateCanvas(){const e=this.ref.current;if(!e)return;const t=e.getContext("2d");if(!t)return;const{cards:s}=this,{direction:n,offset:a}=this.props;t.save(),t.translate(.5,.5),t.clearRect(0,0,e.width,e.height),0===s.length&&(this.drawBoxRadius(t,{x:0,y:0}),t.stroke(),0===this.props.drawsLeft&&(t.save(),t.font="48px sans-serif",t.fillStyle="red",t.textAlign="center",t.textBaseline="middle",t.fillText("X",this.props.width/2,this.props.height/2),t.restore()));for(let e=0;e<s.length;e++){const o=n===c.StackDirection.horizontal?e*a:0,r=n===c.StackDirection.horizontal?0:e*a;e<s.length-1&&(t.save(),this.drawClipRegion(t,{x:o,y:r})),this.drawCard(t,s[e],{x:o,y:r}),e<s.length-1&&t.restore()}t.restore()}drawClipRegion(e,{x:t,y:s}){const{direction:n,radius:a,offset:o,width:r,height:i}=this.props,l=n===c.StackDirection.horizontal?o:r,d=n===c.StackDirection.horizontal?i:o;e.beginPath(),n===c.StackDirection.horizontal?(e.moveTo(t,s),e.lineTo(t+l+a,s),e.quadraticCurveTo(t+l,s,t+l,s+a),e.lineTo(t+l,s+d-a),e.quadraticCurveTo(t+l,s+d,t+l+a,s+d),e.lineTo(t,s+d)):(e.moveTo(t+l,s),e.lineTo(t+l,s+d+a),e.quadraticCurveTo(t+l,s+d,t+l-a,s+d),e.lineTo(t+a,s+d),e.quadraticCurveTo(t,s+d,t,s+d+a),e.lineTo(t,s)),e.closePath(),e.clip()}drawBoxRadius(e,{x:t,y:s}){const{radius:n,height:a,width:c}=this.props;e.beginPath(),e.moveTo(t+n,s),e.lineTo(t+c-n,s),e.quadraticCurveTo(t+c,s,t+c,s+n),e.lineTo(t+c,s+a-n),e.quadraticCurveTo(t+c,s+a,t+c-n,s+a),e.lineTo(t+n,s+a),e.quadraticCurveTo(t,s+a,t,s+a-n),e.lineTo(t,s+n),e.quadraticCurveTo(t,s,t+n,s),e.closePath()}drawCard(e,t,{x:s,y:n}){const{card:a,hidden:c,selected:o}=t;if(this.drawBoxRadius(e,{x:s,y:n}),e.stroke(),c)return e.fillStyle="#0aa",void e.fill();o&&(e.fillStyle="yellow",e.fill());const{value:r,suit:i,drawing:l}=a;e.fillStyle=l.color,e.textAlign="center",e.textBaseline="top",e.font=l.cornerFont,e.fillText(r,l.valueXOffset+s,l.valueYOffset+n,12),e.fillText(i,l.suitXOffset+s,l.suitYOffset+n),e.save(),e.translate(this.props.width,this.props.height),e.rotate(Math.PI),e.fillText(r,l.valueXOffset-s,l.valueYOffset-n,12),e.fillText(i,l.suitXOffset-s,l.suitYOffset-n),e.restore(),e.textBaseline="middle";for(const t of l.positions){const a=t.rotated?-1:1;e.textAlign=t.textAlign,t.rotated&&(e.save(),e.translate(this.props.width,this.props.height),e.rotate(Math.PI)),e.font=`${l.fontSize} sans-serif`,e.fillText(i,t.left+s*a,t.top+n*a),t.rotated&&e.restore()}}render(){return n.createElement("canvas",{onDoubleClick:this.handleCanvasDoubleClick,onClick:this.handleCanvasClick,className:this.stack_style,width:this.canvas_width+1,height:this.canvas_height+1,ref:this.ref})}}t.StackComponent=o,o.defaultProps={max:1/0,hidden:!1,width:74,height:97,offset:20,radius:10}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),a=s(13),c=s(11),o=s(46),r=s(12),i=s(7);const l=c.createSelector([i.getFoundation],({stacks:e})=>({active:e.every(e=>13===e.cards.length)}));t.default=a.connect(e=>l(e))(class extends n.PureComponent{constructor(e){super(e),this.ref=n.createRef(),this.handleDocumentKeyDown=this.handleDocumentKeyDown.bind(this)}handleDocumentKeyDown(e){27===e.keyCode&&this.fireworks.stop()}componentDidMount(){if(!this.ref.current)return null;this.fireworks=new o(this.ref.current)}componentDidUpdate(){this.props.active?(document.addEventListener("keydown",this.handleDocumentKeyDown),this.fireworks.start()):(document.removeEventListener("keydown",this.handleDocumentKeyDown),this.fireworks.kill())}componentWillUnmount(){this.fireworks.destroy()}render(){const e=this.props.active?"":"none";return n.createElement("div",{style:{display:e},className:r.fireworks,ref:this.ref})}})}]);
//# sourceMappingURL=klondike.6c7e11ac14426c055e7f.js.map